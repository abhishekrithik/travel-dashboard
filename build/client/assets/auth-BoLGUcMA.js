
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="376af2e3-07f3-5d63-9333-e00aa58ab746")}catch(e){}}();
import{d as c,b as s,Q as n,a,I as l,O as u}from"./client-TZMqkS_A.js";import{r as i}from"./chunk-PVWAREVJ-BgzlSlvQ.js";import"./create-trip-CEk4FKq_.js";const w=async r=>{try{const{documents:e,total:t}=await c.listDocuments(s.databaseId,s.userCollectionId,[n.equal("accountId",r)]);return t>0?e[0]:null}catch(e){return console.error("Error fetching user:",e),null}},f=async()=>{try{const r=await a.get();if(!r)throw new Error("User not found");const{providerAccessToken:e}=await a.getSession("current")||{},t=e?await d(e):null;(await c.createDocument(s.databaseId,s.userCollectionId,l.unique(),{accountId:r.$id,email:r.email,name:r.name,imageUrl:t,joinedAt:new Date().toISOString()})).$id||i("/sign-in")}catch(r){console.error("Error storing user data:",r)}},d=async r=>{var e;try{const t=await fetch("https://people.googleapis.com/v1/people/me?personFields=photos",{headers:{Authorization:`Bearer ${r}`}});if(!t.ok)throw new Error("Failed to fetch Google profile picture");const{photos:o}=await t.json();return((e=o==null?void 0:o[0])==null?void 0:e.url)||null}catch(t){return console.error("Error fetching Google picture:",t),null}},p=async()=>{try{a.createOAuth2Session(u.Google,`${window.location.origin}/`,`${window.location.origin}/404`)}catch(r){console.error("Error during OAuth2 session creation:",r)}},y=async()=>{try{await a.deleteSession("current")}catch(r){console.error("Error during logout:",r)}},I=async()=>{try{const r=await a.get();if(!r)return i("/sign-in");const{documents:e}=await c.listDocuments(s.databaseId,s.userCollectionId,[n.equal("accountId",r.$id),n.select(["name","email","imageUrl","joinedAt","accountId"])]);return e.length>0?e[0]:i("/sign-in")}catch(r){return console.error("Error fetching user:",r),null}},E=async(r,e)=>{try{const{documents:t,total:o}=await c.listDocuments(s.databaseId,s.userCollectionId,[n.limit(r),n.offset(e)]);return o===0?{users:[],total:o}:{users:t,total:o}}catch{return console.log("Error fetching users"),{users:[],total:0}}};export{y as a,I as b,E as c,w as g,p as l,f as s};

//# debugId=376af2e3-07f3-5d63-9333-e00aa58ab746
