
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="987382b4-a1bf-59f2-9e77-f58c9e63fdce")}catch(e){}}();
import{f as le,d as we,i as c,E as I,B as O,o as Ie,L as Rn,a as T,j as Le,D as Xs,Y as Wn,l as it,h as ui,S as ei,k as W,c as E,J as Kn,s as $e,t as Qt,P as C,V as Ii,v as ye,e as x,N as xn,C as pi,w as oe,Q as Fe,O as Ve,m as q,n as M,A as Ai,M as Un,T as qo,W as kn,Z as No,p as fi,x as gt,y as Z,u as Vo,_ as Ys,g as Re,q as je,$ as jn,a0 as wt,U as Ge,a1 as Go,R as _o,a2 as Wo,X as Ko,a3 as Uo}from"./sanitize-helper-DzDTF7ck.js";import{b as Js,g as jo,e as Qo,f as Xr,i as Xo,j as Yo,k as Jo,Q as he,a as fe,D as _,R as Zo,P as se,d as rt,U as gi,c as Yr,s as hi,h as Jr,l as Zs,I as Qn}from"./input-CWPTefBf.js";import{a as Bt,c as mi}from"./button.component-QhQZuxY5.js";var br=["north-west","north","north-east","west","east","south-west","south","south-east"],Ri="e-resize-handle",Rt="e-focused-handle",$o="e-dlg-resizable",Xn=["e-restrict-left"],$s="e-resize-viewport",ea=["north","west","east","south"],X,Je,Fn=0,Mn=0,eo=0,to=0,vi=0,yi=0,Xt,dt,Tn,ut,G,ti=null,$i=null,er=null,pt,tr=!0,Yn=0,wr=!0;function ta(s){ti=s.resizeBegin,$i=s.resizing,er=s.resizeComplete,X=Jn(s.element),G=Jn(s.boundary);for(var e=s.direction.split(" "),i=0;i<e.length;i++)if(ea.indexOf(e[i])>=0&&e[i])ia(e[i]);else if(e[i].trim()!==""){var t=le("div",{className:"e-icons "+Ri+" e-"+e[i]});X.appendChild(t)}Xt=s.minHeight,Tn=s.minWidth,ut=s.maxWidth,dt=s.maxHeight,s.proxy&&s.proxy.element&&s.proxy.element.classList.contains("e-dialog")?Zn(s.proxy):Zn()}function ia(s){An();var e=le("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+s),s==="south"&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px"),s==="north"&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px"),s==="east"&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px"),s==="west"&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px"),X.appendChild(e)}function Jn(s){var e;return c(s)||(typeof s=="string"?e=document.querySelector(s):e=s),e}function Zn(s){for(var e=s||this,i=X.querySelectorAll("."+Ri),t=0;t<i.length;t++){Je=i[t],I.add(Je,"mousedown",$n,e);var r=O.info.name==="msie"?"pointerdown":"touchstart";I.add(Je,r,es,e)}var n=X.querySelectorAll(".e-dialog-border-resize");if(!c(n))for(var t=0;t<n.length;t++){Je=n[t],I.add(Je,"mousedown",$n,e);var r=O.info.name==="msie"?"pointerdown":"touchstart";I.add(Je,r,es,e)}}function io(s){return s.indexOf("mouse")>-1?"mouse":"touch"}function $n(s){if(s.preventDefault(),X=s.target.parentElement,An(),vi=s.pageX,yi=s.pageY,s.target.classList.add(Rt),!c(ti)){var e=this;if(ti(s,e)===!0)return}this.targetEle&&X&&X.querySelector("."+$o)&&(G=this.target==="body"?null:this.targetEle,ut=this.targetEle.clientWidth,dt=this.targetEle.clientHeight);var i=c(G)?document:G;I.add(i,"mousemove",ci,this),I.add(document,"mouseup",ir,this);for(var t=0;t<Xn.length;t++)X.classList.contains(Xn[t])?tr=!1:tr=!0}function ir(s){var e=O.info.name==="msie"?"pointermove":"touchmove",i=O.info.name==="msie"?"pointerup":"touchend",t=c(G)?document:G,r=O.info.name==="msie"?"pointerdown":"touchstart";if(I.remove(t,"mousemove",ci),I.remove(t,e,ci),I.remove(t,r,ci),c(document.body.querySelector("."+Rt))||document.body.querySelector("."+Rt).classList.remove(Rt),!c(er)){var n=this;er(s,n)}I.remove(document,"mouseup",ir),I.remove(document,i,ir)}function An(){Fn=parseFloat(getComputedStyle(X,null).getPropertyValue("width").replace("px","")),Mn=parseFloat(getComputedStyle(X,null).getPropertyValue("height").replace("px","")),eo=X.getBoundingClientRect().left,to=X.getBoundingClientRect().top}function es(s){X=s.target.parentElement,An();var e=X.classList.contains("e-dialog");(s.target.classList.contains(Ri)||s.target.classList.contains("e-dialog-border-resize"))&&e&&s.target.classList.add(Rt);var i=s.touches?s.changedTouches[0]:s;if(vi=i.pageX,yi=i.pageY,!c(ti)){var t=this;if(ti(s,t)===!0)return}var r=O.info.name==="msie"?"pointermove":"touchmove",n=O.info.name==="msie"?"pointerup":"touchend",o=c(G)?document:G;I.add(o,r,ci,this),I.add(document,n,ir,this)}function ci(s){if(s.target.classList.contains(Ri)&&s.target.classList.contains(Rt)?Je=s.target:c(document.body.querySelector("."+Rt))||(Je=document.body.querySelector("."+Rt)),!c(Je)){for(var e="",i=0;i<br.length;i++)Je.classList.contains("e-"+br[i])&&(e=br[i]);if(!c($i)){var t=this;$i(s,t)}switch(e){case"south":Ir(s);break;case"north":Rr(s);break;case"west":xr(s);break;case"east":kr(s);break;case"south-east":Ir(s),kr(s);break;case"south-west":Ir(s),xr(s);break;case"north-east":Rr(s),kr(s);break;case"north-west":Rr(s),xr(s);break}}}function kt(s){return s.getBoundingClientRect()}function Ir(s){var e=document.documentElement.clientHeight,i=!1,t=s.touches?s.changedTouches[0]:s,r=t.pageY,n=kt(X),o;c(G)||(o=kt(G)),c(G)?c(G)&&(e-r>=0||n.top<0)&&(i=!0):i=!0;var a=Mn+(r-yi);a=a>Xt?a:Xt;var l=0;c(G)||(l=o.top);var h=c(G)?0:G.offsetHeight-G.clientHeight,p=n.top-l-h/2;if(p=p<0?0:p,n.top>0&&p+a>dt){if(i=!1,X.classList.contains($s))return;X.style.height=dt-parseInt(p.toString(),10)+"px";return}var d=0;if(i){n.top<0&&e+(n.height+n.top)>0&&(d=n.top,a+d<=30&&(a=n.height-(n.height+n.top)+30)),a+n.top>=dt&&(X.style.height=n.height+(e-(n.height+n.top))+"px");var u=c(G)?d:p;a>=Xt&&a+u<=dt&&(X.style.height=a+"px")}}function Rr(s){var e=!1,i,t=io(s.type)==="mouse"?s.pageY:s.touches[0].pageY,r=kt(X),n=c(G)?0:G.offsetHeight-G.clientHeight;c(G)||(i=kt(G)),(!c(G)&&r.top-i.top>0||c(G)&&t>0||!c(G)&&Math.floor(r.top-i.top+r.height+(i.bottom-r.bottom))-n<=dt)&&(e=!0);var o=Mn-(t-yi);if(e&&o>=Xt&&o<=dt){var a=0;c(G)||(a=i.top);var l=to-a+(t-yi);l=l>0?l:1,X.style.height=o+"px",X.style.top=l+"px"}}function xr(s){var e=document.documentElement.clientWidth,i=!1,t;c(G)||(t=kt(G));var r=io(s.type)==="mouse"?s.pageX:s.touches[0].pageX,n=kt(X),o=c(G)?0:G.offsetWidth-G.clientWidth,a=c(G)?0:t.left,l=c(G)?0:t.width;c(pt)&&(c(G)?pt=e:(pt=n.left-a-o/2+n.width,pt=pt+(l-o-pt))),(!c(G)&&Math.floor(n.left-t.left+n.width+(t.right-n.right))-o<=ut||c(G)&&r>=0)&&(i=!0);var h=Fn-(r-vi);if(tr&&(h=h>pt?pt:h),i&&h>=Tn&&h<=ut){var p=0;c(G)||(p=t.left);var d=eo-p+(r-vi);d=d>0?d:1,h!==Yn&&wr&&(X.style.width=h+"px"),tr&&(X.style.left=d+"px",d===1?wr=!1:wr=!0)}Yn=h}function kr(s){var e=document.documentElement.clientWidth,i=!1,t;c(G)||(t=kt(G));var r=s.touches?s.changedTouches[0]:s,n=r.pageX,o=kt(X);(!c(G)&&(o.left-t.left+o.width<=ut||o.right-t.left>=o.width)||c(G)&&e-n>0)&&(i=!0);var a=Fn+(n-vi),l=0;if(c(G)||(l=t.left),o.left-l+a>ut){if(i=!1,X.classList.contains($s))return;X.style.width=ut-(o.left-l)+"px"}i&&a>=Tn&&a<=ut&&(X.style.width=a+"px")}function ra(s){Xt=s}function na(s){ut=s}function sa(s){dt=s}function ts(){for(var s=X.querySelectorAll("."+Ri),e=0;e<s.length;e++)we(s[e]);var i=X.querySelectorAll(".e-dialog-border-resize");if(!c(i))for(var e=0;e<i.length;e++)we(i[e])}function oa(){X=null,Je=null,G=null,pt=null,ti=null,$i=null,er=null}var En=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),V=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},aa=function(s){En(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return V([C(!0)],e.prototype,"isFlat",void 0),V([C()],e.prototype,"buttonModel",void 0),V([C("Button")],e.prototype,"type",void 0),V([x()],e.prototype,"click",void 0),e}(oe),la=function(s){En(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return V([C("Fade")],e.prototype,"effect",void 0),V([C(400)],e.prototype,"duration",void 0),V([C(0)],e.prototype,"delay",void 0),e}(oe),Ei="e-dialog",Fr="e-rtl",Mr="e-dlg-header-content",is="e-dlg-header",Di="e-footer-content",Li="e-dlg-modal",ha="e-dlg-content",rs="e-icon-dlg-close",pa="e-dlg-overlay",Qe="e-dlg-target",ca="e-dlg-container",qe="e-scroll-disabled",da="e-primary",ua="e-icons",fa="e-popup",ns="e-device",zi="e-dlg-fullscreen",ss="e-dlg-closeicon-btn",ga="e-popup-close",os="e-popup-open",as="Information",ls="e-scroll-disabled",ro="e-alert-dialog",no="e-confirm-dialog",Tr="e-dlg-resizable",Ut="e-restrict-left",hs="e-resize-viewport",ma="e-dlg-ref-element",Ar="user action",va="close icon",ya="escape",Sa="overlayClick",Ca="e-draggable",Dn=function(s){En(e,s);function e(i,t){var r=s.call(this,i,t)||this;return r.needsID=!0,r}return e.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),this.width==="100%"&&(this.element.style.width=""),this.minHeight!==""&&(this.element.style.minHeight=Ie(this.minHeight)),this.enableResize&&(this.setResize(),this.isModal&&(this.isModelResize=!0),this.animationSettings.effect==="None"&&this.getMinHeight()),this.renderComplete()},e.prototype.initializeValue=function(){this.dlgClosedBy=Ar},e.prototype.preRender=function(){var i=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(n){i.dlgClosedBy=va,i.hide(n)},this.dlgOverlayClickEventHandler=function(n){i.dlgClosedBy=Sa,n.preventFocus=!1,i.trigger("overlayClick",n,function(o){o.preventFocus||i.focusContent(),i.dlgClosedBy=Ar})};var t={close:"Close"};if(this.l10n=new Rn("dialog",t,this.locale),this.checkPositionData(),c(this.target)){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=r}},e.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},e.prototype.isNumberValue=function(i){var t=/^[-+]?\d*\.?\d+$/.test(i);return t},e.prototype.checkPositionData=function(){if(!c(this.position)){if(!c(this.position.X)&&typeof this.position.X!="number"){var i=this.isNumberValue(this.position.X);if(i){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=t}}if(!c(this.position.Y)&&typeof this.position.Y!="number"){var i=this.isNumberValue(this.position.Y);if(i){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}}},e.prototype.getEle=function(i,t){for(var r=void 0,n=0;n<i.length;n++)if(i[n].classList.contains(t)){r=i[n];break}return r},e.prototype.getMinHeight=function(){var i="0px",t="0px";c(this.element.querySelector("."+Mr))||(i=getComputedStyle(this.headerContent).height);var r=this.getEle(this.element.children,Di);c(r)||(t=getComputedStyle(r).height);var n=parseInt(i.slice(0,i.indexOf("p")),10),o=parseInt(t.slice(0,t.indexOf("p")),10);return ra(n+30+(isNaN(o)?0:o)),n+30+o},e.prototype.onResizeStart=function(i,t){if(t.trigger("resizeStart",i),!i.cancel&&this.isModelResize&&!c(this.dlgContainer)&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)){this.setPopupPosition(),this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);var r=this.getTargetContainer(this.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"?this.element.style.position="absolute":this.element.style.position="relative"}else this.element.style.position="relative";this.element.classList.contains(Ut)&&this.element.classList.remove(Ut),this.isModelResize=!1}return i.cancel},e.prototype.onResizing=function(i,t){t.trigger("resizing",i)},e.prototype.onResizeComplete=function(i,t){t.trigger("resizeStop",i),this.updatePersistData()},e.prototype.setResize=function(){if(this.enableResize){this.element.classList.add(Tr);for(var i=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,r="",n=0;n<this.resizeHandles.length;n++)if(this.resizeHandles[n]==="All"){r="south north east west north-east north-west south-east south-west";break}else{var o="";switch(this.resizeHandles[n].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[n].toString();break}r+=o.toLocaleLowerCase()+" "}this.enableRtl&&r.trim()==="south-east"?r="south-west":this.enableRtl&&r.trim()==="south-west"&&(r="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Ut):this.isModal&&this.target===document.body&&this.element.classList.add(hs),ta({element:this.element,direction:r,minHeight:parseInt(i.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else ts(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(Ut):this.element.classList.remove(hs),this.element.classList.remove(Tr)},e.prototype.getFocusElement=function(i){var t='input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]',r=i.querySelectorAll(t);return{element:r[r.length-1]}},e.prototype.keyDown=function(i){var t=this;if(i.keyCode===9&&this.isModal){var r=void 0;c(this.btnObj)||(r=this.btnObj[this.btnObj.length-1]),c(this.btnObj)&&!c(this.ftrTemplateContent)&&(r=this.getFocusElement(this.ftrTemplateContent)),c(this.btnObj)&&c(this.ftrTemplateContent)&&!c(this.contentEle)&&(r=this.getFocusElement(this.contentEle)),!c(r)&&document.activeElement===r.element&&!i.shiftKey&&(i.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&i.shiftKey&&(i.preventDefault(),c(r)||r.element.focus())}var n=document.activeElement,o=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,a=!1;if(o||(a=n.hasAttribute("contenteditable")&&n.getAttribute("contenteditable")==="true"),i.keyCode===27&&this.closeOnEscape){this.dlgClosedBy=ya;var l=document.querySelector(".e-popup-open:not(.e-dialog)");!c(l)&&!l.classList.contains("e-toolbar-pop")&&!l.classList.contains("e-slider-tooltip")||this.hide(i)}if(i.keyCode===13&&!i.ctrlKey&&n.tagName.toLowerCase()!=="textarea"&&o&&!c(this.primaryButtonEle)||i.keyCode===13&&i.ctrlKey&&(n.tagName.toLowerCase()==="textarea"||a)&&!c(this.primaryButtonEle)){var h,p=this.buttons.some(function(d,u){h=u;var f=d.buttonModel;return!c(f)&&f.isPrimary===!0});p&&typeof this.buttons[h].click=="function"&&!this.primaryButtonEle.disabled&&setTimeout(function(){t.buttons[h].click.call(t,i)})}},e.prototype.initialize=function(){c(this.target)||(this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target),this.isBlazorServerRender()||T([this.element],Ei),O.isDevice&&T([this.element],ns),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},e.prototype.initRender=function(){var i=this;if(this.initialRender=!0,this.isBlazorServerRender()||Le(this.element,{role:"dialog"}),this.zIndex===1e3?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.setTargetContent(),this.header!==""&&!c(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),this.footerTemplate!==""&&!c(this.footerTemplate)?this.setFooterTemplate():!c(this.buttons[0])&&!c(this.buttons[0].buttonModel)&&this.setButton(),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging(),Le(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal(),this.element.classList.contains(ro)!==!0&&this.element.classList.contains(no)!==!0&&!c(this.element.parentElement)){var t=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:ma}),t.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if(c(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new Js(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(o){var a={container:i.isModal?i.dlgContainer:i.element,element:i.element,target:i.target,preventFocus:!1};i.enableResize&&i.resetResizeIcon(),i.trigger("open",a,function(l){l.preventFocus||i.focusContent()})},close:function(o){i.isModal&&T([i.dlgOverlay],"e-fade"),i.unBindEvent(i.element),i.isModal&&(i.dlgContainer.style.display="none"),i.trigger("close",i.closeArgs);var a=document.activeElement;!c(a)&&!c(a.blur)&&a.blur(),!c(i.storeActiveElement)&&!c(i.storeActiveElement.focus)&&i.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(T([this.element],ga),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var r=this.getTargetContainer(this.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"&&this.setPopupPosition()}}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},e.prototype.getTargetContainer=function(i){var t=null;if(typeof i=="string")if(i.startsWith("#"))t=document.getElementById(i.substring(1));else if(i.startsWith(".")){var r=document.getElementsByClassName(i.substring(1));t=r.length>0?r[0]:null}else!(i instanceof HTMLElement)&&i!==document.body&&(t=document.querySelector(i));else i instanceof HTMLElement&&(t=i);return t},e.prototype.resetResizeIcon=function(){var i=this.getMinHeight();if(this.targetEle.offsetHeight<i){var t=this.enableRtl?"e-south-west":"e-south-east",r=this.element.querySelector("."+t);c(r)||(r.style.bottom="-"+i.toString()+"px")}},e.prototype.setOverlayZindex=function(i){var t;c(i)?t=parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:t=i,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},e.prototype.positionChange=function(){this.isModal?!isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},e.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},e.prototype.setAllowDragging=function(){var i=this,t="."+Mr;this.element.classList.contains(Ca)||(this.dragObj=new Xs(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:t,dragStart:function(r){i.trigger("dragStart",r,function(n){})},dragStop:function(r){if(i.isModal){i.IsDragStop=!0,c(i.position)||i.dlgContainer.classList.remove("e-dlg-"+i.position.X+"-"+i.position.Y);var n=i.getTargetContainer(i.target);if(n instanceof Element){var o=window.getComputedStyle(n);o.getPropertyValue("direction")==="rtl"?i.element.style.position="absolute":i.element.style.position="relative"}else i.element.style.position="relative"}i.trigger("dragStop",r),i.isModelResize=!1,i.element.classList.remove(Ut),i.updatePersistData()},drag:function(r){i.trigger("drag",r)}}),c(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},e.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var i=0;i<this.buttons.length;i++)if(!c(this.buttons[i].buttonModel)){var t=c(this.buttons[i].type)?"button":this.buttons[i].type.toLowerCase(),r=this.createElement("button",{className:this.cssClass,attrs:{type:t,tabindex:"0"}});this.buttonContent.push(r.outerHTML)}this.setFooterTemplate()}for(var n,i=0,o=this.element.children;i<o.length;i++)o[i].classList.contains(Di)&&(n=o[i].querySelectorAll("button"));for(var i=0;i<this.buttons.length;i++)c(this.buttons[i].buttonModel)||(this.isBlazorServerRender()||(this.btnObj[i]=new Bt(this.buttons[i].buttonModel)),!c(this.ftrTemplateContent)&&n.length>0&&(typeof this.buttons[i].click=="function"&&I.add(n[i],"click",this.buttons[i].click,this),typeof this.buttons[i].click=="object"&&I.add(n[i],"click",this.buttonClickHandler.bind(this,i),this)),!this.isBlazorServerRender()&&!c(this.ftrTemplateContent)&&(this.btnObj[i].appendTo(this.ftrTemplateContent.children[i]),this.buttons[i].isFlat&&this.btnObj[i].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]))},e.prototype.buttonClickHandler=function(i){this.trigger("buttons["+i+"].click",{})},e.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:ha,id:this.element.id+"_dialog-content"}),this.headerEle?Le(this.element,{"aria-describedby":this.element.id+"_title "+this.element.id+"_dialog-content"}):Le(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!c(this.content)&&this.content!==""||!this.initialRender)&&(typeof this.content=="string"?this.setTemplate(this.content,this.contentEle,"content"):this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),c(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),this.height==="auto"&&(!this.isBlazorServerRender()&&O.isIE&&this.element.style.width===""&&!c(this.width)&&(this.element.style.width=Ie(this.width)),this.setMaxHeight())},e.prototype.setTemplate=function(i,t,r){var n,o;t.classList.contains(is)?o=this.element.id+"header":t.classList.contains(Di)?o=this.element.id+"footerTemplate":o=this.element.id+"content",c(i.outerHTML)?(typeof i=="string"||typeof i!="string"||Wn())&&(typeof i=="string"&&(i=this.sanitizeHelper(i)),this.isVue||typeof i!="string"?n=it(i):t.innerHTML=i):t.appendChild(i);var a=[];if(!c(n)){for(var l=!0,h=0,p=n({},this,r,o,l);h<p.length;h++){var d=p[h];a.push(d)}ui([].slice.call(a),t)}},e.prototype.sanitizeHelper=function(i){if(this.enableHtmlSanitizer){var t=ei.beforeSanitize(),r={cancel:!1,helper:null};W(t,t,r),this.trigger("beforeSanitizeHtml",t),t.cancel&&!c(t.helper)?i=t.helper(i):t.cancel||(i=ei.serializeValue(t,i))}return i},e.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!c(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=i,O.isIE&&this.height==="auto"&&!c(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},e.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?T([this.element],Fr):E([this.element],Fr)),c(this.element.querySelector(".e-resize-handle"))||(ts(),this.setResize())},e.prototype.setTargetContent=function(){var i=this;if(c(this.content)||this.content===""){var t=this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"")!=="";(this.element.children.length>0||t)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(r){r.nodeType!==8&&i.innerContentElement.appendChild(r)}))}},e.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:is}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Le(this.element,{"aria-describedby":this.element.id+"_title"}),Le(this.element,{"aria-labelledby":this.element.id+"_dialog-header"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging()},e.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Di}),this.footerTemplate!==""&&!c(this.footerTemplate)?this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"):this.ftrTemplateContent.innerHTML=this.buttonContent.join(""),this.element.appendChild(this.ftrTemplateContent)},e.prototype.createHeaderContent=function(){c(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Mr}))},e.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:ss,attrs:{type:"button"}}),this.closeIconBtnObj=new Bt({cssClass:"e-flat",iconCss:rs+" "+ua}),this.closeIconTitle(),c(this.headerContent)?(this.createHeaderContent(),Kn([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Kn([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},e.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",i),this.closeIcon.setAttribute("aria-label",i)},e.prototype.setCSSClass=function(i){i&&(E([this.element],i.split(" ")),this.isModal&&!c(this.dlgContainer)&&E([this.dlgContainer],i.split(" "))),this.cssClass&&(T([this.element],this.cssClass.split(" ")),this.isModal&&!c(this.dlgContainer)&&T([this.dlgContainer],this.cssClass.split(" ")))},e.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:ca}),this.setCSSClass(),this.element.classList.remove(os),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),T([this.element],Li),this.dlgOverlay=this.createElement("div",{className:pa}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},e.prototype.getValidFocusNode=function(i){for(var t,r=0;r<i.length;r++){if(t=i[r],(t.clientHeight>0||t.tagName.toLowerCase()==="a"&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},e.prototype.focusableElements=function(i){if(!c(i)){var t='input,select,textarea,button,a,[contenteditable="true"],[tabindex]',r=i.querySelectorAll(t);return this.getValidFocusNode(r)}return null},e.prototype.getAutoFocusNode=function(i){var t=i.querySelector("."+ss),r="[autofocus]",n=i.querySelectorAll(r),o=this.getValidFocusNode(n);if(!c(o))t=o;else if(o=this.focusableElements(this.contentEle),c(o)){if(!c(this.primaryButtonEle))return this.element.querySelector("."+da)}else return t=o;return t},e.prototype.disableElement=function(i,t){var r=i?i.matches||i.webkitMatchesSelector||i.msGetRegionContent:null;if(r){for(;i;i=i.parentNode)if(i instanceof Element&&r.call(i,t))return i}return null},e.prototype.focusContent=function(){var i=this.getAutoFocusNode(this.element),t=c(i)?this.element:i,r=O.userAgent;(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},e.prototype.bindEvent=function(i){I.add(i,"keydown",this.keyDown,this)},e.prototype.unBindEvent=function(i){I.remove(i,"keydown",this.keyDown)},e.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},e.prototype.isBlazorServerRender=function(){return Wn()},e.prototype.getModuleName=function(){return"dialog"},e.prototype.onPropertyChanged=function(i,t){if(this.element.classList.contains(Ei))for(var r=0,n=Object.keys(i);r<n.length;r++){var o=n[r];switch(o){case"content":!c(this.content)&&this.content!==""?(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),!c(this.contentEle)&&this.contentEle.getAttribute("role")!=="dialog"?(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),typeof this.content=="function"?(this.clearTemplate(["content"]),we(this.contentEle),this.contentEle=null,this.setContent()):typeof this.content=="string"?this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()):this.setContent()):c(this.contentEle)||(we(this.contentEle),this.contentEle=null);break;case"header":this.header===""||c(this.header)?this.headerEle&&(we(this.headerEle),this.headerEle=null):this.setHeader();break;case"footerTemplate":if(this.footerTemplate===""||c(this.footerTemplate)){if(!this.ftrTemplateContent)return;we(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(rs).length>0?!this.showCloseIcon&&(this.header===""||c(this.header))?(we(this.headerContent),this.headerContent=null):this.showCloseIcon||we(this.closeIcon):(this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":$e(this.element,{height:Ie(i.height)}),this.updatePersistData();break;case"width":$e(this.element,{width:Ie(i.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":{this.unWireButtonEvents(),this.destroyButtons(),c(this.ftrTemplateContent)||(we(this.ftrTemplateContent),this.ftrTemplateContent=null),this.footerTemplate="",this.setButton();break}case"allowDragging":this.allowDragging&&!c(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(i.target);break;case"position":if(this.checkPositionData(),this.isModal){var a=this.position.X,l=this.position.Y;c(t.position)||(c(t.position.X)||(a=t.position.X),c(t.position.Y)||(l=t.position.Y)),this.dlgContainer.classList.contains("e-dlg-"+a+"-"+l)&&this.dlgContainer.classList.remove("e-dlg-"+a+"-"+l)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(),this.isModelResize=this.enableResize&&this.isModal,this.enableResize&&this.dialogOpen&&this.resetResizeIcon();break;case"minHeight":this.minHeight!==""&&(this.element.style.minHeight=Ie(this.minHeight));break}}},e.prototype.setTarget=function(i){this.popupObj.relateTo=i,this.target=i,this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize(),c(this.targetEle)||(this.isModal&&!c(this.dlgContainer)?this.targetEle.appendChild(this.dlgContainer):c(this.element)||this.targetEle.appendChild(this.element))},e.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)c(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",c(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(E([this.element],Li),E([document.body],[Qe,qe]),we(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&I.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.setzIndex=function(i,t){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=jo(i);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=r,t&&(this.popupObj.zIndex=this.zIndex)},e.prototype.windowResizeHandler=function(){na(this.targetEle.clientWidth),sa(this.targetEle.clientHeight),this.setMaxHeight()},e.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},e.prototype.removeAllChildren=function(i){for(;i.children[0];)this.removeAllChildren(i.children[0]),i.removeChild(i.children[0])},e.prototype.destroy=function(){if(!this.isDestroyed){var i=[Fr,Li,Tr,Ut,zi,ns],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];E([this.targetEle],[Qe,qe]),!c(this.element)&&this.element.classList.contains(zi)&&E([document.body],[Qe,qe]),this.isModal&&E([c(this.targetEle)?document.body:this.targetEle],qe),this.unWireEvents(),this.unWireButtonEvents(),this.destroyButtons(),c(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),c(this.dragObj)||this.dragObj.destroy(),!c(this.popupObj.element)&&this.popupObj.element.classList.contains(fa)&&this.popupObj.destroy(),E([this.element],i),!c(this.cssClass)&&this.cssClass!==""&&E([this.element],this.cssClass.split(" ")),!c(this.refElement)&&!c(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),we(this.refElement),this.refElement=void 0),this.isModal&&(we(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),we(this.dlgContainer)),this.element.innerHTML=this.clonedEle.innerHTML;for(var r=0;r<t.length;r++)this.element.removeAttribute(t[r]);this.ftrTemplateContent=null,this.headerContent=null,!this.isReact&&!this.isVue&&!c(this.contentEle)&&this.removeAllChildren(this.contentEle),this.contentEle=null,oa(),s.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},e.prototype.wireWindowResizeEvent=function(){this.boundWindowResizeHandler=this.windowResizeHandler.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)},e.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.boundWindowResizeHandler),this.boundWindowResizeHandler=null},e.prototype.wireEvents=function(){this.showCloseIcon&&I.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&I.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.unWireEvents=function(){this.showCloseIcon&&I.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&I.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler)},e.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(Li)&&this.positionChange()},e.prototype.getDimension=function(){var i=this.element.offsetWidth,t=this.element.offsetHeight;return{width:i,height:t}},e.prototype.show=function(i){var t=this;if(this.element.classList.contains(Ei)){if(!this.element.classList.contains(os)||!c(i)){c(i)||this.fullScreen(i);var r={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",r,function(n){if(!n.cancel){if(t.element.style.maxHeight!==r.maxHeight&&(t.allowMaxHeight=!1,t.element.style.maxHeight=r.maxHeight),t.enableResize&&t.boundWindowResizeHandler==null&&!t.initialRender&&t.wireWindowResizeEvent(),t.storeActiveElement=document.activeElement,t.element.tabIndex=-1,t.isModal&&!c(t.dlgOverlay))if(t.dlgOverlay.style.display="block",t.dlgContainer.style.display="flex",E([t.dlgOverlay],"e-fade"),c(t.targetEle))T([document.body],[Qe,qe]);else{t.targetEle===document.body?t.dlgContainer.style.position="fixed":t.dlgContainer.style.position="absolute",t.dlgOverlay.style.position="absolute";var o=t.getTargetContainer(t.target);if(o instanceof Element){var a=window.getComputedStyle(o);a.getPropertyValue("direction")==="rtl"?t.element.style.position="absolute":t.element.style.position="relative"}else t.element.style.position="relative";T([t.targetEle],[Qe,qe])}var l={name:t.animationSettings.effect==="None"&&Qt==="Enable"?"ZoomIn":t.animationSettings.effect+"In",duration:t.animationSettings.duration,delay:t.animationSettings.delay},h=t.isModal?t.element.parentElement:t.element;if(t.calculatezIndex&&(t.setzIndex(h,!0),$e(t.element,{zIndex:t.zIndex}),t.isModal&&t.setOverlayZindex(t.zIndex)),t.animationSettings.effect==="None"&&Qt==="Enable"?t.popupObj.show(l):t.animationSettings.effect==="None"?t.popupObj.show():t.popupObj.show(l),t.isModal){var o=t.getTargetContainer(t.target);if(o instanceof Element){var a=window.getComputedStyle(o);a.getPropertyValue("direction")==="rtl"&&!t.IsDragStop&&t.setPopupPosition()}}t.dialogOpen=!0;var p=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!0,t.preventVisibility=!0,t.isProtectedOnChange=p}})}this.isReact&&this.renderReactTemplates()}},e.prototype.hide=function(i){var t=this;if(this.element.classList.contains(Ei)&&this.preventVisibility){var r={cancel:!1,isInteracted:!!i,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:i,closedBy:this.dlgClosedBy};this.closeArgs=r,this.trigger("beforeClose",r,function(n){if(!n.cancel){t.enableResize&&t.unWireWindowResizeEvent();var o={name:t.animationSettings.effect==="None"&&Qt==="Enable"?"ZoomOut":t.animationSettings.effect+"Out",duration:t.animationSettings.duration,delay:t.animationSettings.delay};t.animationSettings.effect==="None"&&Qt==="Enable"||(t.animationSettings.effect==="None"?t.popupObj.hide():t.popupObj.hide(o)),setTimeout(function(){t.isModal&&!c(t.targetEle)&&t.targetEle.classList.contains(Qe)&&t.targetEle.classList.contains(qe)&&E([t.targetEle],[Qe,qe]),document.body.classList.contains(Qe)&&document.body.classList.contains(qe)&&E([document.body],[Qe,qe])},t.animationSettings.duration+t.animationSettings.delay),t.dialogOpen=!1;var a=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!1,t.preventVisibility=!1,t.isProtectedOnChange=a}t.dlgClosedBy=Ar})}},e.prototype.fullScreen=function(i){if(this.element.offsetTop,this.element.offsetLeft,i){this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px"),T([this.element],zi);var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=c(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,T([document.body],[Qe,qe]),this.allowDragging&&!c(this.dragObj)&&this.dragObj.destroy()}else E([this.element],zi),E([document.body],[Qe,qe]),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging();return i},e.prototype.getButtons=function(i){return c(i)?this.btnObj:this.btnObj[i]},e.prototype.unWireButtonEvents=function(){if(this.buttons.length>0&&this.footerTemplate===""&&this.ftrTemplateContent)for(var i=0;i<this.buttons.length;i++)this.buttons[i].click&&typeof this.buttons[i].click=="function"&&this.ftrTemplateContent.children[i]&&I.remove(this.ftrTemplateContent.children[i],"click",this.buttons[i].click)},e.prototype.destroyButtons=function(){if(!c(this.btnObj))for(var i=0;i<this.btnObj.length;i++)this.btnObj[i]&&!this.btnObj[i].isDestroyed&&this.btnObj[i].destroy()},V([C("")],e.prototype,"content",void 0),V([C(!0)],e.prototype,"enableHtmlSanitizer",void 0),V([C(!1)],e.prototype,"enablePersistence",void 0),V([C(!1)],e.prototype,"showCloseIcon",void 0),V([C(!1)],e.prototype,"isModal",void 0),V([C("")],e.prototype,"header",void 0),V([C(!0)],e.prototype,"visible",void 0),V([C(!1)],e.prototype,"enableResize",void 0),V([C(["South-East"])],e.prototype,"resizeHandles",void 0),V([C("auto")],e.prototype,"height",void 0),V([C("")],e.prototype,"minHeight",void 0),V([C("100%")],e.prototype,"width",void 0),V([C("")],e.prototype,"cssClass",void 0),V([C(1e3)],e.prototype,"zIndex",void 0),V([C(null)],e.prototype,"target",void 0),V([C("")],e.prototype,"footerTemplate",void 0),V([C(!1)],e.prototype,"allowDragging",void 0),V([Ii([{}],aa)],e.prototype,"buttons",void 0),V([C(!0)],e.prototype,"closeOnEscape",void 0),V([ye({},la)],e.prototype,"animationSettings",void 0),V([ye({X:"center",Y:"center"},Qo)],e.prototype,"position",void 0),V([x()],e.prototype,"created",void 0),V([x()],e.prototype,"open",void 0),V([x()],e.prototype,"beforeSanitizeHtml",void 0),V([x()],e.prototype,"beforeOpen",void 0),V([x()],e.prototype,"close",void 0),V([x()],e.prototype,"beforeClose",void 0),V([x()],e.prototype,"dragStart",void 0),V([x()],e.prototype,"dragStop",void 0),V([x()],e.prototype,"drag",void 0),V([x()],e.prototype,"overlayClick",void 0),V([x()],e.prototype,"resizeStart",void 0),V([x()],e.prototype,"resizing",void 0),V([x()],e.prototype,"resizeStop",void 0),V([x()],e.prototype,"destroyed",void 0),e=V([xn],e),e}(pi),ps;(function(s){function e(p){var d=le("div",{className:ro});document.body.appendChild(d);var u,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return typeof p=="string"?u=t({content:p,position:{X:"center",Y:"top"},isModal:!0,header:as,buttons:f},d):u=t(r(p),d),u.close=function(){p&&p.close&&p.close.apply(u),u.destroy(),u.element.classList.contains("e-dlg-modal")?(u.element.parentElement.remove(),u.target.classList.remove(ls)):u.element.remove()},u}s.alert=e;function i(p){var d=le("div",{className:no});document.body.appendChild(d);var u,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}];return typeof p=="string"?u=t({position:{X:"center",Y:"top"},content:p,isModal:!0,header:as,buttons:f},d):u=t(n(p),d),u.close=function(){p&&p.close&&p.close.apply(u),u.destroy(),u.element.classList.contains("e-dlg-modal")?(u.element.parentElement.remove(),u.target.classList.remove(ls)):u.element.remove()},u}s.confirm=i;function t(p,d){var u=new Dn(p);return u.appendTo(d),u}function r(p){var d={};return d.buttons=[],d=o(d,p),d=a(d,p),d}function n(p){var d={};return d.buttons=[],d=o(d,p),d=l(d,p),d}function o(p,d){return p.header=c(d.title)?null:d.title,p.content=c(d.content)?"":d.content,p.isModal=c(d.isModal)?!0:d.isModal,p.showCloseIcon=c(d.showCloseIcon)?!1:d.showCloseIcon,p.allowDragging=c(d.isDraggable)?!1:d.isDraggable,p.closeOnEscape=c(d.closeOnEscape)?!1:d.closeOnEscape,p.position=c(d.position)?{X:"center",Y:"top"}:d.position,p.animationSettings=c(d.animationSettings)?{effect:"Fade",duration:400,delay:0}:d.animationSettings,p.cssClass=c(d.cssClass)?"":d.cssClass,p.zIndex=c(d.zIndex)?1e3:d.zIndex,p.open=c(d.open)?null:d.open,p.width=c(d.width)?"auto":d.width,p.height=c(d.height)?"auto":d.height,p}function a(p,d){var u=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return c(d.okButton)?p.buttons=u:p.buttons[0]=h(p.buttons[0],d.okButton,u[0]),p}function l(p,d){var u={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return c(d.okButton)?p.buttons[0]=u:p.buttons[0]=h(p.buttons[0],d.okButton,u),c(d.cancelButton)?p.buttons[1]=f:p.buttons[1]=h(p.buttons[1],d.cancelButton,f),p}function h(p,d,u){var f=u;return c(d.text)||(f.buttonModel.content=d.text),c(d.icon)||(f.buttonModel.iconCss=d.icon),c(d.cssClass)||(f.buttonModel.cssClass=d.cssClass),c(d.click)||(f.click=d.click),c(d.isFlat)||(f.isFlat=d.isFlat),f}})(ps||(ps={}));var so=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),J=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},ba=1500,wa=500,cs=0,ds=8,Ia=2,et=2,Er="e-tooltip",us="e-rtl",Ra="e-bigger",fs="e-icons",gs="e-tooltip-close",Dr="e-tooltip-wrap",ms="e-tip-content",jt="e-arrow-tip",vs="e-arrow-tip-outer",Pi="e-arrow-tip-inner",si="e-tip-bottom",Lr="e-tip-top",ys="e-tip-left",zr="e-tip-right",Pr="e-popup",oi="e-popup-open",Br="e-popup-close",Bi="e-lib",xa="e-hidden",Ss="e-tooltip-popup-container",ka=function(s){so(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return J([C({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),J([C({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(oe),Fa=function(s){so(e,s);function e(i,t){var r=s.call(this,i,t)||this;return r.mouseMoveEvent=null,r.mouseMoveTarget=null,r.containerElement=null,r.isBodyContainer=!0,r}return e.prototype.initialize=function(){this.formatPosition(),T([this.element],Er)},e.prototype.formatPosition=function(){var i,t;this.position&&(this.position.indexOf("Top")===0||this.position.indexOf("Bottom")===0?(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=i[0],this.tooltipPositionX=i[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1]))},e.prototype.renderArrow=function(){this.setTipClass(this.position);var i=this.createElement("div",{className:jt+" "+this.tipClass});i.appendChild(this.createElement("div",{className:vs+" "+this.tipClass})),i.appendChild(this.createElement("div",{className:Pi+" "+this.tipClass})),this.tooltipEle.appendChild(i)},e.prototype.setTipClass=function(i){i.indexOf("Right")===0?this.tipClass=ys:i.indexOf("Bottom")===0?this.tipClass=Lr:i.indexOf("Left")===0?this.tipClass=zr:this.tipClass=si},e.prototype.renderPopup=function(i){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(i);this.tooltipEle.classList.remove(Bi),this.popupObj=new Js(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getScalingFactor=function(i){if(!i)return{x:1,y:1};var t={x:1,y:1},r=i.closest('[style*="transform: scale"]');if(r&&r!==this.tooltipEle&&r.contains(this.tooltipEle)){var n=window.getComputedStyle(r),o=n.getPropertyValue("transform"),a=o.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);t.x=a[0],t.y=a[3]}return t},e.prototype.getTooltipPosition=function(i){this.tooltipEle.style.display="block";var t=this.element.closest('[style*="zoom"]');t&&(t.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(t).zoom));var r=Xr(i,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.getScalingFactor(i),o=this.calculateTooltipOffset(this.position,n.x,n.y),a=this.calculateElementPosition(r,o),l=a[0],h=a[1],p=this.collisionFlipFit(i,l,h);return p.left=p.left/n.x,p.top=p.top/n.y,this.tooltipEle.style.display="",p},e.prototype.windowResize=function(){this.reposition(this.findTarget())},e.prototype.reposition=function(i){if(this.popupObj&&i){var t=this.getTooltipPosition(i);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}},e.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.closePopupHandler=function(){this.isReact&&!(this.opensOn==="Click"||typeof this.content=="function")&&this.clearTemplate(["content"]),this.clear();var i={type:this.tooltipEventArgs.event?this.tooltipEventArgs.event.type:null,cancel:!1,target:this.tooltipEventArgs.target,event:this.tooltipEventArgs.event?this.tooltipEventArgs.event:null,element:this.tooltipEle,isInteracted:!c(this.tooltipEventArgs.event)};this.trigger("afterClose",i),i=null},e.prototype.calculateTooltipOffset=function(i,t,r){t===void 0&&(t=1),r===void 0&&(r=1);var n={top:0,left:0},o,a,l,h,p,d,u,f;if(t!==1||r!==1){var g=this.tooltipEle.getBoundingClientRect(),m=void 0;l=Math.round(g.width),h=Math.round(g.height),p=Fe("."+jt,this.tooltipEle),p&&(m=p.getBoundingClientRect()),o=p?Math.round(m.width):0,a=p?Math.round(m.height):0,d=this.showTipPointer?cs:ds,u=a/2+et+(h-this.tooltipEle.clientHeight*r),f=o/2+et+(l-this.tooltipEle.clientWidth*t)}else l=this.tooltipEle.offsetWidth,h=this.tooltipEle.offsetHeight,p=Fe("."+jt,this.tooltipEle),o=p?p.offsetWidth:0,a=p?p.offsetHeight:0,d=this.showTipPointer?cs:ds,u=a/2+et+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=o/2+et+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(d+=Ia),i){case"RightTop":n.left+=o+d,n.top-=h-u;break;case"RightCenter":n.left+=o+d,n.top-=h/2;break;case"RightBottom":n.left+=o+d,n.top-=u;break;case"BottomRight":n.top+=a+d,n.left-=f;break;case"BottomCenter":n.top+=a+d,n.left-=l/2;break;case"BottomLeft":n.top+=a+d,n.left-=l-f;break;case"LeftBottom":n.left-=o+l+d,n.top-=u;break;case"LeftCenter":n.left-=o+l+d,n.top-=h/2;break;case"LeftTop":n.left-=o+l+d,n.top-=h-u;break;case"TopLeft":n.top-=h+a+d,n.left-=l-f;break;case"TopRight":n.top-=h+a+d,n.left-=f;break;default:n.top-=h+a+d,n.left-=l/2;break}return n.left+=this.offsetX,n.top+=this.offsetY,n},e.prototype.updateTipPosition=function(i){var t=Ve("."+jt+",."+vs+",."+Pi,this.tooltipEle),r=[si,Lr,ys,zr];E(t,r),this.setTipClass(i),T(t,this.tipClass)},e.prototype.adjustArrow=function(i,t,r,n){var o=Fe("."+jt,this.tooltipEle);if(!(this.showTipPointer===!1||o===null)){this.updateTipPosition(t);var a,l;this.tooltipEle.style.display="block";var h=this.tooltipEle.clientWidth,p=this.tooltipEle.clientHeight,d=Fe("."+Pi,this.tooltipEle),u=o.offsetWidth,f=o.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===si||this.tipClass===Lr){if(this.tipClass===si?(l="99.9%",d.style.top="-"+(f-2)+"px"):(l=-(f-1)+"px",d.style.top="-"+(f-6)+"px"),i){var g=r!=="Center"||h>i.offsetWidth||this.mouseTrail;g&&r==="Left"||!g&&this.tipPointerPosition==="End"?a=h-u-et+"px":g&&r==="Right"||!g&&this.tipPointerPosition==="Start"?a=et+"px":g&&(this.tipPointerPosition==="End"||this.tipPointerPosition==="Start")?a=this.tipPointerPosition==="End"?i.offsetWidth+(this.tooltipEle.offsetWidth-i.offsetWidth)/2-u/2-et+"px":(this.tooltipEle.offsetWidth-i.offsetWidth)/2-u/2+et+"px":a=h/2-u/2+"px"}}else{this.tipClass===zr?(a="99.9%",d.style.left="-"+(u-2)+"px"):(a=-(u-1)+"px",d.style.left=-u+(u-2)+"px");var g=n!=="Center"||p>i.offsetHeight||this.mouseTrail;g&&n==="Top"||!g&&this.tipPointerPosition==="End"?l=p-f-et+"px":g&&n==="Bottom"||!g&&this.tipPointerPosition==="Start"?l=et+"px":l=p/2-f/2+"px"}o.style.top=l,o.style.left=a}},e.prototype.renderContent=function(i){var t=this,r=Fe("."+ms,this.tooltipEle);if(this.cssClass&&T([this.tooltipEle],this.cssClass.split(" ")),i&&!c(i.getAttribute("title"))&&(i.setAttribute("data-content",i.getAttribute("title")),i.removeAttribute("title")),c(this.content))i&&!c(i.getAttribute("data-content"))&&(r.innerHTML=i.getAttribute("data-content"));else if(r.innerHTML="",this.content instanceof HTMLElement)r.appendChild(this.content);else if(typeof this.content=="string")if(this.isAngular?this.setProperties({content:ei.sanitize(this.content)},!0):this.content=this.enableHtmlSanitizer?ei.sanitize(this.content):this.content,this.enableHtmlParse){var n=it(this.content),o=n({},this,"content",this.element.id+"content",void 0,void 0,r,this.root);o&&ui(o,r)}else r.textContent=this.content;else{var a=it(this.content),o=a({},this,"content",this.element.id+"content",void 0,void 0,r);o&&(this.isAngular&&setTimeout(function(){t.reposition(i)},1),ui(o,r)),this.renderReactTemplates()}},e.prototype.renderCloseIcon=function(){if(!this.isSticky){var i=this.tooltipEle.querySelector("."+fs+"."+gs);i&&q(i);return}var t=this.createElement("div",{className:fs+" "+gs,attrs:{role:"button","aria-label":"Press escape to close the Tooltip"}});this.tooltipEle.appendChild(t),I.add(t,O.touchStartEvent,this.onStickyClose,this)},e.prototype.addDescribedBy=function(i,t){var r=(i.getAttribute("aria-describedby")||"").split(/\s+/);r.indexOf(t)<0&&r.push(t),Le(i,{"aria-describedby":r.join(" ").trim(),"data-tooltip-id":t})},e.prototype.removeDescribedBy=function(i){var t=i.getAttribute("data-tooltip-id"),r=(i.getAttribute("aria-describedby")||"").split(/\s+/),n=r.indexOf(t);n!==-1&&r.splice(n,1),i.removeAttribute("data-tooltip-id");var o=r.join(" ").trim();o?i.setAttribute("aria-describedby",o):i.removeAttribute("aria-describedby")},e.prototype.tapHoldHandler=function(i){clearTimeout(this.autoCloseTimer),this.targetHover(i.originalEvent)},e.prototype.touchEndHandler=function(){var i=this;if(!this.isSticky){var t=function(){i.close()};this.autoCloseTimer=setTimeout(t,ba)}},e.prototype.targetClick=function(i){var t;if(this.target?t=M(i.target,this.target):t=this.element,!c(t)){var r=i;t.getAttribute("data-tooltip-id")===null?r.type==="mousedown"&&r.button===2||this.targetHover(i):this.isSticky||this.hideTooltip(this.animation.close,i,t)}},e.prototype.targetHover=function(i){var t;if(this.target?t=M(i.target,this.target):t=this.element,!(c(t)||t.getAttribute("data-tooltip-id")!==null&&this.closeDelay===0)){!c(this.tooltipEle)&&this.tooltipEle.getAttribute("e-animation-id")&&(Ai.stop(this.tooltipEle),this.clear());for(var r=[].slice.call(Ve('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)),n=0,o=r;n<o.length;n++){var a=o[n];this.restoreElement(a)}this.showTooltip(t,this.animation.open,i)}},e.prototype.mouseMoveBeforeOpen=function(i){this.mouseMoveEvent=i},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&I.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(i,t,r){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=i,I.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:r?r.type:null,cancel:!1,target:i,event:r||null,element:this.tooltipEle,isInteracted:!c(r)};var o=function(a){n.beforeRenderCallback(a,i,r,t)};this.trigger("beforeRender",this.tooltipEventArgs,o.bind(this))},e.prototype.beforeRenderCallback=function(i,t,r,n){i.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,c(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Un(this.element.getAttribute("id")):Un("tooltip"),this.tooltipEle=this.createElement("div",{className:Dr+" "+Pr+" "+Bi,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}),this.tooltipEle.style.width=Ie(this.width),this.tooltipEle.style.height=Ie(this.height),this.tooltipEle.style.position="absolute",this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,r,n,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),Ai.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,r,n,this)))},e.prototype.appendContainer=function(i){typeof this.container=="string"?this.container==="body"?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=Fe(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer=this.containerElement.tagName==="BODY"),this.isBodyContainer||T([this.containerElement],Ss),this.containerElement.appendChild(i.tooltipEle)},e.prototype.tooltipBeforeRender=function(i,t){i&&(O.isDevice&&T([t.tooltipEle],Ra),t.width!=="auto"&&(t.tooltipEle.style.maxWidth=Ie(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:ms})),this.appendContainer(t),E([t.tooltipEle],xa),t.addDescribedBy(i,t.ctrlId+"_content"),t.renderContent(i),T([t.tooltipEle],oi),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(i),t.adjustArrow(i,t.position,t.tooltipPositionX,t.tooltipPositionY),Ai.stop(t.tooltipEle),t.reposition(i))},e.prototype.tooltipAfterRender=function(i,t,r,n){if(i){E([n.tooltipEle],oi),T([n.tooltipEle],Br),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:i,event:t||null,element:n.tooltipEle,isInteracted:!c(t)},n.needTemplateReposition()&&!n.mouseTrail&&(r.effect==="None"||r.effect==="FadeIn"||this.isReact&&typeof n.content!="string")&&(n.tooltipEle.style.display="none");var o=function(a){n.beforeOpenCallback(a,i,r,t)};n.trigger("beforeOpen",n.tooltipEventArgs,o.bind(n))}},e.prototype.beforeOpenCallback=function(i,t,r,n){var o=this;if(i.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{var a={name:r.effect==="None"&&Qt==="Enable"?"FadeIn":this.animation.open.effect,duration:r.duration,delay:r.delay,timingFunction:"easeOut"};if(r.effect==="None"&&(a=void 0),this.openDelay>0){var l=function(){o.mouseTrail&&I.add(t,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(a,t),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))};this.showTimer=setTimeout(l,this.openDelay)}else this.popupObj&&this.popupObj.show(a,t)}n&&this.wireMouseEvents(n,t)},e.prototype.needTemplateReposition=function(){var i=this;return!c(i.viewContainerRef)&&typeof i.viewContainerRef!="string"||this.isReact},e.prototype.checkCollision=function(i,t,r){var n={left:t,top:r,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=Xo(this.tooltipEle,this.checkCollideTarget(),t,r);return o.length>0&&(n.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.calculateElementPosition=function(i,t){return[this.isBodyContainer?i.left+t.left:i.left-this.containerElement.getBoundingClientRect().left+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?i.top+t.top:i.top-this.containerElement.getBoundingClientRect().top+t.top+window.pageYOffset+this.containerElement.scrollTop]},e.prototype.collisionFlipFit=function(i,t,r){var n=this.checkCollision(i,t,r),o=n.position;if(this.tooltipPositionY!==n.vertical&&(o=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(o.indexOf("Left")===0&&(n.vertical=o==="LeftTop"||o==="LeftCenter"?"Top":"Bottom",o=n.vertical+"Left"),o.indexOf("Right")===0&&(n.vertical=o==="RightTop"||o==="RightCenter"?"Top":"Bottom",o=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:i,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)o=this.position;else{var a=n.vertical,l=n.horizontal;if(n.position!==o){var h=Xr(i,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(i,o,l,a);var p=this.getScalingFactor(i),d=this.calculateTooltipOffset(o,p.x,p.y);d.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),d.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),n.position=o;var u=this.calculateElementPosition(h,d);n.left=u[0],n.top=u[1]}else this.adjustArrow(i,o,l,a)}var f={left:n.left,top:n.top},g=this.isBodyContainer?Yo(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f):f;this.tooltipEle.style.display="block";var m=Fe("."+jt,this.tooltipEle);if(this.showTipPointer&&m!=null&&(o.indexOf("Bottom")===0||o.indexOf("Top")===0)){var S=parseInt(m.style.left,10)-(g.left-n.left);S<0?S=0:S+m.offsetWidth>this.tooltipEle.clientWidth&&(S=this.tooltipEle.clientWidth-m.offsetWidth),m.style.left=S.toString()+"px"}return this.tooltipEle.style.display="",f.left=g.left,f.top=g.top,f},e.prototype.getOffSetPosition=function(i,t,r){return i.indexOf(this.position.split(/(?=[A-Z])/)[0])!==-1&&i.indexOf(t.split(/(?=[A-Z])/)[0])!==-1?2*r:0},e.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},e.prototype.hideTooltip=function(i,t,r){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var o=function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(i,t,r)};this.hideTimer=setTimeout(o,this.closeDelay)}else this.tooltipHide(i,t,r)},e.prototype.tooltipHide=function(i,t,r){var n=this,o;t?o=this.target?r||t.target:this.element:o=Fe('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:o,event:t||null,element:this.tooltipEle,isInteracted:!c(t)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?n.isHidden=!1:(n.mouseMoveBeforeRemove(),n.popupHide(i,o,t))})},e.prototype.popupHide=function(i,t,r){t&&r&&this.restoreElement(t),this.isHidden=!0;var n={name:i.effect==="None"&&Qt==="Enable"?"FadeOut":this.animation.close.effect,duration:i.duration,delay:i.delay,timingFunction:"easeIn"};i.effect==="None"&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},e.prototype.restoreElement=function(i){this.unwireMouseEvents(i),c(i.getAttribute("data-content"))||(i.setAttribute("title",i.getAttribute("data-content")),i.removeAttribute("data-content")),this.removeDescribedBy(i)},e.prototype.clear=function(){var i=this.findTarget();i&&this.restoreElement(i),this.tooltipEle&&(E([this.tooltipEle],Br),T([this.tooltipEle],oi)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&q(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},e.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(i){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,i,this.findTarget())},e.prototype.onMouseOut=function(i){var t=i.relatedTarget;if(t&&!this.mouseTrail){var r=M(t,"."+Dr+"."+Bi+"."+Pr);r?I.add(r,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,i,this.findTarget()),this.closeDelay===0&&(this.animation.close.effect==="None"||this.isReact&&typeof this.content!="string")&&this.clear())}else this.hideTooltip(this.animation.close,i,this.findTarget()),this.clear();this.popupObj&&!this.popupObj.element.classList.contains(oi)&&this.clear()},e.prototype.tooltipElementMouseOut=function(i){this.hideTooltip(this.animation.close,i,this.findTarget()),I.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onStickyClose=function(){this.close()},e.prototype.onMouseMove=function(i){var t=0,r=0;if(i.type.indexOf("touch")>-1?(i.preventDefault(),t=i.touches[0].pageX,r=i.touches[0].pageY):(t=i.pageX,r=i.pageY),!c(this.tooltipEle)){Ai.stop(this.tooltipEle),E([this.tooltipEle],Br),T([this.tooltipEle],oi),this.adjustArrow(i.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(i.target),o=this.calculateTooltipOffset(this.position,n.x,n.y),a=t+o.left+this.offsetX,l=r+o.top+this.offsetY,h=this.checkCollision(i.target,a,l);if(this.tooltipPositionX!==h.horizontal||this.tooltipPositionY!==h.vertical){var p=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?h.vertical+h.horizontal:h.horizontal+h.vertical;h.position=p,this.adjustArrow(i.target,h.position,h.horizontal,h.vertical);var d=this.calculateTooltipOffset(h.position,n.x,n.y);h.left=t+d.left-this.offsetX,h.top=r+d.top-this.offsetY}this.tooltipEle.style.left=h.left+"px",this.tooltipEle.style.top=h.top+"px"}},e.prototype.keyDown=function(i){this.tooltipEle&&i.keyCode===27&&this.close()},e.prototype.touchEnd=function(i){this.tooltipEle&&M(i.target,"."+Er)===null&&!this.isSticky&&this.close()},e.prototype.scrollHandler=function(i){this.tooltipEle&&!this.isSticky&&!M(i.target,"."+Dr+"."+Bi+"."+Pr)&&!this.isSticky&&this.close()},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass=si,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(i){for(var t=this.getTriggerList(i),r=0,n=t;r<n.length;r++){var o=n[r];if(o==="Custom")return;o==="Focus"&&this.wireFocusEvents(),o==="Click"&&I.add(this.element,O.touchStartEvent,this.targetClick,this),o==="Hover"&&(O.isDevice?(this.touchModule=new qo(this.element,{tapHoldThreshold:wa,tapHold:this.tapHoldHandler.bind(this)}),I.add(this.element,O.touchEndEvent,this.touchEndHandler,this)):I.add(this.element,"mouseover",this.targetHover,this))}this.windowResizeBound=this.windowResize.bind(this),this.keyDownBound=this.keyDown.bind(this),this.touchEndBound=this.touchEnd.bind(this),this.scrollWheelBound=this.scrollHandler.bind(this),document.addEventListener("wheel",this.scrollWheelBound),document.addEventListener("scroll",this.scrollWheelBound),document.addEventListener("touchend",this.touchEndBound),document.addEventListener("keydown",this.keyDownBound),window.addEventListener("resize",this.windowResizeBound)},e.prototype.getTriggerList=function(i){return i?(i==="Auto"&&(i=O.isDevice?"Hover":"Hover Focus"),i.split(" ")):[]},e.prototype.wireFocusEvents=function(){if(c(this.target))I.add(this.element,"focusin",this.targetHover,this);else{var i=[].slice.call(Ve(this.target,this.element));if(this.targetsList=i,!c(this.targetsList)&&this.targetsList.length>0)for(var t=0,r=i;t<r.length;t++){var n=r[t];I.add(n,"focus",this.targetHover,this)}else I.add(this.element,"focusin",this.targetHover,this)}},e.prototype.wireMouseEvents=function(i,t){this.tooltipEle&&(this.isSticky||(i.type==="focus"&&I.add(t,"blur",this.onMouseOut,this),i.type==="focusin"&&I.add(t,"focusout",this.onMouseOut,this),i.type==="mouseover"&&I.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(I.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),I.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&this.openDelay===0&&I.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(i){for(var t=this.getTriggerList(i),r=0,n=t;r<n.length;r++){var o=n[r];if(o==="Custom")return;o==="Focus"&&this.unwireFocusEvents(),o==="Click"&&I.remove(this.element,O.touchStartEvent,this.targetClick),o==="Hover"&&(O.isDevice?(this.touchModule&&this.touchModule.destroy(),I.remove(this.element,O.touchEndEvent,this.touchEndHandler)):I.remove(this.element,"mouseover",this.targetHover))}document.removeEventListener("touchend",this.touchEndBound),this.touchEndBound=null,document.removeEventListener("wheel",this.scrollWheelBound),document.removeEventListener("scroll",this.scrollWheelBound),this.scrollWheelBound=null,window.removeEventListener("resize",this.windowResizeBound),this.windowResizeBound=null,document.removeEventListener("keydown",this.keyDownBound),this.keyDownBound=null},e.prototype.unwireFocusEvents=function(){if(c(this.target))I.remove(this.element,"focusin",this.targetHover);else{var i=[].slice.call(Ve(this.target,this.element));if(!c(this.targetsList)&&this.targetsList.length>0)for(var t=0,r=i;t<r.length;t++){var n=r[t];I.remove(n,"focus",this.targetHover)}else I.remove(this.element,"focusin",this.targetHover)}},e.prototype.unwireMouseEvents=function(i){if(!this.isSticky){for(var t=this.getTriggerList(this.opensOn),r=0,n=t;r<n.length;r++){var o=n[r];o==="Focus"&&(I.remove(i,"blur",this.onMouseOut),I.remove(i,"focusout",this.onMouseOut)),o==="Hover"&&!O.isDevice&&I.remove(i,"mouseleave",this.onMouseOut)}this.closeDelay&&(I.remove(i,"mouseenter",this.tooltipHover),I.remove(i,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&I.remove(i,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){var i=Fe('[data-tooltip-id= "'+this.ctrlId+'_content"]',document);return i},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(i,t){for(var r=this.findTarget(),n=0,o=Object.keys(i);n<o.length;n++){var a=o[n];switch(a){case"width":this.tooltipEle&&r&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=Ie(i.width),this.reposition(r));break;case"height":this.tooltipEle&&r&&(this.tooltipEle.style.height=Ie(i.height),this.reposition(r));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(i.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&r){var l=Fe("."+Pi,this.tooltipEle);l&&(l.style.top=l.style.left=null),this.reposition(r)}break;case"tipPointerPosition":this.tooltipEle&&r&&this.reposition(r);break;case"offsetX":if(this.tooltipEle){var h=i.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var p=i.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+p).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&E([this.tooltipEle],t.cssClass.split(" ")),i.cssClass&&T([this.tooltipEle],i.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?T([this.tooltipEle],us):E([this.tooltipEle],us));break;case"isSticky":this.tooltipEle&&r&&(this.renderCloseIcon(),this.reposition(r));break;case"container":c(this.containerElement)||E([this.containerElement],Ss),this.container=i.container,this.tooltipEle&&r&&(this.appendContainer(this),this.reposition(r))}}},e.prototype.open=function(i,t){c(t)&&(t=this.animation.open),c(i)&&(i=this.element),i.style.display!=="none"&&this.showTooltip(i,t)},e.prototype.close=function(i){i||(i=this.animation.close),this.hideTooltip(i)},e.prototype.refresh=function(i){if(this.tooltipEle&&this.renderContent(i),this.popupObj&&i&&this.reposition(i),!c(this.targetsList)&&!c(this.target)){var t=Ve(this.target,this.element);t.length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},e.prototype.destroy=function(){s.prototype.destroy.call(this),this.tooltipEle&&q(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Jo(),E([this.element],Er),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var i=Ve('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element),t=0,r=i;t<r.length;t++){var n=r[t];this.restoreElement(n)}this.containerElement=null,this.tipClass=null,this.tooltipPositionX=null,this.tooltipPositionY=null,this.ctrlId=null,this.tooltipEventArgs=null,this.touchModule=null,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.targetsList=null},J([C("auto")],e.prototype,"width",void 0),J([C("auto")],e.prototype,"height",void 0),J([C()],e.prototype,"content",void 0),J([C("body")],e.prototype,"container",void 0),J([C()],e.prototype,"target",void 0),J([C("TopCenter")],e.prototype,"position",void 0),J([C(0)],e.prototype,"offsetX",void 0),J([C(0)],e.prototype,"offsetY",void 0),J([C(!0)],e.prototype,"showTipPointer",void 0),J([C(!0)],e.prototype,"enableHtmlParse",void 0),J([C(!1)],e.prototype,"windowCollision",void 0),J([C("Auto")],e.prototype,"tipPointerPosition",void 0),J([C("Auto")],e.prototype,"opensOn",void 0),J([C(!1)],e.prototype,"mouseTrail",void 0),J([C(!1)],e.prototype,"isSticky",void 0),J([ye({},ka)],e.prototype,"animation",void 0),J([C(0)],e.prototype,"openDelay",void 0),J([C(0)],e.prototype,"closeDelay",void 0),J([C()],e.prototype,"cssClass",void 0),J([C(!0)],e.prototype,"enableHtmlSanitizer",void 0),J([C("")],e.prototype,"htmlAttributes",void 0),J([x()],e.prototype,"beforeRender",void 0),J([x()],e.prototype,"beforeOpen",void 0),J([x()],e.prototype,"afterOpen",void 0),J([x()],e.prototype,"beforeClose",void 0),J([x()],e.prototype,"afterClose",void 0),J([x()],e.prototype,"beforeCollision",void 0),J([x()],e.prototype,"created",void 0),J([x()],e.prototype,"destroyed",void 0),e=J([xn],e),e}(pi),xi=function(){function s(e){this.intl=new kn,c(e)||(this.intl.culture=e)}return s.prototype.getFormatFunction=function(e){return!c(e)&&(e.type==="dateTime"||e.type==="datetime"||e.type==="date"||e.type==="time")?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},s.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},s.prototype.fromView=function(e,i,t){return(t==="date"||t==="datetime"||t==="number")&&!c(i)&&!c(e)?i(e):e},s.prototype.toView=function(e,i){var t=e;return!c(i)&&!c(e)&&(t=i(e)),t},s.prototype.setCulture=function(e){c(e)||No(e)},s}(),oo=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Ki=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},de=function(){function s(e,i){var t=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return t.editTemplateFn},this.getFilterTemplate=function(){return t.filterTemplateFn},this.templateOptions={enableAriaLabel:!0},fi(this,e),this.parent=i,this.type==="none"?this.type=null:this.type&&(this.type=typeof this.type=="string"?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),c(this.uid)&&(this.uid=It("grid-column"));var r=new xi;if(e.format&&(e.format.skeleton||e.format.format&&typeof e.format.format=="string")&&(this.setFormatter(r.getFormatFunction(W({},e.format))),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var o={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(t),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)]==="columns"){o[l[parseInt(h.toString(),10)]]=[];for(var p=0;p<t[l[parseInt(h.toString(),10)]].length;p++)o[l[parseInt(h.toString(),10)]].push(t[l[parseInt(h.toString(),10)]][parseInt(p.toString(),10)].toJSON())}else a.indexOf(l[parseInt(h.toString(),10)])<0&&(o[l[parseInt(h.toString(),10)]]=t[l[parseInt(h.toString(),10)]]);return o},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(o){return o.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=te(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=te(this.headerTemplate)),!c(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=te(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=te(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=te(this.filterTemplate)),this.isForeignColumn()&&(c(this.editType)||this.editType==="dropdownedit"||this.editType==="defaultedit")&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=W({dataSource:this.dataSource,query:new he,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(o,a,l,h){if(typeof n=="string"&&(n=yt(n,window)),t.sortDirection==="Descending"){var p=o;o=a,a=p;var d=l;l=h,h=d}return n(o,a,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(o,a){return o=yt(t.foreignKeyValue,qt(t,{},o)[0]),a=yt(t.foreignKeyValue,qt(t,{},a)[0]),t.sortDirection==="Descending"?fe.fnDescending(o,a):fe.fnAscending(o,a)})}return s.prototype.getSortDirection=function(){return this.sortDirection},s.prototype.setSortDirection=function(e){this.sortDirection=e},s.prototype.getFreezeTableName=function(){return this.freezeTable},s.prototype.setProperties=function(e){for(var i=Object.keys(e),t=function(o){if(i[parseInt(o.toString(),10)]==="columns")for(var a=e[i[parseInt(o.toString(),10)]],l=function(p){r.columns.find(function(d){return d.field===a[parseInt(p.toString(),10)].field}).setProperties(a[parseInt(p.toString(),10)])},h=0;h<a.length;h++)l(h);else r[i[parseInt(o.toString(),10)]]=e[i[parseInt(o.toString(),10)]];r.parent&&r.parent.isReact&&(i[parseInt(o.toString(),10)]==="template"?(r.templateFn=te(e[i[parseInt(o.toString(),10)]]),r.parent.refreshReactColumnTemplateByUid(r.uid,!0)):i[parseInt(o.toString(),10)]==="headerTemplate"?(r.headerTemplateFn=te(e[i[parseInt(o.toString(),10)]]),r.parent.refreshReactHeaderTemplateByUid(r.uid)):i[parseInt(o.toString(),10)]==="editTemplate"?r.editTemplateFn=te(e[i[parseInt(o.toString(),10)]]):i[parseInt(o.toString(),10)]==="filterTemplate"?r.filterTemplateFn=te(e[i[parseInt(o.toString(),10)]]):i[parseInt(o.toString(),10)]==="commandsTemplate"&&(r.templateFn=te(e[i[parseInt(o.toString(),10)]])))},r=this,n=0;n<i.length;n++)t(n)},s.prototype.isForeignColumn=function(){return!!(this.dataSource&&this.foreignKeyValue)},s.prototype.getFormatter=function(){return this.formatFn},s.prototype.setFormatter=function(e){this.formatFn=e},s.prototype.getParser=function(){return this.parserFn},s.prototype.setParser=function(e){this.parserFn=e},s.prototype.getColumnTemplate=function(){return this.templateFn},s.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},s.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},s.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},s}();(function(){function s(){}return Ki([C()],s.prototype,"title",void 0),Ki([C()],s.prototype,"type",void 0),Ki([C()],s.prototype,"buttonOption",void 0),s})();var Ma=function(s){oo(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return Ki([C(null)],e.prototype,"columns",void 0),e}(de);(function(s){oo(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e})(Ma);var Zr="load",rr="rowDataBound",$r="queryCellInfo",en="headerCellInfo",st="actionBegin",Me="actionComplete",Ta="actionFailure",xt="dataBound",Hr="rowSelecting",Or="rowSelected",qr="rowDeselecting",Nr="rowDeselected",ai="cellSelecting",Hi="cellSelected",Cs="cellDeselecting",bs="cellDeselected",Vr="columnSelecting",Gr="columnSelected",Aa="columnDeselecting",Ea="columnDeselected",Da="columnDragStart",La="columnDrag",za="columnDrop",ws="beforePrint",Is="printComplete",Pa="detailDataBound",Ba="batchAdd",ao="batchCancel",Ha="batchDelete",Oa="recordDoubleClick",qa="recordClick",Na="beforeDataBound",Rs="beforeOpenAdaptiveDialog",xs="resizeStop",Va="checkBoxChange",Ga="beforeCopy",_a="beforePaste",Wa="beforeAutoFill",_r="filterchoicerequest",Ka="filterAfterOpen",Ua="filterBeforeOpen",ja="filterSearchBegin",lo="initial-load",Ln="initial-end",Si="data-ready",pe="content-ready",ue="ui-update",ot="on-empty",Ne="inbound-model-changed",nr="model-changed",ho="colgroup-refresh",mt="header-refreshed",ks="searching-complete",Qa="grouping-complete",Fs="group-aggregates",tn="refresh-footer-rendered",Xa="refresh-aggregate-cell",Ya="rowselected",Ja="cellselected",rn="destroy-autofill-elements",nn="beforecellfocused",sn="cellfocused",Yt="key-pressed",ii="click",St="destroy",zn="column-visible-changed",Ms="scroll",po="column-width-changed",co="column-position-changed",Ts="rows-added",on="rows-removed",Za="column-drag-stop",$a="header-drop",an="datasource-modified",el="refresh-complete",tl="dblclick",il="toolbar-refresh",rl="bulk-save",Ci="auto-col",ln="tooltip-destroy",hn="update-data",nl="prevent-batch",sl="crud-Action",As="add-delete-Action",ol="double-tap",Ui="freezerender",al="filterDialogCreated",ll="filter-menu-close",hl="initForeignKeyColumn",Es="getForeignKeyData",ji="generateQuery",uo="showEmptyGrid",fo="foreignKeyData",pn="dataStateChange",Ds="dataSourceChanged",pl="rtl-updated",go="beforeFragAppend",Ls="textWrapRefresh",zs="recordAdded",cn="cancel-Begin",cl="editNextValCell",Ps="hierarchyprint",dl="expandchildgrid",ul="printGrid-Init",fl="row-position-changed",mo="partial-refresh",gl="select-virtual-Row",dn="columns-prepared",ml="cbox-filter-begin",Bs="cbox-filter-complete",Hs="filter-Prevent",vl="filter-cbox-value",yl="restore-Focus",vo="detail-indentcell-info",Sl="virtaul-cell-focus",Cl="virtual-scroll-edit",bl="edit-reset",wl="get-virtual-data",Il="refresh-infinite-mode-blocks",Rl="reset-infinite-blocks",xl="infinite-scroll-handler",kl="infinite-page-query",Fl="infinite-show-hide",Ml="append-infinite-content",Tl="remove-infinite-rows",Al="set-infinite-cache",Os="infinite-edit-handler",El="close-filter-dialog",Dl="reset-columns",Ll="group-cache",zl="lazy-load-scroll-handler",qs="group-collapse",Pl="beforeCheckboxRenderer",Wr="refreshResizeHandlers",Bl="set-freeze-selection",un="before-refresh-on-data-change",Hl="immutable-batch-cancel",Ol="check-scroll-reset",ql="prevent-frozen-scroll-refresh",Nl="refresh-infinite-current-view-data",yo="filter-dialog-close",fn="refresh-cutsom-filter-ok-button",Vl="refresh-cutsom-filter-clear-button",Gl="render-responsive-cmenu",_l="filter-cmenu-select",Wl="custom-filter-close",Kl="set-fullscreen-dialog",So="refresh-Expand-and-Collapse",Ul="row-mode-change",Qi="enter-key-handler",jl="set-virtual-page-query",Ql="close-edit",Xl="reset-virtual-focus",Yl="before-checkbox-renderer-query",Jl="destroy-child-grid",Zl="sticky-scroll-complete",Ns="refresh-infinite-persist-selection",$l="after-filter-column-menu-close",eh="beforeCheckboxfilterRenderer",th="commandColumnDestroy",ih="cancelcnfrmDlg",sr="refresh-Frozen-Position",rh="refresh-Resize-Position",gn="refresh-Split-Frozen-Column",Oi="render-Responsive-Change-Action",Kr="render-Responsive-Column-Chooser-Div",Jt="show-Add-New-Row-Focus",nh="last-rowcell-border-updated",Co="destroy-edit-form",sh="detach-detail-template",A;(function(s){s[s.Data=0]="Data",s[s.Header=1]="Header",s[s.Summary=2]="Summary",s[s.GroupSummary=3]="GroupSummary",s[s.CaptionSummary=4]="CaptionSummary",s[s.Filter=5]="Filter",s[s.Indent=6]="Indent",s[s.GroupCaption=7]="GroupCaption",s[s.GroupCaptionEmpty=8]="GroupCaptionEmpty",s[s.Expand=9]="Expand",s[s.HeaderIndent=10]="HeaderIndent",s[s.StackedHeader=11]="StackedHeader",s[s.DetailHeader=12]="DetailHeader",s[s.DetailExpand=13]="DetailExpand",s[s.CommandColumn=14]="CommandColumn",s[s.DetailFooterIntent=15]="DetailFooterIntent",s[s.RowDragIcon=16]="RowDragIcon",s[s.RowDragHIcon=17]="RowDragHIcon"})(A||(A={}));var ze;(function(s){s[s.Header=0]="Header",s[s.Content=1]="Content",s[s.Summary=2]="Summary"})(ze||(ze={}));var Vs;(function(s){s[s.Add=0]="Add",s[s.Edit=1]="Edit",s[s.Update=2]="Update",s[s.Delete=3]="Delete",s[s.Cancel=4]="Cancel",s[s.Print=5]="Print",s[s.Search=6]="Search",s[s.ColumnChooser=7]="ColumnChooser",s[s.PdfExport=8]="PdfExport",s[s.ExcelExport=9]="ExcelExport",s[s.CsvExport=10]="CsvExport",s[s.WordExport=11]="WordExport"})(Vs||(Vs={}));var P;(function(s){s[s.isEdit=0]="isEdit",s[s.isAdd=1]="isAdd",s[s.isSort=2]="isSort",s[s.isFilter=3]="isFilter",s[s.isColMenu=4]="isColMenu",s[s.isColumnChooser=5]="isColumnChooser"})(P||(P={}));var Gs;(function(s){s[s.isInitial=0]="isInitial",s[s.isSearch=1]="isSearch"})(Gs||(Gs={}));var oh=function(){function s(e,i){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=i,this.initDataManager(),!(this.parent.isDestroyed||this.getModuleName()==="foreignKey")&&(this.parent.on(Ts,this.addRows,this),this.parent.on(fl,this.reorderRows,this),this.parent.on(on,this.removeRows,this),this.parent.on(an,this.initDataManager,this),this.parent.on(St,this.destroy,this),this.parent.on(hn,this.crudActions,this),this.parent.on(As,this.getData,this),this.parent.on(Ci,this.refreshFilteredCols,this),this.parent.on(dn,this.refreshFilteredCols,this))}return s.prototype.reorderRows=function(e){this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords().splice(e.toIndex,0,this.parent.getCurrentViewRecords().splice(e.fromIndex,1)[0]):this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},s.prototype.getModuleName=function(){return"data"},s.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof _?e.dataSource:c(e.dataSource)?new _:new _(e.dataSource),e.isAngular&&!(e.query instanceof he)?e.setProperties({query:new he},!0):(this.isQueryInvokedFromData=!0,e.query instanceof he||(e.query=new he))},s.prototype.generateQuery=function(e,i){var t=this.parent,r=c(t.getQuery())?new he:t.getQuery().clone();if(this.parent.columnQueryMode==="ExcludeHidden")r.select(this.parent.getColumns().filter(function(l){return!(l.isPrimaryKey!==!0&&l.visible===!1||l.field===void 0)}).map(function(l){return l.field}));else if(this.parent.columnQueryMode==="Schema"){for(var n=[],o=this.parent.columns,a=0;a<o.length;a++)n.push(o[parseInt(a.toString(),10)].field);r.select(n)}return this.filterQuery(r),this.searchQuery(r),this.aggregateQuery(r),this.sortQuery(r),nt(this.parent)?this.virtualGroupPageQuery(r):this.pageQuery(r,e),(c(i)||!i)&&this.groupQuery(r),r},s.prototype.aggregateQuery=function(e){for(var i=this.parent.aggregates,t=0;t<i.length;t++)for(var r=i[parseInt(t.toString(),10)],n=0;n<r.columns.length;n++)for(var o=r.columns[parseInt(n.toString(),10)],a=o.type instanceof Array?o.type:[o.type],l=0;l<a.length;l++)e.aggregate(a[parseInt(l.toString(),10)].toLowerCase(),o.field);return e},s.prototype.virtualGroupPageQuery=function(e){var i="fn";if(e.queries.length)for(var t=0;t<e.queries.length;t++)e.queries[parseInt(t.toString(),10)][""+i]==="onPage"&&e.queries.splice(t,1);return e},s.prototype.pageQuery=function(e,i){var t=this.parent,r="fn",n={query:e,skipPage:!1};if(t.notify(jl,n),n.skipPage)return e;if((t.allowPaging||t.enableVirtualization||t.enableInfiniteScrolling)&&i!==!0){if(t.pageSettings.currentPage=Math.max(1,t.pageSettings.currentPage),t.pageSettings.pageCount<=0&&(t.pageSettings.pageCount=8),t.pageSettings.pageSize<=0&&(t.pageSettings.pageSize=12),e.queries.length)for(var o=0;o<e.queries.length;o++)e.queries[parseInt(o.toString(),10)][""+r]==="onPage"&&e.queries.splice(o,1);!c(t.infiniteScrollModule)&&t.enableInfiniteScrolling?this.parent.notify(kl,e):e.page(t.pageSettings.currentPage,t.allowPaging&&t.pagerModule&&t.pagerModule.pagerObj.isAllPage&&!t.isManualRefresh&&!this.dataManager.dataSource.offline&&!(this.dataManager.adaptor instanceof Zo)?null:t.pageSettings.pageSize)}return e},s.prototype.groupQuery=function(e){var i=this.parent;if(i.allowGrouping&&i.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var t=i.groupSettings.columns,r=0,n=t.length;r<n;r++){var o=this.getColumnByField(t[parseInt(r.toString(),10)]);o||this.parent.log("initial_action",{moduleName:"group",columnName:t[parseInt(r.toString(),10)]});var a=o.enableGroupByFormat,l=o.format;a?e.group(t[parseInt(r.toString(),10)],this.formatGroupColumn.bind(this),l):e.group(t[parseInt(r.toString(),10)],null)}}return e},s.prototype.sortQuery=function(e){var i=this.parent;if((i.allowSorting||i.allowGrouping)&&i.sortSettings.columns.length){for(var t=i.sortSettings.columns,r=[],n=t.length-1;n>-1;n--){var o=this.getColumnByField(t[parseInt(n.toString(),10)].field);if(o)o.setSortDirection(t[parseInt(n.toString(),10)].direction);else return this.parent.log("initial_action",{moduleName:"sort",columnName:t[parseInt(n.toString(),10)].field}),e;var a=t[parseInt(n.toString(),10)].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?t[parseInt(n.toString(),10)].direction:o.sortComparer.bind(o)),i.groupSettings.columns.indexOf(t[parseInt(n.toString(),10)].field)===-1?o.isForeignColumn()||o.sortComparer?e.sortByForeignKey(o.field,a,void 0,t[parseInt(n.toString(),10)].direction.toLowerCase()):e.sortBy(o.field,a):r.push({direction:a,field:o.field})}for(var n=0,l=r.length;n<l;n++)if(typeof r[parseInt(n.toString(),10)].direction=="string")e.sortBy(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction);else{var o=this.getColumnByField(r[parseInt(n.toString(),10)].field);e.sortByForeignKey(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction,void 0,o.getSortDirection().toLowerCase())}}return e},s.prototype.searchQuery=function(e,i,t){var r=this.parent.searchSettings,n=!c(r.fields)&&r.fields.length?r.fields:this.getSearchColumnFieldNames(),o=[],a=!1;if(!c(this.parent.searchSettings.key)&&this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(u){return n.indexOf(u.field)>-1});var l=t?i.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&l.getModuleName()==="ODataV4Adaptor"){n=t?[i.foreignKeyValue]:n;for(var h=0;h<n.length;h++){var p=t?i:this.getColumnByField(n[parseInt(h.toString(),10)]);p.isForeignColumn()&&!t?o=this.fGeneratePredicate(p,o):o.push(new se(n[parseInt(h.toString(),10)],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var d=se.or(o);d.key=r.key,e.where(d)}else e.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return e},s.prototype.filterQuery=function(e,i,t){var r=this.parent,n=[],o=this.parent.getForeignKeyColumns(),a;if(r.allowFiltering&&r.filterSettings.columns.length){for(var l=i||r.filterSettings.columns,h={},p=0,d=r.getColumns();p<d.length;p++){var u=d[p];h[u.field]=u.filter.type?u.filter.type:r.filterSettings.type}for(var f=[],g=[],m=0,S=l;m<S.length;m++){var u=S[m],y=u.isForeignKey?r.getColumnByUid(u.uid):r.getColumnByField(u.field);c(u.type)&&y&&(y.type==="date"||y.type==="datetime"||y.type==="dateonly")&&(u.type=u.isForeignKey?r.getColumnByUid(u.uid).type:r.getColumnByField(u.field).type),u.isForeignKey?f.push(u):g.push(u)}if(g.length){for(var R=0,w=g.length;R<w;R++)g[parseInt(R.toString(),10)].uid=g[parseInt(R.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(g[parseInt(R.toString(),10)].field,g[parseInt(R.toString(),10)].isForeignKey).uid;for(var F=Qs.getPredicate(g),L=0,k=Object.keys(F);L<k.length;L++){var z=k[L];n.push(F[""+z])}}if(f.length)for(var H=0,B=f;H<B.length;H++){var u=B[H];u.uid=u.uid||this.parent.grabColumnByFieldFromAllCols(u.field,u.isForeignKey).uid;var Q=this.parent.grabColumnByUidFromAllCols(u.uid);if(Q||this.parent.log("initial_action",{moduleName:"filter",columnName:u.field}),Q.isForeignColumn()&&Bn(u.field,o)&&!t)Q.columnData.length||(a=!0),n=this.fGeneratePredicate(Q,n);else for(var F=Qs.getPredicate(l),D=0,K=Object.keys(F);D<K.length;D++){var z=K[D];n.push(F[""+z])}}n.length&&!a?e.where(se.and(n)):this.parent.notify(uo,{})}return e},s.prototype.fGeneratePredicate=function(e,i){var t={};return e&&(this.parent.notify(ji,{predicate:t,column:e}),t.predicate.predicates.length&&i.push(t.predicate)),i},s.prototype.getData=function(e,i){var t=this;e===void 0&&(e={requestType:""});var r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource){var n=this.eventPromise(e,i,r);return n.promise}else{var o=void 0;switch(e.requestType){case"delete":i=i||this.generateQuery();var a=Object.keys(e.data).length;if(a===1)o=this.dataManager.remove(r,e.data[0],i.fromTable,i);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=e.data,o=this.dataManager.saveChanges(l,r,i.fromTable,i.requiresCount())}break;case"save":i=i||this.generateQuery(),e.index=c(e.index)?0:e.index,o=this.dataManager.insert(e.data,i.fromTable,i,e.index);break}var h="promise";return e[""+h]=o,o&&!Array.isArray(o)&&!o.hasOwnProperty("deletedRecords")?o.then(function(){return t.insert(i,e)}):this.insert(i,e)}},s.prototype.insert=function(e,i){return i.requestType==="save"&&(i.query=e,this.parent.notify(zs,i)),this.executeQuery(e)},s.prototype.executeQuery=function(e){var i=this;if(this.dataManager.ready){var t=new rt,r=this.dataManager.ready;return r.then(function(){i.dataManager.executeQuery(e).then(function(n){t.resolve(n)})}).catch(function(n){t.reject(n)}),t.promise}else return this.dataManager.executeQuery(e)},s.prototype.formatGroupColumn=function(e,i){var t=this.serviceLocator,r=this.getColumnByField(i),n=e;r.type||(r.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),c(r.getFormatter())&&Cn(t,r);var o=xi.prototype.toView(e,r.getFormatter());return o},s.prototype.crudActions=function(e){var i=this.generateQuery(),t=null,r="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,i,n),e.requestType){case"save":t=this.dataManager.update(n,e.data,i.fromTable,i,e.previousData);break}e[""+r]=t||e[""+r],this.parent.notify(sl,e)},s.prototype.saveChanges=function(e,i,t,r){if(r===void 0&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var n=new rt,o={requestType:"batchsave",changes:e,key:i,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger(Ds,o),n.promise}else{var a=this.dataManager.saveChanges(e,i,r.fromTable,r,t);return a}},s.prototype.getKey=function(e){if(e&&e.length)return e[0]},s.prototype.isRemote=function(){return this.dataManager.dataSource.offline!==!0&&this.dataManager.dataSource.url!==void 0&&this.dataManager.dataSource.url!==""},s.prototype.addRows=function(e){for(var i=e.records.length;i>0;i--)this.parent.dataSource instanceof _&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[i-1]):!this.parent.getDataModule().isRemote()&&!c(this.parent.dataSource)&&!this.parent.dataSource.result&&this.parent.dataSource.splice(e.toIndex,0,e.records[i-1])},s.prototype.removeRows=function(e){var i=this.dataManager.dataSource.json;this.parent.dataSource instanceof _&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=i.filter(function(t){return e.records.indexOf(t)===-1}):!this.parent.getDataModule().isRemote()&&!c(this.parent.dataSource)&&!this.parent.dataSource.result&&(this.parent.dataSource=i.filter(function(t){return e.records.indexOf(t)===-1}))},s.prototype.getColumnByField=function(e){var i;return this.parent.columnModel.some(function(t){return i=t,t.field===e})&&i},s.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Ts,this.addRows),this.parent.off(on,this.removeRows),this.parent.off(an,this.initDataManager),this.parent.off(St,this.destroy),this.parent.off(hn,this.crudActions),this.parent.off(As,this.getData),this.parent.off(Ci,this.refreshFilteredCols),this.parent.off(dn,this.refreshFilteredCols))},s.prototype.getState=function(){return this.dataState},s.prototype.setState=function(e){return this.dataState=e},s.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},s.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},s.prototype.getStateEventArgument=function(e){var i=new gi,t=new _({url:"",adaptor:new gi}),r=i.processQuery(t,e),n=JSON.parse(r.data);return W(n,r.pvtData)},s.prototype.eventPromise=function(e,i,t){var r=this,n=e,o=this.getStateEventArgument(i),a=new rt,l=new rt;if((e.requestType!==void 0||this.parent.groupSettings.disablePageWiseAggregates&&i.queries.some(function(d){return d.fn==="onGroup"}))&&this.dataState.isDataChanged!==!1)if(o.action=e,e.requestType==="save"||e.requestType==="delete"||e.requestType==="batchsave"){var h=e;h.key=t;var p="promise";h[""+p]=l.promise,h.state=o,this.setState({isPending:!0,resolver:l.resolve}),n.endEdit=l.resolve,n.cancelEdit=l.reject,this.parent.trigger(Ds,h),l.promise.then(function(){r.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),h.requestType==="save"&&r.parent.notify(zs,h),r.parent.trigger(pn,o)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),this.parent.trigger(pn,o);else this.setState({}),a.resolve(this.parent.dataSource);return a},s.prototype.getSearchColumnFieldNames=function(){for(var e=[],i=this.parent.getColumns(),t=0,r=i;t<r.length;t++){var n=r[t];n.allowSearching&&!c(n.field)&&e.push(n.field)}return e},s.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&Ap(this.parent,this.parent.filterSettings.columns)},s}(),ri=function(){function s(e,i){fi(this,e),this.parent=i}return s.prototype.clone=function(){var e=new s({});return fi(e,this),e.cells=this.cells.map(function(i){return i.clone()}),e},s.prototype.setRowValue=function(e){if(this.parent){var i=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(i,e)}},s.prototype.setCellValue=function(e,i){if(this.parent){var t=this.data[""+e].toString()!==i.toString();if(t){var r=this.parent.getPrimaryKeyFieldNames()[0],n=this.data[""+r];this.parent.setCellValue(n,e,i),this.makechanges(r,this.data)}else return}},s.prototype.makechanges=function(e,i){if(this.parent){var t=this.parent,r=t.getDataModule().dataManager;r.update(e,i)}},s}(),bi=function(){function s(e){this.isSpanned=!1,this.isRowSpanned=!1,fi(this,e)}return s.prototype.clone=function(){var e=new s({});return fi(e,this),e},s}(),mn=function(){function s(e,i){this.serviceLocator=e,this.parent=i}return s.prototype.render=function(e,i,t,r){var n=this.serviceLocator.getService("cellRendererFactory"),o=n.getCellRenderer(i.cells[parseInt(t.toString(),10)].cellType||A.Data),a=i.cells[parseInt(t.toString(),10)].cellSpan?i.cells[parseInt(t.toString(),10)].cellSpan:e.colSpan?e.colSpan+t<=i.cells.length?e.colSpan:i.cells.length-t:1,l=e.rowSpan,h=0,p;if(i.index>0){var d=this.parent.getRowsObject(),u=this.parent.groupSettings.columns.length>0&&!d[i.index-1].isDataRow?d[i.index].cells:d[i.index-1].cells,f=i.cells[parseInt(t.toString(),10)],g="uid";p=u.filter(function(y){return y.column.uid===f.column[""+g]})[0]}for(var m=p&&p.colSpanRange>1&&p.rowSpanRange>1?p.colSpanRange:a,S=t+1;S<t+m&&S<i.cells.length;S++)i.cells[parseInt(S.toString(),10)].visible===!1?h++:i.cells[parseInt(S.toString(),10)].isSpanned=!0;if(h>0){for(var S=t+a;S<t+a+h&&S<i.cells.length;S++)i.cells[parseInt(S.toString(),10)].isSpanned=!0;t+a+h>=i.cells.length&&(a-=t+a+h-i.cells.length)}return i.cells[parseInt(t.toString(),10)].cellSpan&&(i.data[e.column.field]=i.cells[parseInt(t.toString(),10)].spanText,r=o.render(i.cells[parseInt(t.toString(),10)],i.data,{index:c(i.index)?"":i.index.toString()})),a>1&&Le(r,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(Le(r,{rowspan:l.toString(),"aria-rowspan":l.toString()}),i.cells[parseInt(t.toString(),10)].isRowSpanned=!0,i.cells[parseInt(t.toString(),10)].rowSpanRange=Number(l),a>1&&(i.cells[parseInt(t.toString(),10)].colSpanRange=Number(a))),i.index>0&&p.rowSpanRange>1&&(i.cells[parseInt(t.toString(),10)].isSpanned=!0,i.cells[parseInt(t.toString(),10)].rowSpanRange=Number(p.rowSpanRange-1),i.cells[parseInt(t.toString(),10)].colSpanRange=p.rowSpanRange>0?p.colSpanRange:1),this.parent.enableColumnVirtualization&&!i.cells[parseInt(t.toString(),10)].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),r},s.prototype.backupMergeCells=function(e,i,t){this.setMergeCells(this.generteKey(e,i),t)},s.prototype.generteKey=function(e,i){return e+"__"+i.toString()},s.prototype.splitKey=function(e){return e.split("__")},s.prototype.containsKey=function(e,i){return this.getMergeCells().hasOwnProperty(this.generteKey(e,i))},s.prototype.getMergeCells=function(){return this.parent.mergeCells},s.prototype.setMergeCells=function(e,i){this.parent.mergeCells[""+e]=i},s.prototype.updateVirtualCells=function(e){for(var i=this.getMergeCells(),t=0,r=Object.keys(i);t<r.length;t++){var n=r[t],o=i[""+n],a=this.splitKey(n),l=this.getIndexFromAllColumns(a[0]),h=this.parent.getColumnIndexesInView(),p=o-(h[0]-l);if(l<h[0]&&p>1)for(var d=0,u=e;d<u.length;d++){var f=u[d];if(f.data[a[0]].toString()===a[1].toString()){f.cells[0].cellSpan=p,f.cells[0].spanText=a[1];break}}}return e},s.prototype.getIndexFromAllColumns=function(e){var i=Ht(this.parent.getVisibleColumns(),function(t,r){if(t.field===e)return r})[0];return i},s}(),U="e-rowcell",Ke="e-gridheader",vt="e-gridcontent",Xi="e-gridfooter",me="e-headercontent",qi="e-movablecontent",vn="e-movableheader",ve="e-content",ft="e-table",Se="e-row",Zt="e-gridchkbox",di="e-editedrow",$t="e-addedrow",ah="changedRecords",or="addedRecords",bo="deletedRecords",Xe="Left-Right",lh="frozen-right",ne="aria-colindex",ee="aria-rowindex",j="tbody",_e="colgroup",_s="initialFrozenColumnIndex",wi=function(){function s(e,i,t){this.isSpan=!1,this.cellType=i,this.serviceLocator=e,this.parent=t,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return s.prototype.render=function(e,i,t,r,n){return this.refreshRow(e,i,t,r,n)},s.prototype.refresh=function(e,i,t,r,n){var o=this;t&&(e.data=Hn({},e.changes),this.refreshMergeCells(e));var a=this.parent.element.querySelector("[data-uid="+e.uid+"]"),l=this.refreshRow(e,i,r,n,null,t),h=[].slice.call(l.cells),p=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&p.length)for(var d=function(F){if(F.template)return setTimeout(function(){o.parent.refreshReactColumnTemplateByUid(F.uid,!0)},0),"break"},u=0,f=i;u<f.length;u++){var g=f[u],m=d(g);if(m==="break")break}var S=[].slice.call(l.attributes);S.map(function(F){a.setAttribute(F.name,F.value)}),a.innerHTML="";for(var y=0,R=h;y<R.length;y++){var w=R[y];a.appendChild(w)}},s.prototype.refreshRow=function(e,i,t,r,n,o){var a=c(n)?this.element.cloneNode():n,l={data:e.data},h={data:e.data},p=this.parent.getColumns().filter(function($){return $.type==="checkbox"&&$.field})[0],d=!1,u=this.parent.isFrozenGrid(),f=!0;p&&(d=yt(p.field,l.data));var g=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=g.indexOf(e.index)>-1||d),e.isDataRow&&this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(e.isSelected=!0,g.indexOf(e.index)===-1&&g.push(e.index)),this.buildAttributeFromRow(a,e),Le(a,W({},t,{})),tt(a,e.attributes);for(var m=this.serviceLocator.getService("cellRendererFactory"),S=function($,qn){var N=e.cells[parseInt($.toString(),10)];N.isSelected=e.isSelected,N.isColumnSelected=N.column.isSelected;var gr=m.getCellRenderer(e.cells[parseInt($.toString(),10)].cellType||A.Data),ki={index:c(e.index)?"":e.index.toString()};e.isExpand&&e.cells[parseInt($.toString(),10)].cellType===A.DetailExpand&&(ki.class=y.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var Fi=!y.parent.enableRtl&&y.parent.groupSettings&&f&&y.parent.groupSettings.columns.length&&(y.parent.gridLines==="Vertical"||y.parent.gridLines==="Both"),re=gr.render(e.cells[parseInt($.toString(),10)],e.data,ki,e.isExpand,o);if(e.cells[parseInt($.toString(),10)].cellType!==A.Filter){if(e.cells[parseInt($.toString(),10)].cellType===A.Data||e.cells[parseInt($.toString(),10)].cellType===A.CommandColumn){N.visible&&Fi&&(re.classList.add("e-grid-group-first-cell"),f=!1);var Y=y.parent.parentDetails&&y.parent.parentDetails.parentInstObj&&y.parent.parentDetails.parentInstObj.isReact,Mi=y.parent.printGridParent&&y.parent.printGridParent.isReact;if((y.parent.isReact&&y.parent.requireTemplateRef||Y&&y.parent.parentDetails.parentInstObj.requireTemplateRef||Mi&&y.parent.printGridParent.requireTemplateRef)&&N.isTemplate){var Ct=y;Ct.parent.renderTemplates(function(){if(typeof N.column.template!="string"){var Cr=re.getAttribute("aria-label");re.setAttribute("aria-label",re.innerText+Cr)}Ct.parent.trigger($r,W(h,{cell:re,column:N.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt($.toString(),10)].foreignKeyData,requestType:Ct.parent.requestTypeAction}))})}else y.parent.trigger($r,W(h,{cell:re,column:N.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt($.toString(),10)].foreignKeyData,requestType:y.parent.requestTypeAction}));var Mt=!1;if(e.index>0&&(y.isSpan||y.parent.isSpan&&o)){var Ue=y.parent.getRowsObject(),ge=y.parent.groupSettings.columns.length>0&&!Ue[e.index-1].isDataRow?Ue[e.index].cells:Ue[e.index-1].cells,mr="uid",He=ge.filter(function(Cr){return Cr.column.uid===e.cells[parseInt($.toString(),10)].column[""+mr]})[0];Mt=He.isRowSpanned?He.isRowSpanned:He.rowSpanRange>1}if(h.rowSpan>1||h.colSpan>1){if(y.resetrowSpanvalue(y.parent.frozenRows>e.index?y.parent.frozenRows:y.parent.currentViewData.length,h,e.index),h.column.visible===!1)h.colSpan=1;else if(u){var Oe=y.parent.getColumns(),at=y.parent.getFrozenRightColumnsCount(),_t=y.parent.getFrozenLeftCount(),Wt=Oe.length-at,be=h.column.index;if(_t>be&&_t<be+h.colSpan){var bt=be+h.colSpan-_t;h.colSpan=h.colSpan-bt}else if(Wt<=be&&Oe.length<be+h.colSpan){var bt=be+h.colSpan-Oe.length;h.colSpan=h.colSpan-bt}else if(h.column.freeze==="Fixed"){for(var bt=1,Nn=be,vr=Nn+1;vr<Nn+h.colSpan&&Oe[parseInt(vr.toString(),10)].freeze==="Fixed";vr++)bt++;h.colSpan=bt}else if(Wt>be&&Wt<be+h.colSpan){var bt=be+h.colSpan-Wt;h.colSpan=h.colSpan-bt}}}if(h.colSpan>1||e.cells[parseInt($.toString(),10)].cellSpan>1||h.rowSpan>1||Mt){y.parent.isSpan=!0,y.isSpan=!0;var yr=new mn(y.serviceLocator,y.parent);re=yr.render(h,e,$,re),u&&Op(y.parent,h.column,re,h.colSpan)}}if((N.cellType===A.Header||N.cellType===A.StackedHeader)&&Fi&&(N.visible||N.cellType===A.StackedHeader)){var Vn=y.parent.getVisibleColumns(),Gn="field",_n="type";(N.column[""+_n]&&N.column[""+_n]==="checkbox"||N.cellType===A.Header&&N.column[""+Gn]&&Vn.length&&Vn[0].field===N.column[""+Gn]||N.cellType===A.StackedHeader)&&(re.classList.add("e-grid-group-first-cell"),f=!1)}if(N.cellType===A.Header&&(e.cells[parseInt($.toString(),10)].colSpan>1||e.cells[parseInt($.toString(),10)].rowSpan>1)){var yr=new mn(y.serviceLocator,y.parent);re=yr.render(e.cells[parseInt($.toString(),10)],e,$,re)}if(y.isSpan){var Ue=y.parent.getRowsObject(),ni=y.parent.enableRtl;if(Ue[e.index-1]){var ge=Ue[e.index-1].cells,He=ge[$-1],Ti=ge[parseInt($.toString(),10)],Kt=ge[$+1],Sr=ge[parseInt($.toString(),10)].column.freeze;He&&(He.isRowSpanned||He.rowSpanRange>1)&&He.visible&&(!ni&&(!Ti.isRowSpanned||He.rowSpanRange>Ti.rowSpanRange)&&re.classList.add("e-rowcell-firstchild"),u&&(He.column.freeze==="Fixed"&&Sr==="Fixed"?re.classList.add(ni?"e-removefreezerightborder":"e-removefreezeleftborder"):!ni&&$===1&&Sr==="Left"&&re.classList.add("e-addfreezefirstchildborder"))),Kt&&(Kt.isRowSpanned||Kt.rowSpanRange>1)&&Kt.visible&&(ni&&(!Ti.isRowSpanned||Kt.rowSpanRange>Ti.rowSpanRange)&&re.classList.add("e-rowcell-lastchild"),u&&Kt.column.freeze==="Fixed"&&Sr==="Fixed"&&h.colSpan<2&&re.classList.add(ni?"e-removefreezeleftborder":"e-removefreezerightborder"))}}h.rowSpan>1&&y.parent.currentViewData.length-e.index===h.rowSpan&&re.classList.add("e-row-span-lastrowcell"),e.cells[parseInt($.toString(),10)].isSpanned||a.appendChild(re)}},y=this,R=0,w=e.cells.length;R<w;R++)S(R);var F=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(a.classList.contains("e-groupcaptionrow")){var L=[].slice.call(a.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(L.length&&E(L,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),a.querySelector(".e-summarycell"))Ep(a,this.parent);else{for(var k=0;k<a.childNodes.length;k++){var z=a.childNodes[parseInt(k.toString(),10)];if(z.classList.add("e-leftfreeze"),Ce(z,k*30,this.parent.enableRtl,"Left"),z.classList.contains("e-groupcaption")){var H=parseInt(z.getAttribute("colspan"),10),B=Po(this.parent,k);z.setAttribute("colspan",B.toString()),F=H-B}}if(F){var z=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:F.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}});a.appendChild(z)}}}if((a.querySelectorAll(".e-leftfreeze").length||a.classList.contains("e-columnheader"))&&(a.querySelectorAll(".e-indentcell").length||a.querySelectorAll(".e-grouptopleftcell").length))for(var z=a.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),R=0;R<z.length;R++)z[parseInt(R.toString(),10)].classList.add("e-leftfreeze"),Ce(z[parseInt(R.toString(),10)],R*30,this.parent.enableRtl,"Left")}var Q={row:a,rowHeight:this.parent.rowHeight};if(e.isDataRow){var D=W(l,Q);D.isSelectable=!0;var K=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,ie=D.row.querySelectorAll(".e-templatecell");if((this.parent.isReact&&this.parent.requireTemplateRef||K&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&ie.length){var ae=this;ae.parent.renderTemplates(function(){ae.parent.trigger(rr,D),D.isSelectable||(e.isSelectable=D.isSelectable,ae.disableRowSelection(ae,e,Q,D))})}else this.parent.trigger(rr,D);e.isSelectable=D.isSelectable;var xe=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var ce=this.parent.getPrimaryKeyFieldNames()[0],ke=e.data?e.data[""+ce]:null,Be=D.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;Be.some(function($){return $[""+ce]===ke})||Be.push(e.data)}if(D.isSelectable||this.disableRowSelection(this,e,Q,D),this.parent.childGrid||xe||this.parent.detailTemplate){var z=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];z&&z.classList.add("e-detailrowvisible")}}this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),e.cssClass&&a.classList.add(e.cssClass),e.lazyLoadCssClass&&a.classList.add(e.lazyLoadCssClass),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both")&&a.classList.add("e-verticalwrap");var Nt=this.parent.enableColumnVirtualization;if(!Nt&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(var R=0;R<this.parent.aggregates.length;R++){var Ae="properties",Vt="columns";if(this.parent.aggregates[parseInt(R.toString(),10)][""+Ae][""+Vt][0].footerTemplate){var Gt=[].slice.call(a.getElementsByClassName("e-summarycell"));if(Gt.length){var ur=Gt[Gt.length-1];T([ur],["e-lastsummarycell"]);var fr=Gt[0];T([fr],["e-firstsummarycell"])}}}return a},s.prototype.resetrowSpanvalue=function(e,i,t){if(e>t&&e<t+i.rowSpan){var r=t+i.rowSpan-e;i.rowSpan=i.rowSpan-r}},s.prototype.disableRowSelection=function(e,i,t,r){var n=this.parent.getSelectedRowIndexes();this.parent.selectionModule.isPartialSelection=!0,i.isSelected=!1;var o=n.indexOf(i.index);o>-1&&n.splice(o,1);for(var a=t.row.querySelectorAll(".e-rowcell.e-gridchkbox"),l=r.row.querySelector(".e-rowdragdrop"),h=e.parent.groupSettings.columns.length+(l||e.parent.isDetail()?1:0),p=0;p<a.length;p++)a[parseInt(p.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),a[parseInt(p.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(i.cells.length)for(var p=h;p<i.cells.length;p++){var d=r.row.querySelector('.e-rowcell[aria-colindex="'+(i.cells[parseInt(p.toString(),10)].index+1)+'"]');d&&E([d],["e-selectionbackground","e-active"])}l&&E([l],["e-selectionbackground","e-active"])},s.prototype.refreshMergeCells=function(e){for(var i=0,t=e.cells;i<t.length;i++){var r=t[i];r.isSpanned=!1}return e},s.prototype.buildAttributeFromRow=function(e,i){var t={},r={dataUID:"data-uid",ariaSelected:"aria-selected"},n=[];i.isDataRow&&n.push(Se),i.isAltRow&&n.push("e-altrow"),i.isCaptionRow&&n.push("e-groupcaptionrow"),i.isAggregateRow&&i.parentUid&&n.push("e-groupfooterrow"),c(i.index)||(t[ee]=i.index+1),i.rowSpan&&(t.rowSpan=i.rowSpan),i.uid&&(t[r.dataUID]=i.uid),i.isSelected&&(t[r.ariaSelected]=!0),i.visible===!1&&n.push("e-hide"),t.class=n,tt(e,t)},s}(),cr=function(){function s(e){this.parent=e}return s.prototype.generateRows=function(e,i){var t=[],r=this.parent.enableVirtualization&&i?i.startIndex:0;r=this.parent.enableInfiniteScrolling&&i?this.getInfiniteIndex(i):r,this.parent.enableImmutableMode&&i&&i.startIndex&&(r=i.startIndex);for(var n=0,o=Object.keys(e).length;n<o;n++,r++)t[parseInt(n.toString(),10)]=this.generateRow(e[parseInt(n.toString(),10)],r);return t},s.prototype.ensureColumns=function(){var e=[];if(this.parent.detailTemplate||this.parent.childGrid){var i={};this.parent.notify(vo,i),e.push(this.generateCell(i,null,A.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,A.RowDragIcon)),e},s.prototype.generateRow=function(e,i,t,r,n,o,a){var l={};l.foreignKeyData={},l.uid=It("grid-row"),l.data=e,l.index=i,l.indent=r,l.tIndex=o,l.isDataRow=!0,l.parentGid=n,l.parentUid=a,this.parent.isPrinting&&(this.parent.hierarchyPrintMode==="All"?l.isExpand=!0:this.parent.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(i.toString(),10)]&&(l.isExpand=this.parent.expandedRows[parseInt(i.toString(),10)].isExpand)),l.cssClass=t,l.isAltRow=this.parent.enableAltRow?i%2!==0:!1,l.isAltRow=this.parent.enableAltRow?i%2!==0:!1,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(i)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),p=new ri(l,this.parent);return p.cells=this.parent.getFrozenMode()==="Right"?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),p},s.prototype.refreshForeignKeyRow=function(e){for(var i=this.parent.getForeignKeyColumns(),t=0;t<i.length;t++)gt(i[parseInt(t.toString(),10)].field,qt(i[parseInt(t.toString(),10)],e.data),e.foreignKeyData)},s.prototype.generateCells=function(e){for(var i=this.parent.getColumns(),t=[],r=0;r<i.length;r++)t.push(this.generateCell(i[parseInt(r.toString(),10)],e.uid,c(i[parseInt(r.toString(),10)].commands)?void 0:A.CommandColumn,null,r,e.foreignKeyData));return t},s.prototype.generateCell=function(e,i,t,r,n,o){var a={visible:e.visible,isDataCell:!c(e.field||e.template),isTemplate:!c(e.template),rowID:i,column:e,cellType:c(t)?A.Data:t,colSpan:r,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&Z(e.field,o)};return(a.isDataCell||a.column.type==="checkbox"||a.commands)&&(a.index=n),new bi(a)},s.prototype.refreshRows=function(e){for(var i=0;i<e.length;i++)this.refreshForeignKeyRow(e[parseInt(i.toString(),10)]),e[parseInt(i.toString(),10)].cells=this.generateCells(e[parseInt(i.toString(),10)]);return e},s.prototype.getInfiniteIndex=function(e){return e.requestType==="infiniteScroll"||e.requestType==="delete"||e.action==="add"?c(e.startIndex)?e.index:e.startIndex:0},s}(),wo=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Io=function(){function s(e){this.parent=e}return s.prototype.getData=function(){for(var e=this,i=[],t=this.parent.aggregates.slice(),r=0;r<t.length;r++){var n=t[parseInt(r.toString(),10)].columns.filter(function(o){return!(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate)||e.columnSelector(o)});n.length&&i.push({columns:n})}return i},s.prototype.columnSelector=function(e){return e.footerTemplate!==void 0},s.prototype.getColumns=function(e){var i=[];if((this.parent.detailTemplate||!c(this.parent.childGrid))&&i.push(new de({})),this.parent.allowGrouping)for(var t=0;t<this.parent.groupSettings.columns.length;t++)i.push(new de({}));return this.parent.isRowDragable()&&!e&&i.push(new de({})),i.push.apply(i,this.parent.getColumns()),i},s.prototype.generateRows=function(e,i,t,r,n){if(e.length===0&&(i===void 0||!(i.count||i.loadSummaryOnEmpty)))return[];for(var o=this.buildSummaryData(e,i),a=[],l=this.getData(),h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[parseInt(h.toString(),10)],o[parseInt(h.toString(),10)],i?i.level:void 0,t,r,i?i.parentUid:void 0,n));return a},s.prototype.getGeneratedRow=function(e,i,t,r,n,o,a){var l=[],h=this.getIndentByLevel(),p=!c(this.parent.childGrid),d=this.parent.getIndentCount();this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?h.push("e-indentcelltop"):this.parent.isRowDragable()&&!r&&(h=["e-indentcelltop"]);for(var u=a||this.getColumns(r),f=0;f<u.length;f++)l.push(this.getGeneratedCell(u[parseInt(f.toString(),10)],e,f>=d?this.getCellType():f===0&&this.parent.childGrid?A.DetailFooterIntent:A.Indent,h[parseInt(f.toString(),10)],p));var g=new ri({data:i,attributes:{class:"e-summaryrow"}});return g.cells=l,g.uid=It("grid-row"),g.parentUid=o,g.isAggregateRow=!0,g.visible=l.some(function(m){return m.isDataCell&&m.visible}),g},s.prototype.getGeneratedCell=function(e,i,t,r,n){var o=i.columns.filter(function(p){return p.columnName===e.field})[0],a={"e-mappinguid":e.uid,index:e.index};if(e.textAlign){var l={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};l[e.textAlign.toLowerCase()]&&(a.class=l[e.textAlign.toLowerCase()])}r&&(a.class=r),c(r)&&n&&(a.class="e-detailindentcelltop");var h={visible:e.visible,isDataCell:!c(o),isTemplate:o&&!c(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:a,cellType:t};return h.column.headerText=e.headerText,new bi(h)},s.prototype.buildSummaryData=function(e,i){for(var t=[],r=this.getData(),n={},o=0;o<r.length;o++){n={};for(var a=r[parseInt(o.toString(),10)].columns,l=0;l<a.length;l++)n=this.setTemplate(a[parseInt(l.toString(),10)],i&&i.aggregates?i:e,n);t.push(n)}return t},s.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},s.prototype.setTemplate=function(e,i,t){var r=e.type,n={},o=e.getFormatter()||function(){return function(f){return f}}(),a=i;r instanceof Array||(r=[e.type]);for(var l=0;l<r.length;l++){var h=e.field+" - "+r[parseInt(l.toString(),10)].toLowerCase(),p=e.columnName,d=!!(this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&a.items),u=(r[parseInt(l.toString(),10)]!=="Custom"||d)&&a.aggregates&&h in a.aggregates?a.aggregates[""+h]:wp(r[parseInt(l.toString(),10)],a.aggregates?a:i,e,this.parent);t[""+p]=t[""+p]||{},t[""+p][""+h]=u,t[""+p][r[parseInt(l.toString(),10)]]=c(u)?" ":o(u),a.field&&(t[""+p].field=a.field,t[""+p].key=a.key)}return n.format=e.getFormatter(),e.setTemplate(n),t},s.prototype.getCellType=function(){return A.Summary},s}(),hh=function(s){wo(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.prototype.columnSelector=function(i){return i.groupFooterTemplate!==void 0},e.prototype.getIndentByLevel=function(i){return i===void 0&&(i=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(i-=1),this.parent.groupSettings.columns.map(function(t,r){return r<=i-1?"":"e-indentcelltop"})},e.prototype.getCellType=function(){return A.GroupSummary},e}(Io),ph=function(s){wo(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.prototype.columnSelector=function(i){return i.groupCaptionTemplate!==void 0},e.prototype.getData=function(){var i={columns:[]};return[s.prototype.getData.call(this).reduce(function(t,r){return t.columns=t.columns.concat(r.columns),t},i)]},e.prototype.isEmpty=function(){return(this.getData()[0].columns||[]).length===0},e.prototype.getCellType=function(){return A.CaptionSummary},e}(Io),ch=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),dh=function(s){ch(e,s);function e(i){var t=s.call(this,i)||this;return t.rows=[],t.index=0,t.infiniteChildCount=0,t.renderInfiniteAgg=!0,t.parent=i,t.summaryModelGen=new hh(i),t.captionModelGen=new ph(i),t}return e.prototype.generateRows=function(i,t){if(this.parent.groupSettings.columns.length===0)return s.prototype.generateRows.call(this,i,t);this.isInfiniteScroll=t.requestType==="infiniteScroll",this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(var r=0,n=i.length;r<n;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,i[parseInt(r.toString(),10)],i.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},e.prototype.getGroupedRecords=function(i,t,r,n,o,a,l){var h,p=r;if(c(t.items))if(c(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,i,n,this.rows.length,l));else for(var d=0,u=t.length;d<u;d++)this.getGroupedRecords(i,t[parseInt(d.toString(),10)],t.level,n,i,this.rows.length,l);else{var f=void 0,g=this.generateCaptionRow(t,i,n,o,a,l);if(this.isInfiniteScroll&&(f=this.getPreCaption(i,g.data.key)),f?g.uid=f.uid:this.rows=this.rows.concat(g),t.items&&t.items.length&&this.getGroupedRecords(i+1,t.items,t.items.level,n,i+1,this.rows.length,g.uid),this.parent.aggregates.length&&this.isRenderAggregate(g)){var m=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(t,{level:p,parentUid:g.uid}));for(var S=m-1;S>=0;S--)if(this.rows[parseInt(S.toString(),10)].isCaptionRow)this.rows[parseInt(S.toString(),10)].aggregatesCount=this.rows.length-m;else if(!this.rows[parseInt(S.toString(),10)].isCaptionRow&&!this.rows[parseInt(S.toString(),10)].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},e.prototype.isRenderAggregate=function(i){return this.parent.enableInfiniteScrolling?this.renderInfiniteAgg?(this.getPreCaption(i.indent,i.data.key),this.renderInfiniteAgg=i.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!1:!this.parent.enableInfiniteScrolling},e.prototype.getPreCaption=function(i,t){var r=this.parent.getRowsObject().concat(this.rows),n;this.infiniteChildCount=0;for(var o=r.length;o--;){if(r[parseInt(o.toString(),10)].isCaptionRow&&r[parseInt(o.toString(),10)].indent===i){var a=r[parseInt(o.toString(),10)].data.key;(a&&a.toString()===t.toString()&&a instanceof Date||a===t)&&(n=r[parseInt(o.toString(),10)])}if(r[parseInt(o.toString(),10)].indent===i||r[parseInt(o.toString(),10)].indent<i)break;r[parseInt(o.toString(),10)].indent===i+1&&this.infiniteChildCount++}return n},e.prototype.getCaptionRowCells=function(i,t,r){var n=[],o=[],a=this.parent.getColumnByField(i),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(w){return w.field===i})[0]);var h=this.parent.groupSettings.columns.length,p=this.parent;if(!this.parent.enableColumnVirtualization||l.indexOf(t)!==-1){for(var d=0;d<t;d++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,A.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(p.detailTemplate||p.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var u=this.captionModelGen.generateRows(r)[0];W(r,u.data);var f=0;u.cells.some(function(w,F){return f=F,w.visible&&w.isDataCell}),o=u.cells.slice(f).filter(function(w){return w.visible}),u.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),this.parent.getVisibleColumns().length===1&&(o=[]),t=t-o.length}for(var g=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],m=!0,S=0;S<g.length;S++){var y=m&&l.indexOf(t)!==-1;y&&(m=!1);var R=!this.parent.enableColumnVirtualization||y?A.GroupCaption:A.GroupCaptionEmpty;t=this.parent.enableColumnVirtualization&&R===A.GroupCaption?t+h:t,p.isRowDragable()&&t++,n.push(this.generateCell(a,null,R,t))}return n.push.apply(n,o),n},e.prototype.generateCaptionRow=function(i,t,r,n,o,a){var l={},h="records",p=this.parent.getColumnByField(i.field);l.data=W({},i),p&&(l.data.field=i.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=r,l.childGid=n,l.tIndex=o,l.isCaptionRow=!0,l.parentUid=a,l.gSummary=c(i.items[""+h])?i.items.length:i.items[""+h].length,l.uid=It("grid-row");var d=new ri(l);return d.indent=t,this.getForeignKeyData(d),d.cells=this.getCaptionRowCells(i.field,t,d.data),d},e.prototype.getForeignKeyData=function(i){var t=i.data,r=this.parent.getColumnByField(t.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var n=c(t.key)?"":r.valueAccessor(r.foreignKeyValue,qt(r,{},t.key)[0],r);gt("foreignKey",n,i.data)}},e.prototype.generateDataRows=function(i,t,r,n,o){for(var a=[],l=this.parent.getColumnIndexesInView(),h=0,p=i.length;h<p;h++,n++){a[parseInt(h.toString(),10)]=this.generateRow(i[parseInt(h.toString(),10)],this.index,h?void 0:"e-firstchildrow",t,r,n,o);for(var d=0;d<t;d++)this.parent.enableColumnVirtualization&&l.indexOf(t)===-1||a[parseInt(h.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return a},e.prototype.generateIndentCell=function(){return this.generateCell({},null,A.Indent)},e.prototype.refreshRows=function(i){for(var t=this.parent.getColumnIndexesInView(),r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)].isDataRow){i[parseInt(r.toString(),10)].cells=this.generateCells(i[parseInt(r.toString(),10)]);for(var n=0;n<i[parseInt(r.toString(),10)].indent;n++)this.parent.enableColumnVirtualization&&t.indexOf(i[parseInt(r.toString(),10)].indent)===-1||i[parseInt(r.toString(),10)].cells.unshift(this.generateIndentCell())}else{var o=this.generateCaptionRow(i[parseInt(r.toString(),10)].data,i[parseInt(r.toString(),10)].indent);i[parseInt(r.toString(),10)].cells=o.cells}return i},e.prototype.setInfiniteRowVisibility=function(i){if(!i.isExpand||i.visible===!1)for(var t=0,r=this.rows;t<r.length;t++){var n=r[t];n.parentUid===i.uid&&(n.visible=!1,n.isCaptionRow&&this.setInfiniteRowVisibility(n))}},e.prototype.ensureRowVisibility=function(){for(var i=0;i<this.rows.length;i++){var t=this.rows[parseInt(i.toString(),10)];if(t.isCaptionRow)for(var r=i+1;r<this.rows.length;r++){var n=this.rows[parseInt(r.toString(),10)];t.uid===n.parentUid&&(this.rows[parseInt(r.toString(),10)].visible=t.isExpand)}}},e}(cr),uh=function(){function s(e,i){var t=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(r){t.parent.notify(za,{target:r.target,droppedElement:r.droppedElement}),q(r.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(r){var n=r;return function(){if(t.ariaService.setBusy(t.getPanel().querySelector("."+ve),!1),!t.parent.isDestroyed){var o=t.rows.slice(0);if(t.parent.enableInfiniteScrolling){if(t.parent.groupSettings.enableLazyLoading)for(var a=0;a<t.visibleRows.length;a++)t.setRowsInLazyGroup(t.visibleRows[parseInt(a.toString(),10)],a);o=t.parent.getRowsObject();var l=n.prevPage;if(t.parent.infiniteScrollSettings.enableCache&&l){var h=t.parent.infiniteScrollSettings.maxBlocks;o=[];for(var p=parseInt(t.rowElements[0].getAttribute("aria-rowindex"),10),d=Math.ceil(p/t.parent.pageSettings.pageSize),a=0,u=d;a<h;a++,u++)t.infiniteCache[parseInt(u.toString(),10)]&&(o=o.concat(t.infiniteCache[parseInt(u.toString(),10)]))}}if(t.parent.notify(pe,{rows:o,args:n}),t.parent.editSettings.showAddNewRow&&t.parent.addNewRowFocus&&(t.parent.notify(Jt,{}),t.parent.addNewRowFocus=!1),t.parent.autoFit&&t.parent.preventAdjustColumns(),t.parent.isInitialLoad||t.parent.focusModule.setFirstFocusableTabIndex(),t.isLoaded){t.parent.isManualRefresh=!1,t.parent.enableInfiniteScrolling&&t.parent.groupSettings.enableLazyLoading&&r.requestType==="sorting"&&(t.parent.infiniteScrollModule.groupCaptionAction=void 0);var f=t.parent.parentDetails&&t.parent.parentDetails.parentInstObj&&t.parent.parentDetails.parentInstObj.isReact;if((t.parent.isReact||f)&&t.parent.element.querySelectorAll(".e-templatecell").length){var g=t;g.parent.renderTemplates(function(){g.parent.trigger(xt,{},function(){g.parent.allowTextWrap&&g.parent.notify(Ui,{case:"textwrap"})})})}else t.parent.trigger(xt,{},function(){t.parent.allowTextWrap&&t.parent.notify(Ui,{case:"textwrap"})});t.parent.allowTextWrap&&t.parent.height==="auto"&&(t.parent.getContentTable().scrollHeight>t.parent.getContent().clientHeight?t.parent.scrollModule.setPadding():t.parent.scrollModule.removePadding())}if(n){var m=(n.requestType||"").toLowerCase()+"-complete";t.parent.notify(m,n),r.requestType==="batchsave"&&(r.cancel=!1,t.parent.trigger(Me,r))}t.isLoaded&&t.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=i,this.widthService=i.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(zn,this.setVisible,this),this.parent.on(ho,this.colGroupRefresh,this),this.parent.on(ue,this.enableAfterRender,this),this.parent.on(Il,this.refreshContentRows,this),this.parent.on(nn,this.beforeCellFocused,this),this.parent.on(St,this.droppableDestroy,this))}return s.prototype.beforeCellFocused=function(e){e.byKey&&(e.keyArgs.action==="upArrow"||e.keyArgs.action==="downArrow")?this.pressedKey=e.keyArgs.action:this.pressedKey=void 0},s.prototype.renderPanel=function(){var e=this.parent,i=this.parent.element.querySelector("."+vt);if(i){this.ariaService.setOptions(this.parent.element.querySelector("."+ve),{busy:!1}),this.setPanel(i);return}i=this.parent.createElement("div",{className:vt});var t=this.parent.createElement("div",{className:ve});this.ariaService.setOptions(t,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(i),t.classList.add("e-virtual-content")),i.appendChild(t),this.setPanel(i),e.element.appendChild(i)},s.prototype.renderHorizontalScrollbar=function(e){var i=this.parent.createElement("div",{className:"e-movablescrollbar"}),t=this.parent.createElement("div",{className:"e-movablechild"}),r=De().toString();this.setScrollbarHeight(t,r),this.setScrollbarHeight(i,r),i.appendChild(t),e.appendChild(i)},s.prototype.setScrollbarHeight=function(e,i){e.style.minHeight=i+"px",e.style.maxHeight=i+"px"},s.prototype.renderTable=function(){var e=this.getPanel(),i=e.querySelector(".e-virtualtable"),t=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!c(i)&&!c(t)&&(q(i),q(t)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+ft)),this.parent.selectionSettings.type==="Multiple"&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},s.prototype.createContentTable=function(e){var i=this.getPanel().firstElementChild;this.getTable()&&q(this.getTable());var t=i.querySelector("."+ft)?i.querySelector("."+ft):this.parent.createElement("table",{className:ft,attrs:{role:"presentation",id:this.parent.element.id+e}});return t.style.cssText="border-collapse: separate; border-spacing: .25px;",this.setColGroup(this.parent.getHeaderTable().querySelector(_e).cloneNode(!0)),t.appendChild(this.getColGroup()),t.appendChild(this.parent.createElement(j,{attrs:{role:"rowgroup"}})),i.appendChild(t),i},s.prototype.refreshContentRows=function(e){var i=this;e===void 0&&(e={});var t=this.parent;if(t.currentViewData.length!==0){t.editSettings&&t.editModule&&t.editSettings.mode==="Batch"&&t.editModule.formObj&&t.editSettings.showConfirmDialog===!1&&t.editModule.destroyForm();var r=this.currentMovableRows||t.currentViewData,n=t.isReact&&!c(t.rowTemplate),o=this.parent.printGridParent&&this.parent.printGridParent.isReact,a=n||o?t.createElement(j,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=W([],r));var l=n?t.createElement(j,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),h,p;(t.isReact||o)&&t.rowTemplate&&(h=a,p=l);var d=t.getColumns(),u,f,g,m=new wi(this.serviceLocator,null,this.parent),S=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll",y=this.isInfiniteColumnvirtualization()&&e.requestType!=="virtualscroll",R=!!(t.enableInfiniteScrolling&&(t.childGrid||t.detailTemplate)),w=R&&(e.action==="add"&&e.requestType==="save"||e.requestType==="delete");w&&(e.startIndex=0,t.notify(sh,{})),S&&(t.childGrid||t.detailTemplate)&&!t.infiniteScrollSettings.enableCache||(R&&(this.parent.infiniteScrollModule.infiniteDetailDestroy=!0),t.notify(Jl,S&&(t.childGrid||t.detailTemplate)&&t.infiniteScrollSettings.enableCache?e:{})),this.rowElements=[],this.rows=[],this.tempFreezeRows=[];var F,L=!!(this.parent.frozenRows&&this.parent.groupSettings.columns.length);nt(t)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(Y){return e.requestType===Y})&&this.emptyVcRows();var k;k=this.checkCache(k,e),!this.isAddRows&&!this.useGroupCache&&(k=this.generator.generateRows(r,e)),this.setGroupCache(k,e),this.parent.notify(Al,{isInfiniteScroll:S,modelData:k,args:e});var z=this.parent.registeredTemplate;if(!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&z&&z.template&&!e.isFrozen){for(var H=[],B=0;B<z.template.length;B++)for(var Q=0;Q<z.template[parseInt(B.toString(),10)].rootNodes.length;Q++)c(z.template[parseInt(B.toString(),10)].rootNodes[parseInt(Q.toString(),10)].parentNode)&&H.push(z.template[parseInt(B.toString(),10)]);this.parent.destroyTemplate(["template"],H)}if((this.parent.isReact||this.parent.isVue)&&!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&!e.isFrozen){var D=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];e.requestType==="infiniteScroll"&&this.parent.infiniteScrollSettings.enableCache&&(D=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),dr(this.parent,D)}if(this.parent.enableColumnVirtualization){var K=new mn(this.serviceLocator,this.parent);K.updateVirtualCells(k)}this.tbody=this.getTable().querySelector(j);var ie=0,ae=!0;if(nt(t)&&t.vcRows.length){var xe="top",ce=c(e.virtualInfo.offsets)?c(e.scrollTop)?0:e.scrollTop[""+xe]:e.virtualInfo.offsets.top;if(ce!==0){for(var ke=t.vGroupOffsets,Be=t.pageSettings.pageSize/2,Nt=Object.keys(ke).map(function(Y){return ke[""+Y]}),Ae=0;Ae<Nt.length;Ae++)if(ce<Nt[parseInt(Ae.toString(),10)])if(!c(e.virtualInfo)&&e.virtualInfo.direction==="up"){ie=Ae>0?(Ae-1)*Be:Ae*Be;break}else{ie=Ae*Be,(this.parent.contentModule.isEndBlock(Ae)||this.parent.contentModule.isEndBlock(Ae+1))&&(e.virtualInfo.blockIndexes=[Ae,Ae+1]);break}Math.round(ce+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(ae=!1)}}var Vt=t.frozenRows&&this.parent.enableVirtualization&&e.requestType==="reorder";if(t.frozenRows&&e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo.axis==="X"||Vt){var Gt=e.virtualInfo.blockIndexes,ur=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],Vt&&(e.virtualInfo.page=1);var fr=Vt?this.initialPageRecords:r,$=this.vgenerator.generateRows(fr,e);$.splice(this.parent.frozenRows);for(var B=0;B<this.parent.frozenRows;B++)u=m.render($[parseInt(B.toString(),10)],d),In(u),l.appendChild(u);e.virtualInfo.blockIndexes=Gt,e.virtualInfo.page=ur,Vt&&e.virtualInfo.page===1&&k.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,k,m,e,r,d),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&e.requestType==="delete"||w)&&(this.visibleRows=[]);for(var qn=function(Y,Mi){if(N.rows.push(k[parseInt(Y.toString(),10)]),N.parent.groupSettings.enableLazyLoading&&!N.useGroupCache&&N.parent.groupSettings.columns.length&&((N.parent.enableVirtualization?N.parent.lazyLoadRender:N.parent.contentModule).refRowsObj[N.parent.pageSettings.currentPage].push(k[parseInt(Y.toString(),10)]),N.setRowsInLazyGroup(k[parseInt(Y.toString(),10)],Y),c(k[parseInt(Y.toString(),10)].indent)))return"continue";if(N.setInfiniteVisibleRows(e,k[parseInt(Y.toString(),10)]),nt(t)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&N.rowElements.length>=e.virtualInfo.blockIndexes.length*N.parent.contentModule.getBlockSize()&&ae)return N.parent.currentViewData.records=N.rows.map(function(be){return be.data}),"break";if(t.rowTemplate){var Ue=t.element.id+"rowTemplate",ge=void 0;if(t.isReact||o){var mr=t.frozenRows&&Y<t.frozenRows,He=W({index:Y},r[parseInt(Y.toString(),10)]);if(t.getRowTemplate()(He,t,"rowTemplate",Ue,null,null,mr?l:a),t.requireTemplateRef){var Oe=N;return Oe.parent.renderTemplates(function(){t.frozenRows&&Y<t.frozenRows?u=p.childNodes[parseInt(Y.toString(),10)]:g=h.childNodes[parseInt(Y.toString(),10)];var be={data:k[parseInt(Y.toString(),10)].data,row:g||u};Oe.parent.trigger(rr,be),(k[parseInt(Y.toString(),10)].isDataRow||Oe.parent.enableVirtualization&&Oe.parent.groupSettings.enableLazyLoading)&&Oe.rowElements.push(be.row),Oe.ariaService.setOptions(Oe.parent.element,{colcount:t.getColumns().length.toString()}),Y===k.length-1&&(h=null,p=null)}),"continue"}}else ge=t.getRowTemplate()(W({index:Y},r[parseInt(Y.toString(),10)]),t,"rowTemplate",Ue,void 0,void 0,void 0,N.parent.root);if(!t.isReact&&ge[0].tagName==="TBODY"){for(var at=0;at<ge.length;at++){var _t=ge[parseInt(at.toString(),10)].nodeName.toLowerCase()==="tr";(_t||ge[parseInt(at.toString(),10)].querySelectorAll&&ge[parseInt(at.toString(),10)].querySelectorAll("tr").length)&&(u=_t?ge[parseInt(at.toString(),10)]:ge[parseInt(at.toString(),10)].querySelector("tr"))}t.frozenRows&&Y<t.frozenRows?l.appendChild(u):a.appendChild(u)}else t.frozenRows&&Y<t.frozenRows?u=t.isReact?l.lastElementChild:We(l,ge):(t.isReact||(u=We(a,ge)),g=t.isReact?a.lastElementChild:u.lastElementChild);var Wt={data:k[parseInt(Y.toString(),10)].data,row:g||u};N.parent.trigger(rr,Wt)}else{u=m.render(k[parseInt(Y.toString(),10)],d),In(u);var Ct=N.ensureFrozenHeaderRender(e);t.frozenRows&&(Y<t.frozenRows||L)&&!S&&e.requestType!=="virtualscroll"&&Ct&&N.ensureVirtualFrozenHeaderRender(e)?l.appendChild(u):a.appendChild(u);var Mt=parseInt(u.getAttribute("aria-rowindex"),10)-1;Mt+1===t.frozenRows&&(L=!1),k[parseInt(Y.toString(),10)].isExpand&&t.notify(dl,u.cells[t.groupSettings.columns.length])}(k[parseInt(Y.toString(),10)].isDataRow||N.parent.enableVirtualization&&N.parent.groupSettings.enableLazyLoading)&&(!c(t.rowTemplate)&&(t.isAngular||t.isVue3||t.isVue)?N.rowElements.push(g||u):N.rowElements.push(u)),N.ariaService.setOptions(N.parent.element,{colcount:t.getColumns().length.toString()})},N=this,B=ie,gr=k.length;B<gr;B++){var ki=qn(B);if(ki==="break")break}var Fi=t.parentDetails&&t.parentDetails.parentInstObj&&t.parentDetails.parentInstObj.isReact;if((t.isReact||Fi)&&!t.requireTemplateRef&&t.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(So,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),t.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),t.frozenRows&&e.requestType!=="virtualscroll"&&!S&&this.ensureVirtualFrozenHeaderRender(e)||e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo&&e.virtualInfo.sentinelInfo.axis==="X"){if(f=t.getHeaderTable().querySelector(j),n){var re=f.parentElement;q(f),re.appendChild(l)}else f.innerHTML="",f.appendChild(l);t.isInitialLoad||t.scrollModule.setHeight()}e.rows=this.rows.slice(0),Eo(function(){if(i.parent.notify(go,e),!i.parent.enableVirtualization&&(!i.parent.enableColumnVirtualization||y)&&!S&&(t.isReact||(i.tbody.innerHTML=""),c(i.tbody.parentElement)?q(t.getContentTable().querySelector(j)):q(i.tbody),i.tbody=i.parent.createElement(j,{attrs:{role:"rowgroup"}})),t.rowTemplate&&Vo(t.element.id+"rowTemplate"),!c(i.parent.infiniteScrollModule)&&(i.parent.enableInfiniteScrolling&&!i.isInfiniteColumnvirtualization()||y)){if(i.isAddRows=!1,i.parent.notify(Tl,{args:e}),i.parent.notify(Ml,{tbody:i.tbody,frag:a,args:e,rows:i.rows,rowElements:i.rowElements,visibleRows:i.visibleRows,tableName:F}),i.isInfiniteColumnvirtualization()&&i.parent.isFrozenGrid()){var Y=i.parent.getContent().querySelector(".e-virtualtable"),Mi=bn(Y);i.parent.contentModule.resetStickyLeftPos(Mi.width),i.widthService.refreshFrozenScrollbar()}}else i.useGroupCache=!1,i.appendContent(i.tbody,a,e);if(i.parent.editSettings.showAddNewRow&&(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)){var Ct=i.parent.element.querySelector(".e-addrow-removed");Ct&&q(Ct)}var Mt=!i.parent.element.querySelector("."+$t);i.parent.editSettings.showAddNewRow&&i.parent.editSettings.mode==="Normal"&&(Mt&&((i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&(i.parent.isAddNewRow=!0),i.parent.isEdit=!1,i.parent.addRecord()),(Mt||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(Ue){return e.requestType===Ue}))&&i.parent.notify(Jt,{})),i.parent.getVisibleFrozenRightCount()&&i.parent.getContent()&&On(i.parent)>0&&i.parent.element.classList.add("e-right-shadow"),a=null},this.rafCallback(W({},e)))}},s.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},s.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},s.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},s.prototype.appendContent=function(e,i,t,r){var n=this.parent.isReact&&!c(this.parent.rowTemplate);if(n?this.getTable().appendChild(i):(e.appendChild(i),this.getTable().appendChild(e)),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both"))for(var o=e.querySelectorAll("td"),a=0;a<o.length;a++){var l=parseFloat(document.defaultView.getComputedStyle(o[parseInt(a.toString(),10)],"::before").getPropertyValue("height")),h=o[parseInt(a.toString(),10)].offsetHeight;l>h&&(o[parseInt(a.toString(),10)].style.height=l+"px",o[parseInt(a.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},s.prototype.setRowsInLazyGroup=function(e,i){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(e,i)},s.prototype.setGroupCache=function(e,i){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(Ll,{args:i,data:e})},s.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&(e.requestType==="reorder"||e.requestType==="refresh")||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&this.parent.infiniteScrollModule.requestType==="delete"&&this.parent.pageSettings.currentPage!==1)},s.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&e.requestType==="delete")},s.prototype.checkCache=function(e,i){if(this.parent.infiniteScrollSettings.enableCache&&i.requestType==="infiniteScroll"){if(this.isAddRows=!c(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var t=this.infiniteCache[this.parent.pageSettings.currentPage];e=this.parent.pageSettings.currentPage===1?t.slice(this.parent.frozenRows):t}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(i.requestType==="paging"||i.requestType==="columnstate"||i.requestType==="reorder"||i.requestType==="virtualscroll")&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows(i.requestType==="reorder")):null},s.prototype.setInfiniteVisibleRows=function(e,i){this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!(this.isInfiniteColumnvirtualization()&&e.requestType==="virtualscroll")&&this.visibleRows.push(i)},s.prototype.getCurrentBlockInfiniteRecords=function(){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.getRows(),t=parseInt(i[this.parent.frozenRows].getAttribute(ee),10)-1,r=Math.ceil((t+1)/this.parent.pageSettings.pageSize);t=parseInt(i[i.length-1].getAttribute(ee),10)-1;for(var n=Math.ceil((t+(i.length?1:0))/this.parent.pageSettings.pageSize),o=r;o<=n;o++)e=e.length?e.concat(this.infiniteCache[parseInt(o.toString(),10)]):this.infiniteCache[parseInt(o.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}return e},s.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},s.prototype.virtualFrozenHdrRefresh=function(e,i,t,r,n,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&(r.requestType==="reorder"||r.requestType==="refresh")){for(var a=void 0,l=this.getReorderedRows(r),h=0;h<l.length;h++)a=t.render(l[parseInt(h.toString(),10)],o),e.appendChild(a);r.virtualInfo.page===1&&i.splice(0,this.parent.frozenRows)}},s.prototype.getInfiniteRows=function(){var e=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),t=0;t<i.length;t++)e=e.concat(this.infiniteCache[i[parseInt(t.toString(),10)]]);else e=this.visibleRows;return e},s.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords(),i=this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[];return i},s.prototype.getPanel=function(){return this.contentPanel},s.prototype.setPanel=function(e){this.contentPanel=e},s.prototype.getTable=function(){return this.contentTable},s.prototype.setTable=function(e){this.contentTable=e},s.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.rows},s.prototype.getRowElements=function(){return this.rowElements},s.prototype.setRowElements=function(e){this.rowElements=e},s.prototype.getColGroup=function(){return this.colgroup},s.prototype.setColGroup=function(e){return c(e)||(e.id="content-"+e.id),this.colgroup=e},s.prototype.setVisible=function(e){var i=this.parent,t=this.getRows(),r;t.some(function(S){return S.isDataRow&&(r=S),S.isDataRow});var n=!0;!i.groupSettings.columns.length&&r&&(n=!1);for(var o=i.getDataRows(),a={},l=this.infiniteRowVisibility(),h=l||this.rows.filter(function(S){return!S.isDetailRow}),p=0,d=e.length;p<d;p++){var u=e[parseInt(p.toString(),10)],f=this.parent.getNormalizedColumnIndex(u.uid),g=this.parent.getColumnIndexByUid(u.uid),m=u.visible===!0?"":"none";f!==-1&&r&&f<r.cells.length&&$e(this.getColGroup().childNodes[parseInt(f.toString(),10)],{display:m}),n||this.setDisplayNone(o,g,m,h),!this.parent.invokedFromMedia&&u.hideAtMedia&&this.parent.updateMediaColumns(u),this.parent.invokedFromMedia=!1}n?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(mo,{rows:h,args:a}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(Jt,{}))},s.prototype.setDisplayNone=function(e,i,t,r){_p(e,i,t,r,this.parent,this.parent.isRowDragable()),this.parent.notify(Fl,{visible:t,index:i,isFreeze:this.isInfiniteFreeze})},s.prototype.infiniteRowVisibility=function(e){var i;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,this.parent.infiniteScrollSettings.enableCache?i=this.getCurrentBlockInfiniteRecords():i=e?this.visibleFrozenRows:this.visibleRows),i},s.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=this.getHeaderColGroup();this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},s.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+Ke).querySelector(_e+":not(.e-masked-colgroup)").cloneNode(!0)},s.prototype.initializeContentDrop=function(){var e=this.parent;this.droppable=new Ys(e.element,{accept:".e-dragclone",drop:this.drop})},s.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},s.prototype.canSkip=function(e,i,t){return c(i)||c(e.visible)||i.cells[parseInt(t.toString(),10)].visible===e.visible},s.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new dh(this.parent):new cr(this.parent)},s.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(j).innerHTML="")},s.prototype.setSelection=function(e,i,t){this.parent.notify(Bl,{uid:e,set:i,clearAll:t});for(var r=this.getRows().filter(function(l){return t||e===l.uid}),n=0;n<r.length;n++){r[parseInt(n.toString(),10)].isSelected=i;for(var o=r[parseInt(n.toString(),10)].cells,a=0;a<o.length;a++)o[parseInt(a.toString(),10)].isSelected=i}},s.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),c(e)?void 0:this.parent.getDataRows()[parseInt(e.toString(),10)]},s.prototype.getInfiniteRowIndex=function(e){if(this.parent.infiniteScrollSettings.enableCache&&!c(e)){var i=this.parent.frozenRows,t=i>e?0:i,r=parseInt(this.parent.getRows()[parseInt(t.toString(),10)].getAttribute(ee),10)-1;e=i>e?e:e-r+i}return e},s.prototype.getVirtualRowIndex=function(e){return e},s.prototype.enableAfterRender=function(e){e.module==="group"&&e.enable&&(this.generator=this.getModelGenerator())},s.prototype.setRowObjects=function(e){this.rows=e},s.prototype.immutableModeRendering=function(e){var i=this;e===void 0&&(e={});var t=this.parent;t.hideSpinner();var r=t.getPrimaryKeyFieldNames()[0],n={},o={},a=[],l={},h=t.getRowsObject().slice(),p=this.getBatchEditedRecords(r,h),d={},u=Object.keys(p).length!==0;if(t.getContent().querySelector(".e-emptyrow")||e.requestType==="reorder"||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(t.currentViewData.length===0)return;var f={},g=t.createElement(j,{attrs:{role:"rowgroup"}}),m=t.currentViewData,S=[].slice.call(this.getTable().querySelector(j).children);if(this.prevCurrentView.length){var y=this.prevCurrentView.length,R=m.length;if(y===R)for(var w=0;w<R;w++){if(this.parent.editSettings.mode==="Batch"&&S[parseInt(w.toString(),10)].classList.contains("e-insertedrow")){S.splice(w,1),--w;continue}o[m[parseInt(w.toString(),10)][""+r]]=n[this.prevCurrentView[parseInt(w.toString(),10)][""+r]]=w,d[parseInt(w.toString(),10)]=m[parseInt(w.toString(),10)][""+r],f[h[parseInt(w.toString(),10)].uid]=S[parseInt(w.toString(),10)],l[parseInt(w.toString(),10)]=this.prevCurrentView[parseInt(w.toString(),10)][""+r]}else{for(var w=0;w<R;w++)o[m[parseInt(w.toString(),10)][""+r]]=w,d[parseInt(w.toString(),10)]=m[parseInt(w.toString(),10)][""+r];for(var w=0;w<y;w++){if(this.parent.editSettings.mode==="Batch"&&S[parseInt(w.toString(),10)].classList.contains("e-insertedrow")){S.splice(w,1),--w;continue}f[h[parseInt(w.toString(),10)].uid]=S[parseInt(w.toString(),10)],n[this.prevCurrentView[parseInt(w.toString(),10)][""+r]]=w,l[parseInt(w.toString(),10)]=this.prevCurrentView[parseInt(w.toString(),10)][""+r]}}}for(var w=0;w<m.length;w++){var F=n[m[parseInt(w.toString(),10)][""+r]];if(c(F)){var z=new wi(this.serviceLocator,null,t),H={startIndex:w},B=this.generator.generateRows([m[parseInt(w.toString(),10)]],H);a.push(B[0]);var k=z.render(B[0],t.getColumns());g.appendChild(k),this.refreshImmutableContent(w,k,a[parseInt(w.toString(),10)])}else{var L=!1;this.parent.enableDeepCompare&&(L=this.objectEqualityChecker(this.prevCurrentView[parseInt(F.toString(),10)],m[parseInt(w.toString(),10)]));var k=f[h[parseInt(F.toString(),10)].uid];if(a.push(h[parseInt(F.toString(),10)]),this.rowElements[parseInt(F.toString(),10)]&&this.rowElements[parseInt(F.toString(),10)].getAttribute("data-uid")===a[parseInt(w.toString(),10)].uid&&(u&&c(p[d[parseInt(w.toString(),10)]])||!u&&(L||this.prevCurrentView[parseInt(F.toString(),10)]===m[parseInt(w.toString(),10)]))){F!==w&&this.refreshImmutableContent(w,k,a[parseInt(w.toString(),10)]),g.appendChild(k);continue}(u&&!c(p[d[parseInt(w.toString(),10)]])||!this.parent.enableDeepCompare&&m[parseInt(w.toString(),10)]!==this.prevCurrentView[parseInt(F.toString(),10)]||this.parent.enableDeepCompare&&!L)&&h[parseInt(F.toString(),10)].setRowValue(m[parseInt(w.toString(),10)]),g.appendChild(k),this.refreshImmutableContent(w,k,a[parseInt(w.toString(),10)])}}if(this.rows=a,this.rowElements=[].slice.call(g.children),q(this.getTable().querySelector(j)),this.getTable().appendChild(g),this.parent.trigger(xt,{},function(){i.parent.allowTextWrap&&i.parent.notify(Ui,{case:"textwrap"})}),e){var Q=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(Q,e)}}},s.prototype.objectEqualityChecker=function(e,i){for(var t=Object.keys(e),r=!0,n=0;n<t.length;n++)if(e[t[parseInt(n.toString(),10)]]!==i[t[parseInt(n.toString(),10)]]){var o=e[t[parseInt(n.toString(),10)]]instanceof Date&&i[t[parseInt(n.toString(),10)]]instanceof Date;if(!o||e[t[parseInt(n.toString(),10)]].getTime()!==i[t[parseInt(n.toString(),10)]].getTime()){r=!1;break}}return r},s.prototype.getBatchEditedRecords=function(e,i){var t={},r=this.parent.getBatchChanges(),n=[],o=[];Object.keys(r).length&&(n=r.changedRecords,o=r.addedRecords);var a={cancel:!1};this.parent.notify(Hl,{rows:i,args:a}),o.length&&(this.parent.editSettings.newRowPosition==="Bottom"?i.splice(i.length-1,o.length):a.cancel||i.splice(0,o.length));for(var l=0;l<n.length;l++)t[n[parseInt(l.toString(),10)][""+e]]=l;return t},s.prototype.refreshImmutableContent=function(e,i,t){t.isAltRow=this.parent.enableAltRow?e%2!==0:!1,t.isAltRow?i.classList.add("e-altrow"):i.classList.remove("e-altrow"),t.index=e,t.edit=void 0,t.isDirty=!1,i.setAttribute(ee,(e+1).toString()),this.updateCellIndex(i,e)},s.prototype.updateCellIndex=function(e,i){for(var t=0;t<e.cells.length;t++)e.cells[parseInt(t.toString(),10)].setAttribute("index",i.toString())},s}(),fh=function(){function s(e,i){var t=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(r){var n=t.parent,o=t.draggable.currentStateTarget,a=b(o,"e-headercell");if(!(n.allowReordering||n.allowGrouping)||!c(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var l=t.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=o.classList.contains("e-headercell")?o:a;if(!h||!n.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var p=h.offsetHeight,d=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv"),u;if(d){if(h.querySelector(".e-stackedheadercelldiv")?u=n.getStackedHeaderColumnByHeaderText(d.innerText.trim(),n.columns):u=n.getColumnByUid(d.getAttribute("e-mappinguid")),t.column=u,t.column.lockColumn)return!1;l.setAttribute("e-mappinguid",t.column.uid)}if(u&&!c(u.headerTemplate)){if(c(u.headerTemplate))l.innerHTML=u.headerTemplate;else{var f=n.getColumnIndexByField(u.field),g=u.getHeaderTemplate()(W({index:f},u),n,"headerTemplate",null,null,null,null,n.root),m=n.isReact&&typeof u.headerTemplate!="string",S=n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isReact;(m||S)&&n.renderTemplates(),We(l,g)}!c(l.firstChild)&&l.firstChild.nodeType===1&&(l.firstChild.style.pointerEvents="none")}else l.innerHTML=d?u.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(p-6).toString()+"px",n.element.appendChild(l),l},this.dragStart=function(r){var n=t.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify(Da,{target:t.draggable.currentStateTarget,column:t.column,event:r.event})},this.drag=function(r){var n=t.parent,o=r.target;if(o){var a=M(o,".e-grid"),l=t.parent.element.querySelector(".e-cloneproperties");if((!a||a.getAttribute("id")!==n.element.getAttribute("id"))&&(Re(l,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),!n.groupSettings.allowReordering))return;n.notify(La,{target:r.target,column:t.column,event:r.event})}},this.dragStop=function(r){var n=t.parent,o;n.element.querySelector(".e-gridpopup").style.display="none",(!b(r.target,"e-headercell")&&!b(r.target,"e-groupdroparea")||!n.allowReordering&&b(r.target,"e-headercell")||!r.helper.getAttribute("e-mappinguid")&&b(r.target,"e-groupdroparea"))&&(q(r.helper),o=!0),n.notify(Za,{target:r.target,event:r.event,column:t.column,cancel:o})},this.drop=function(r){var n=t.parent,o=r.droppedElement.getAttribute("e-mappinguid"),a=M(r.target,".e-grid");q(r.droppedElement),!(a&&a.getAttribute("id")!==n.element.getAttribute("id")||!(n.allowReordering||n.allowGrouping))&&n.notify($a,{target:r.target,uid:o,droppedElement:r.droppedElement})},this.parent=e,this.serviceLocator=i,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(this.parent.enableColumnVirtualization||this.parent.on(zn,this.setVisible,this),this.parent.on(co,this.colPosRefresh,this),this.parent.on(Ln,this.renderCustomToolbar,this),this.parent.rowRenderingMode==="Vertical"&&this.parent.on(ue,this.updateCustomResponsiveToolbar,this))}return s.prototype.renderPanel=function(){var e=this.parent.element.querySelector("."+Ke),i=e!=null;e=i?e:this.parent.createElement("div",{className:"e-gridheader"});var t=i?e.querySelector("."+me):this.parent.createElement("div",{className:me});this.toggleStackClass(e),e.appendChild(t),this.setPanel(e),i||this.parent.element.appendChild(e)},s.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+ft)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(mt,{rows:this.rows})},s.prototype.getPanel=function(){return this.headerPanel},s.prototype.setPanel=function(e){this.headerPanel=e},s.prototype.getTable=function(){return this.headerTable},s.prototype.setTable=function(e){this.headerTable=e},s.prototype.getColGroup=function(){return this.colgroup},s.prototype.setColGroup=function(e){return this.colgroup=e},s.prototype.getRows=function(){var e=this.getTable();return e.tHead.rows},s.prototype.createHeaderTable=function(){var e=this.createTable(),i=this.getPanel().querySelector("."+me);return i.appendChild(e),i},s.prototype.createHeader=function(e,i){var t=this.parent;this.getTable()&&q(this.getTable());var r=this.parent.createElement("table",{className:ft,attrs:{role:"presentation"}});r.style.cssText="border-collapse: separate; border-spacing: .25px;";var n=this.createHeaderContent(i),o=n.thead,a=this.parent.createElement(j,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var l=this.parent.createElement(_e),h=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),p,d=this.rows=n.rows,u=0,f=d.length;u<f;u++)for(var g=0,m=d[parseInt(u.toString(),10)].cells.length;g<m;g++)p=this.parent.createElement("td"),h.appendChild(p);return(t.allowFiltering||t.allowSorting||t.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(l),a.appendChild(h),r.appendChild(this.setColGroup(l)),r.appendChild(o),r.appendChild(a),r.appendChild(this.caption),r},s.prototype.createTable=function(e){return e===void 0&&(e=null),this.createHeader(e)},s.prototype.createHeaderContent=function(e){var i=this.parent,t=i.getColumns(),r=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),n=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),o=new wi(this.serviceLocator,A.Header,i);o.element=n;var a=[],l;this.colDepth=Tp(i.columns);for(var h=0,p=this.colDepth;h<p;h++)a[parseInt(h.toString(),10)]=this.generateRow(h),a[parseInt(h.toString(),10)].cells=[];if(a=this.ensureColumns(a),a=this.getHeaderCells(a,e),i.isRowDragable()&&this.parent.getFrozenMode()==="Right")for(var h=0,p=a.length;h<p;h++)a[parseInt(h.toString(),10)].cells.push(this.generateCell({},A.RowDragHIcon));var d=t.filter(function(f){return f.headerTemplate});d.length&&(this.parent.isReact||this.parent.isVue)&&dr(this.parent,["headerTemplate"]);for(var h=0,p=this.colDepth;h<p;h++)l=o.render(a[parseInt(h.toString(),10)],t),this.parent.rowHeight&&l.querySelector(".e-headercell")&&(l.style.height=this.parent.rowHeight+"px"),In(l),r.appendChild(l);var u={thead:r,rows:a};return u},s.prototype.updateColGroup=function(e){var i=this.parent.getColumns(),t,r=this.parent.getColumnIndexesInView();if(e.id=this.parent.element.id+_e,this.parent.allowGrouping)for(var n=0,o=this.parent.groupSettings.columns.length;n<o;n++)this.parent.enableColumnVirtualization&&r.indexOf(n)===-1||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(var n=0,o=i.length;n<o;n++)t=this.parent.createElement("col"),i[parseInt(n.toString(),10)].visible===!1&&$e(t,{display:"none"}),e.appendChild(t);return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),e},s.prototype.ensureColumns=function(e){for(var i=this.parent,t=this.parent.getColumnIndexesInView(),r=0,n=e.length;r<n;r++){if(i.allowGrouping)for(var o=0,a=i.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&t.indexOf(o)===-1||e[parseInt(r.toString(),10)].cells.push(this.generateCell({},A.HeaderIndent));if(i.detailTemplate||i.childGrid){var l={};this.parent.notify(vo,l),e[parseInt(r.toString(),10)].cells.push(this.generateCell(l,A.DetailHeader))}i.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&e[parseInt(r.toString(),10)].cells.push(this.generateCell({},A.RowDragHIcon))}return e},s.prototype.getHeaderCells=function(e,i){var t=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<(c(r)?0:r.length);n++)this.lockColsRendered=!1,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===r.length-1,t,i,!1);for(var n=0,o=c(r)?0:r.length;n<o;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===o-1,t,i,!1);return e},s.prototype.appendCells=function(e,i,t,r,n,o,a,l,h){var p=o?h?"e-laststackcell":"e-lastcell":"",d=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered;if(!e.columns)d&&i[parseInt(t.toString(),10)].cells.push(this.generateCell(e,A.Header,this.colDepth-t,(r?"":n?"e-firstcell":"")+p,t,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;else{this.isFirstCol=!1;var u=this.getCellCnt(e,0);if(u){var f=this.getStackedLockColsCount(e,0),g=this.parent.lockcolPositionCount===0||!this.lockColsRendered&&f!==0||this.lockColsRendered&&u-f!==0;g&&i[parseInt(t.toString(),10)].cells.push(new bi({cellType:A.StackedHeader,column:e,colSpan:this.getColSpan(u,f),className:r?"":n?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var m=0;m<e.columns.length;m++)i=this.appendCells(e.columns[parseInt(m.toString(),10)],i,t+1,r,m===0,m===e.columns.length-1&&o,a,l,!1);if(this.lockColsRendered)for(var m=0,S=e.columns.length;m<S;m++){r=r&&m===0;var y=this.isFirstCol=e.columns[parseInt(m.toString(),10)].visible&&!r,R=m===S-1&&o;i=this.appendCells(e.columns[parseInt(m.toString(),10)],i,t+1,r,y&&!R,R,a,l,!0)}}return i},s.prototype.getStackedLockColsCount=function(e,i){if(e.columns)for(var t=0;t<e.columns.length;t++)i=this.getStackedLockColsCount(e.columns[parseInt(t.toString(),10)],i);else e.lockColumn&&i++;return i},s.prototype.getColSpan=function(e,i){return e=this.lockColsRendered?e-i:i,e},s.prototype.generateRow=function(e){return new ri({})},s.prototype.generateCell=function(e,i,t,r,n,o){var a={visible:e.visible,isDataCell:!1,isTemplate:!c(e.headerTemplate),rowID:"",column:e,cellType:i,rowSpan:t,className:r,index:n,colIndex:o};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new bi(a)},s.prototype.setVisible=function(e){for(var i=this.parent,t,r,n=0,o=e.length;n<o;n++){var a=e[parseInt(n.toString(),10)];r=i.getNormalizedColumnIndex(a.uid),t=a.visible?"":"none",$e(this.getColGroup().children[parseInt(r.toString(),10)],{display:t}),i.editSettings.showAddNewRow&&i.element.querySelector(".e-addedrow")&&$e(i.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(r.toString(),10)],{display:t})}this.refreshUI(),this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},s.prototype.colPosRefresh=function(){this.refreshUI()},s.prototype.refreshUI=function(){var e=this.getPanel();this.toggleStackClass(e);var i=this.getTable(),t=void 0;if(i){q(i),this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&i.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(i.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0),i.removeChild(i.firstChild),i.removeChild(i.childNodes[0]);var r=this.parent.createElement(_e),n=this.createHeaderContent(t);this.rows=n.rows,i.insertBefore(n.thead,i.firstChild),this.updateColGroup(r),i.insertBefore(this.setColGroup(r),i.firstChild),this.appendContent(i),this.parent.notify(ho,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag();for(var o=[].slice.call(e.querySelectorAll("tr.e-columnheader")),a=0,l=o;a<l.length;a++){var h=l[a],p=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));p.length&&p[p.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(mt,{rows:this.rows}),this.parent.enableColumnVirtualization&&b(i,vn)&&this.parent.notify(mt,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&this.parent.textWrapSettings.wrapMode==="Header"&&Ee(o,!0)}var d=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");c(d)||(d.tabIndex=0)},s.prototype.toggleStackClass=function(e){var i=this.parent.columns,t=c(i)?!1:i.some(function(r){return!c(r.columns)});t?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},s.prototype.appendContent=function(e){this.getPanel().querySelector("."+me).appendChild(e)},s.prototype.getCellCnt=function(e,i){if(e.columns)for(var t=0,r=e.columns.length;t<r;t++)i=this.getCellCnt(e.columns[parseInt(t.toString(),10)],i);else e.visible&&i++;return i},s.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new Xs(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(St,this.droppableDestroy,this))},s.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new Ys(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(St,this.droppableDestroy,this)},s.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},s.prototype.renderCustomToolbar=function(){var e=this,i=this.parent;if(i.rowRenderingMode==="Vertical"&&!i.toolbar&&(i.allowSorting||i.allowFiltering&&i.filterSettings.type!=="FilterBar")){for(var t=i.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=i.createElement("div",{className:"e-toolbar-items"}),n=i.createElement("div",{className:"e-toolbar-left"}),o=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<o;a++){var l=i.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=o===1?this.parent.allowSorting?"sort":"filter":a===1?"sort":"filter",p=i.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),d=i.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});p.appendChild(d);var u=new Bt({cssClass:this.parent.cssClass?this.parent.cssClass:""});u.appendTo(p),p.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")||f.target.querySelector(".e-ressort-icon")?e.parent.showResponsiveCustomSort():e.parent.showResponsiveCustomFilter()},l.appendChild(p),n.appendChild(l)}r.appendChild(n),t.appendChild(r),i.element.insertBefore(t,this.parent.element.querySelector("."+Ke))}else i.enableAdaptiveUI&&!i.toolbar&&i.getContent().classList.add("e-responsive-header")},s.prototype.updateCustomResponsiveToolbar=function(e){var i=this.parent.element.querySelector(".e-responsive-toolbar");e.module==="toolbar"&&(i?q(i):this.renderCustomToolbar())},s}(),Pe=function(){function s(e,i){this.localizer=i.getService("localization"),this.formatter=i.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:U,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return s.prototype.getGui=function(){return""},s.prototype.format=function(e,i,t){if(!c(e.format)){if(e.type==="number"&&isNaN(parseInt(i,10))&&(i=null),e.type==="dateonly"&&typeof i=="string"&&i){var r=i.split(/[^0-9.]/);i=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}i=this.formatter.toView(i,e.getFormatter())}return c(i)?"":i.toString()},s.prototype.evaluate=function(e,i,t,r,n,o){var a,l;if(i.column.template){var h=this.parent.isReact&&typeof i.column.template!="string"&&!(i.column.template.prototype&&i.column.template.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,d=this.parent.printGridParent&&this.parent.printGridParent.isReact,u=["index"],f=Hn({},t,(a={},a[fo]=n,a.column=i.column,a)),g=this.parent.element.id+i.column.uid,m="isStringTemplate";if(h||p||d){var S={index:r[u[0]]};i.column.getColumnTemplate()(W(S,f),this.parent,"columnTemplate",g,this.parent[""+m],null,e)}else l=i.column.getColumnTemplate()(W({index:r[u[0]]},f),this.parent,"template",g,this.parent[""+m],void 0,void 0,this.parent.root);return!h&&!p&&!d&&We(e,l),this.parent.notify("template-result",{template:l}),l=null,i.column.templateOptions.enableAriaLabel&&e.setAttribute("aria-label",e.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+i.column.headerText),!1}return!0},s.prototype.invokeFormatter=function(e,i,t){if(!c(e.formatter))if(vp(e.formatter,"getValue")){var r=e.formatter;i=new r().getValue(e,t)}else typeof e.formatter=="function"?i=e.formatter(e,t):i=e.formatter.getValue(e,t);return i},s.prototype.render=function(e,i,t,r,n){return this.refreshCell(e,i,t,n)},s.prototype.refreshTD=function(e,i,t,r){var n=this.parent.editSettings.mode==="Batch"&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){var o=e.cellIndex,a=e.parentElement;q(e);var l=this.refreshCell(i,t,r,n);this.cloneAttributes(l,e),a.cells.length!==o-1?a.insertBefore(l,a.cells[parseInt(o.toString(),10)]):a.appendChild(l)}else{var h=this.refreshCell(i,t,r,n);e.innerHTML="";var p=h.getAttribute("aria-label");p&&e.setAttribute("aria-label",p);for(var d=[].slice.call(h.childNodes),u=0,f=d;u<f.length;u++){var g=f[u];e.appendChild(g)}}},s.prototype.cloneAttributes=function(e,i){for(var t=i.attributes,r=t.length,n;r--;)n=t[parseInt(r.toString(),10)],e.setAttribute(n.name,n.value)},s.prototype.refreshCell=function(e,i,t,r){var n,o=this.element.cloneNode(),a=e.column,l;e.isForeignKey&&(l=e.foreignKeyData[0]||(n={},n[a.foreignKeyValue]=a.format?null:"",n));var h=this.getGui(),p=e.isForeignKey?this.getValue(a.foreignKeyValue,l,a):this.getValue(a.field,i,a);if((a.type==="date"||a.type==="datetime")&&!c(p)&&(p=new Date(p)),a.type==="dateonly"&&!c(p)&&typeof p=="string"){var d=p.split(/[^0-9.]/);p=new Date(parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}if(p=this.format(a,p,i),h=p.toString(),a.type==="boolean"&&!a.displayAsCheckBox){var u=p!=="true"&&p!=="false"?null:p==="true"?"True":"False";h=u?this.localizer.getConstant(u):h}var f=this.invokeFormatter(a,p,i);if(h=c(a.formatter)?h:c(f)?"":f.toString(),this.evaluate(o,e,i,t,l,r)&&a.type!=="checkbox")this.appendHtml(o,this.parent.sanitize(h),a.getDomSetter?a.getDomSetter():"innerHTML");else if(a.type==="checkbox"){o.classList.add(Zt),this.parent.selectionSettings.persistSelection?p=p==="true":p=!1;var g=mi(this.parent.createElement,!1,{checked:p,label:" "});this.parent.cssClass&&T([g],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+e.rowID,g.insertBefore(this.rowChkBox.cloneNode(),g.firstChild),o.appendChild(g)}if(this.parent.checkAllRows==="Check"&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(o,e,t),a.type==="boolean"&&a.displayAsCheckBox){var m=isNaN(parseInt(p.toString(),10))?p==="true":parseInt(p.toString(),10)>0,g=mi(this.parent.createElement,!1,{checked:m,label:" "});o.innerHTML="",o.classList.add("e-gridchkbox-cell"),g.classList.add("e-checkbox-disabled"),this.parent.cssClass&&T([g],[this.parent.cssClass]),o.appendChild(g)}if(o.classList.contains("e-summarycell")&&!i.key){var S=o.getAttribute("e-mappinguid");a=this.parent.getColumnByUid(S),o.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+e.column.headerText)}return this.parent.isFrozenGrid()&&(!i||i&&!i.key)&&Ho(this.parent,a,o),o},s.prototype.appendHtml=function(e,i,t){return t===void 0&&(t="innerHTML"),e[""+t]=i,e},s.prototype.setAttributes=function(e,i,t){var r=i.column;if(this.buildAttributeFromCell(e,i,r.type==="checkbox"),tt(e,t),tt(e,i.attributes),r.customAttributes&&tt(e,r.customAttributes),this.parent.rowRenderingMode==="Vertical"&&tt(e,{"data-cell":r.headerText}),r.textAlign){var n={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};n[r.textAlign.toLowerCase()]&&e.classList.add(n[r.textAlign.toLowerCase()])}r.clipMode==="Clip"||!r.clipMode&&this.parent.clipMode==="Clip"?e.classList.add("e-gridclip"):(r.clipMode==="EllipsisWithTooltip"||!r.clipMode&&this.parent.clipMode==="EllipsisWithTooltip"&&!(this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Content"||this.parent.textWrapSettings.wrapMode==="Both")))&&r.type!=="checkbox"&&e.classList.add("e-ellipsistooltip")},s.prototype.buildAttributeFromCell=function(e,i,t){var r={},n=[];i.colSpan&&(r.colSpan=i.colSpan),i.rowSpan&&(r.rowSpan=i.rowSpan),i.isTemplate&&n.push("e-templatecell"),i.isSelected&&(n.push.apply(n,["e-selectionbackground","e-active"]),t&&e.querySelector(".e-frame").classList.add("e-check")),i.isColumnSelected&&n.push.apply(n,["e-columnselection"]),i.cellType===A.Header?r[ne]=i.colIndex+1:c(i.index)||(r[ne]=i.index+1),i.visible||n.push("e-hide"),r.class=n,tt(e,r)},s.prototype.getValue=function(e,i,t){return t.valueAccessor(e,i,t)},s}(),Ro=function(){function s(){}return s.prototype.setOptions=function(e,i){for(var t=Object.keys(i),r=0;r<t.length;r++)Tt(e,At[t[parseInt(r.toString(),10)]],i[t[parseInt(r.toString(),10)]])},s.prototype.setExpand=function(e,i){Tt(e,At.expand,i)},s.prototype.setSort=function(e,i){Tt(e,At.sort,i,typeof i=="boolean")},s.prototype.setBusy=function(e,i){Tt(e,At.busy,i),Tt(e,At.invalid,null,!0)},s.prototype.setGrabbed=function(e,i,t){Tt(e,At.grabbed,i,t)},s.prototype.setDropTarget=function(e,i){Tt(e,At.dropeffect,"copy",!i)},s}();function Tt(s,e,i,t){if(t&&s){s.removeAttribute(e);return}s&&s.setAttribute(e,i)}var At={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},gh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),xo=function(s){gh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),i.ariaService=new Ro,i.hTxtEle=i.parent.createElement("span",{className:"e-headertext"}),i.sortEle=i.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),i.gui=i.parent.createElement("div"),i.chkAllBox=i.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":i.localizer.getConstant("SelectAllCheckbox")}}),i}return e.prototype.getGui=function(){return this.gui.cloneNode()},e.prototype.render=function(i,t,r){var n=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(i,n,o)},e.prototype.refresh=function(i,t){this.clean(t);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(i,t,r)},e.prototype.clean=function(i){i.innerHTML=""},e.prototype.prepareHeader=function(i,t,r){var n=i.column,o={},a="",l=this.getGui(),h;if(Le(l,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),c(n.headerValueAccessor)||(h=this.getValue(n.headerText,n)),this.parent.rowHeight&&this.parent.allowSorting&&n.allowSorting&&!c(n.field)&&t.classList.add("e-sort-icon"),n.type!=="checkbox"){var p=n.headerText;c(h)||(p=h);var d=this.hTxtEle.cloneNode();d[n.getDomSetter()]=this.parent.sanitize(p),l.appendChild(d)}else{n.editType="booleanedit";var u=mi(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,u.insertBefore(this.chkAllBox.cloneNode(),u.firstChild),this.parent.cssClass&&T([u],[this.parent.cssClass]),l.appendChild(u),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,i),this.appendHtml(t,l),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&this.parent.filterSettings.type!=="FilterBar"&&n.allowFiltering&&!c(n.field)&&!(this.parent.showColumnMenu&&n.showColumnMenu)){Le(r,{"e-mappinguid":"e-flmenu-"+n.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),t.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length){for(var g=this.parent.getForeignKeyColumns(),m=0;m<this.parent.columns.length;m++)for(var S=0;S<this.parent.filterSettings.columns.length;S++)if(this.parent.filterSettings.columns[parseInt(S.toString(),10)].field===n.field||g.length&&n.foreignKeyValue===this.parent.filterSettings.columns[parseInt(S.toString(),10)].field){r.classList.add("e-filtered"),f.push(n.field);break}}t.appendChild(r.cloneNode())}i.className&&t.classList.add(i.className),n.customAttributes&&tt(t,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(o.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(o.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&n.type!=="checkbox"&&!n.template&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),t=this.extendPrepareHeader(n,t);var y,R=this.parent,w=R.getColumnIndexByField(n.field);if(!c(n.headerTemplate)){var F=R.element.id+n.uid+"headerTemplate",L="isStringTemplate",k=n,z=this.parent.isReact&&typeof n.headerTemplate!="string"&&!(n.headerTemplate.prototype&&n.headerTemplate.prototype.CSPTemplate),H=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,B=this.parent.printGridParent&&this.parent.printGridParent.isReact;if(z||H||B){var Q={index:w};t.firstElementChild.innerHTML="",n.getHeaderTemplate()(W(Q,k),R,"headerTemplate",F,this.parent[""+L],null,t.firstElementChild),this.parent.renderTemplates()}else y=n.getHeaderTemplate()(W({index:w},k),R,"headerTemplate",F,this.parent[""+L],void 0,void 0,this.parent.root),t.firstElementChild.innerHTML="",We(t.firstElementChild,y)}if(this.ariaService.setOptions(t,o),!c(n.headerTextAlign)||!c(n.textAlign)){var D=n.headerTextAlign||n.textAlign;D.toLowerCase()==="right"||D.toLowerCase()==="left"?t.classList.add(D.toLowerCase()==="right"?"e-rightalign":"e-leftalign"):D.toLowerCase()==="center"?t.classList.add("e-centeralign"):D.toLowerCase()==="justify"&&t.classList.add("e-justifyalign")}if(n.clipMode==="Clip"||!n.clipMode&&this.parent.clipMode==="Clip"?t.classList.add("e-gridclip"):(n.clipMode==="EllipsisWithTooltip"||!n.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&!(R.allowTextWrap&&(R.textWrapSettings.wrapMode==="Header"||R.textWrapSettings.wrapMode==="Both"))&&n.type!=="checkbox"&&t.classList.add("e-ellipsistooltip"),a){var K=this.parent.createElement("span",{id:"headerTitle-"+n.uid,innerHTML:a});K.style.display="none",t.appendChild(K),t.setAttribute("aria-describedby",K.id)}t.setAttribute("aria-rowspan",(c(i.rowSpan)?1:i.rowSpan).toString()),t.setAttribute("aria-colspan","1");var ie=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||ie&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!c(n.headerTemplate)){var ae=this;ae.parent.renderTemplates(function(){ae.parent.trigger(en,{cell:i,node:t})})}else this.parent.trigger(en,{cell:i,node:t});return this.parent.isFrozenGrid()&&Ho(this.parent,n,t),t},e.prototype.getValue=function(i,t){return t.headerValueAccessor(i,t)},e.prototype.extendPrepareHeader=function(i,t){if(this.parent.showColumnMenu&&i.showColumnMenu&&!c(i.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length){for(var o=0;o<this.parent.columns.length;o++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[parseInt(a.toString(),10)].field===i.field){r.classList.add("e-filtered"),n.push(i.field);break}}t.classList.add("e-fltr-icon"),t.appendChild(r)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=i.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(l)}return t},e.prototype.appendHtml=function(i,t){return i.appendChild(t),i},e}(Pe),mh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Ws=function(s){mh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),i}return e.prototype.render=function(i,t,r){var n=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":i.column.uid}}),a=i.column;if(n.appendChild(o),c(a.headerTemplate)?this.appendHtml(o,this.parent.sanitize(a.headerText),a.getDomSetter()):We(o,a.getHeaderTemplate()(a,this.parent,"headerTemplate",null,null,null,null,this.parent.root)),i.column.toolTip&&n.setAttribute("title",i.column.toolTip),a.clipMode==="Clip"||!a.clipMode&&this.parent.clipMode==="Clip"?n.classList.add("e-gridclip"):(a.clipMode==="EllipsisWithTooltip"||!a.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&n.classList.add("e-ellipsistooltip"),!c(i.column.textAlign)){var l={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};l[i.column.textAlign.toLowerCase()]&&n.classList.add(l[i.column.textAlign.toLowerCase()])}if(i.column.customAttributes&&tt(n,i.column.customAttributes),n.setAttribute("colspan",i.colSpan.toString()),n.setAttribute("aria-colspan",i.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var h=this.parent.createElement("div");h.className=i.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(h)}if(i.className&&n.classList.add(i.className),this.parent.trigger(en,{cell:i,node:n}),Zi(a)==="Left")if(n.classList.add("e-leftfreeze"),a.border==="Left"&&n.classList.add("e-freezeleftborder"),a.index===0)Ce(n,this.parent.getIndentCount()*30,this.parent.enableRtl,"Left");else{for(var p=this.parent.getColumns(),d=this.parent.getIndentCount()*30,u=0;u<p.length&&!(a.index<p[parseInt(u.toString(),10)].index);u++)p[parseInt(u.toString(),10)].visible&&(d+=parseFloat(p[parseInt(u.toString(),10)].width.toString()));Ce(n,d,this.parent.enableRtl,"Left")}else if(Zi(a)==="Right"){n.classList.add("e-rightfreeze");for(var p=this.parent.getColumns(),d=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,u=p.length-1;u>=0&&!(Ks(a,p[parseInt(u.toString(),10)].uid)||a.index>p[parseInt(u.toString(),10)].index);u--)p[parseInt(u.toString(),10)].visible&&(d+=parseFloat(p[parseInt(u.toString(),10)].width.toString()));Ce(n,d,this.parent.enableRtl,"Right"),a.border==="Right"&&n.classList.add("e-freezerightborder")}else if(Zi(a)==="Fixed"){n.classList.add("e-fixedfreeze");var p=this.parent.getColumns(),d=0;this.parent.getVisibleFrozenLeftCount()?d=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(d=this.parent.groupSettings.columns.length*30);for(var u=0;u<p.length;u++)a.index>p[parseInt(u.toString(),10)].index&&(p[parseInt(u.toString(),10)].freeze==="Left"||p[parseInt(u.toString(),10)].isFrozen||p[parseInt(u.toString(),10)].freeze==="Fixed")&&p[parseInt(u.toString(),10)].visible&&(d+=parseFloat(p[parseInt(u.toString(),10)].width.toString()));Ce(n,d-1,this.parent.enableRtl,"Left"),d=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var u=p.length-1;u>=0;u--)if(a.index<p[parseInt(u.toString(),10)].index){if(Ks(a,p[parseInt(u.toString(),10)].uid)||a.index>p[parseInt(u.toString(),10)].index)break;(p[parseInt(u.toString(),10)].freeze==="Right"||p[parseInt(u.toString(),10)].freeze==="Fixed")&&p[parseInt(u.toString(),10)].visible&&(d+=parseFloat(p[parseInt(u.toString(),10)].width.toString()))}Ce(n,d-1,this.parent.enableRtl,"Right")}else n.classList.add("e-unfreeze");return n},e}(Pe),vh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),yn=function(s){vh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-indentcell"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return tt(r,i.attributes),r},e}(Pe),ko=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),yh=function(s){ko(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.cellUid=0,i.element=i.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:i.parent.element.id+"captioncell",tabindex:"-1"}}),i}return e.prototype.render=function(i,t){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var r=this.element.cloneNode(),n=this.parent,o=i.column,a=o.getDomSetter?o.getDomSetter():"innerHTML",l,h,p;t.headerText=i.column.headerText,i.isForeignKey&&(h=this.format(i.column,i.column.valueAccessor("foreignKey",t,i.column)));for(var d=i.isForeignKey?h:i.column.enableGroupByFormat?t.key:this.format(i.column,i.column.valueAccessor("key",t,i.column)),u=0;u<n.aggregates.length;u++)for(var f=function(z){if(n.getVisibleColumns()[0].field===n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)].field&&n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)].groupCaptionTemplate){var H=n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)].groupCaptionTemplate;if(typeof H=="string"&&H.includes("$"))p=n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)].groupCaptionTemplate.split("$")[0]+t[n.getVisibleColumns()[0].field][n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)].type]+n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)].groupCaptionTemplate.split("}")[1];else{var B=n.aggregates[parseInt(u.toString(),10)].columns[parseInt(z.toString(),10)],Q=B.getTemplate(A.CaptionSummary),D="";if(!c(Q)){var K=Q.fn(t[B.columnName],g.parent,Q.property,D),ie=g.parent.printGridParent&&g.parent.printGridParent.isReact;(g.parent.isReact||ie)&&typeof B.groupCaptionTemplate!="string"?g.parent.renderTemplates(function(){K&&K.length&&(c(n.groupSettings.captionTemplate)?r.innerText+=" "+K[0].textContent:r.appendChild(K[0]))}):K&&K.length&&(c(n.groupSettings.captionTemplate)?p=K[0].textContent:p=K)}}return"break"}},g=this,m=0;m<n.aggregates[parseInt(u.toString(),10)].columns.length;m++){var S=f(m);if(S==="break")break}if(c(n.groupSettings.captionTemplate))n.groupSettings.enableLazyLoading?r[""+a]=this.parent.sanitize(i.column.headerText)+": "+this.parent.sanitize(d)+(p?"   "+p:""):r[""+a]=this.parent.sanitize(i.column.headerText)+": "+this.parent.sanitize(d)+" - "+t.count+" "+(t.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(p?"   "+p:"");else{var y=this.parent.isReact&&typeof n.groupSettings.captionTemplate!="string"&&!(n.groupSettings.captionTemplate.prototype&&n.groupSettings.captionTemplate.prototype.CSPTemplate),R=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,w=this.parent.printGridParent&&this.parent.printGridParent.isReact;if(y||R||w){var F=n.element.id+"captionTemplate",L="groupKey",k="key";t[""+L]=t[""+k],te(n.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",F,null,null,r),this.parent.renderTemplates()}else this.parent.isVue||n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isVue?l=te(n.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",null,null,null,null,n.root):l=te(n.groupSettings.captionTemplate)(t);!y&&!R&&!w&&(We(r,l),p&&p.length&&p[0].textContent&&r.appendChild(p[0]))}return r.setAttribute("colspan",i.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+this.localizer.getConstant("GroupCaption")),r.setAttribute("title",r.textContent),r},e}(Pe),Sh=function(s){ko(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-groupcaption"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",i.colSpan.toString()),r},e}(Pe),Ch=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),bh=function(s){Ch(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.prototype.render=function(i,t,r,n){var o=this.element.cloneNode();return o.setAttribute("ej-mappingname",t.field),o.setAttribute("ej-mappingvalue",t.key),o.setAttribute("aria-expanded",n?"true":"false"),o.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(i.cellType=A.Indent,o.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(o.className=n?"e-recordplusexpand":"e-recordpluscollapse",o.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:n?this.localizer.getConstant("Expanded"):this.localizer.getConstant("Collapsed")}}))),o},e}(yn),wh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Ih=function(s){wh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-grouptopleftcell"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},e}(Pe),Rh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),xh=function(s){Rh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-detailheadercell"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},e}(Pe),kh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Fh=function(s){kh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),i}return e.prototype.render=function(i,t,r){var n=this.element.cloneNode();return r&&!c(r.class)?(n.className="",n.className=r.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),i.isSelected&&n.classList.add("e-selectionbackground","e-active"),n},e}(Pe),Mh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Th=function(s){Mh(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();if(r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),i.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;Ce(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(Pe),Ah=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Eh=function(s){Ah(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-rowdragheader"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();if(r.appendChild(le("div",{className:"e-emptycell"})),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;Ce(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(Pe),Dh=function(){function s(e,i){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=i,this.data=new oh(e,i),this.l10n=i.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return s.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(ze.Header),this.contentRenderer=this.renderer.getRenderer(ze.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),this.parent.height!=="auto"&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},s.prototype.refresh=function(e){var i=this;e===void 0&&(e={requestType:"refresh"});var t=this.parent;t.notify(e.requestType+"-begin",e),t.trigger(st,e,function(r){if(r===void 0&&(r={requestType:"refresh"}),r.cancel){if(t.notify(cn,r),r.action==="clearFilter"&&i.parent.filterSettings.type==="Menu"){i.parent.filterSettings.columns[i.parent.filterModule.filterObjIndex]=i.parent.filterModule.prevFilterObject;var n=i.parent.showColumnMenu&&i.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",o=i.parent.element.querySelector('[e-mappinguid="'+i.parent.filterModule.column.uid+'"]').parentElement,a=o.querySelector(n);c(i.parent.filterModule.prevFilterObject)||a.classList.add("e-filtered")}if(r.action==="clear-filter"&&(i.parent.filterSettings.type==="CheckBox"||i.parent.filterSettings.type==="Excel")&&(i.parent.filterSettings.columns=i.parent.filterModule.checkboxPrevFilterObject),r.requestType==="grouping"){var l=t.groupSettings.columns.indexOf(r.columnName);if(l!==-1){t.setProperties({groupSettings:{Columns:t.groupSettings.columns.splice(l,1)}},!0),t.setProperties({sortSettings:{Columns:t.sortSettings.columns.splice(l,1)}},!0);var h=t.getColumnByField(r.columnName),p=t.getColumnHeaderByField(h.field);h.visible=!c(p)&&!p.classList.contains("e-hide")}}return}if(i.parent.notify(Co,r),r.requestType==="virtualscroll"&&(i.parent.getDataModule().isRemote()||"result"in i.parent.dataSource)&&r.virtualInfo&&r.virtualInfo.direction==="down"&&(i.parent.contentModule.prevInfo=r.virtualInfo),i.parent.groupModule&&r.preventFocusOnGroup&&(i.parent.groupModule.preventFocusOnGroup=r.preventFocusOnGroup),t.allowSelection&&(r.action==="clearFilter"||r.action==="clear-filter"||r.requestType==="searching"&&r.searchString===""||r.action==="add")&&(t.selectionModule.rmtHdrChkbxClicked=!1,t.selectionModule.isPartialSelection&&(t.selectionModule.isHdrSelectAllClicked=!1)),t.allowPaging&&t.pageSettings.pageSizes&&t.pagerModule.pagerObj.isAllPage&&r.action==="add"&&r.requestType==="save"&&t.pagerModule.pagerObj.checkAll&&t.setProperties({pageSettings:{pageSize:t.pageSettings.pageSize+1}},!0),r.requestType==="delete"&&t.allowPaging){var d=r.data.length,u=t.pageSettings.totalRecordsCount-d,f=t.getCurrentViewRecords().length;(!(f-d)&&u&&(t.pageSettings.currentPage-1)*t.pageSettings.pageSize===u||u&&u<=d)&&(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:u,currentPage:Math.ceil(u/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=u)}r.requestType==="reorder"&&i.parent.dataSource&&"result"in i.parent.dataSource||(r.requestType==="paging"||r.requestType==="columnstate"||r.requestType==="reorder")&&i.parent.groupSettings.enableLazyLoading&&i.parent.groupSettings.columns.length&&(i.parent.enableVirtualization?i.parent.lazyLoadRender:i.parent.contentModule).getGroupCache()[i.parent.pageSettings.currentPage]?i.contentRenderer.refreshContentRows(r):i.refreshDataManager(r)})},s.prototype.resetTemplates=function(){var e=this.parent,i=e.getColumns();if(e.detailTemplate){var t=e.element.id+"detailTemplate";jn[""+t]=[],je(t)}e.groupSettings.captionTemplate&&je(e.element.id+"captionTemplate"),e.rowTemplate&&je(e.element.id+"rowTemplate"),e.toolbarTemplate&&je(e.element.id+"toolbarTemplate"),e.pageSettings.template&&je(e.element.id+"_template");for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].template&&(jn[e.element.id+i[parseInt(r.toString(),10)].uid]=[],je(e.element.id+i[parseInt(r.toString(),10)].uid)),i[parseInt(r.toString(),10)].headerTemplate&&je(e.element.id+i[parseInt(r.toString(),10)].uid+"headerTemplate"),i[parseInt(r.toString(),10)].filterTemplate&&je(e.element.id+i[parseInt(r.toString(),10)].uid+"filterTemplate");for(var n="guid",o=0;o<e.aggregates.length;o++)for(var a=0;a<e.aggregates[parseInt(o.toString(),10)].columns.length;a++){if(e.aggregates[parseInt(o.toString(),10)].columns[parseInt(a.toString(),10)].footerTemplate){var l=e.element.id+e.aggregates[parseInt(o.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"footerTemplate";je(l)}if(e.aggregates[parseInt(o.toString(),10)].columns[parseInt(a.toString(),10)].groupFooterTemplate){var l=e.element.id+e.aggregates[parseInt(o.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"groupFooterTemplate";je(l)}if(e.aggregates[parseInt(o.toString(),10)].columns[parseInt(a.toString(),10)].groupCaptionTemplate){var l=e.element.id+e.aggregates[parseInt(o.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"groupCaptionTemplate";je(l)}}},s.prototype.refreshComplete=function(e){this.parent.trigger(Me,e)},s.prototype.refreshDataManager=function(e){var i=this;e===void 0&&(e={});var t=this.parent,r=t.loadingIndicator.indicatorType==="Shimmer"&&e.requestType!=="virtualscroll"&&e.requestType!=="infiniteScroll"||(e.requestType==="virtualscroll"||e.requestType==="infiniteScroll")&&t.enableVirtualMaskRow;e.requestType!=="virtualscroll"&&!e.isCaptionCollapse&&!r&&this.parent.showSpinner(),r&&t.showMaskRow(e.requestType==="virtualscroll"?e.virtualInfo.sentinelInfo.axis:e.requestType==="infiniteScroll"?e.direction:void 0),this.parent.notify(Rl,e),this.emptyGrid=!1;var n,o=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+ve),!0),o){var a=new rt;n=this.getFData(a,e)}n?n=n.then(function(d){var u=i.data.generateQuery().requiresCount();if(i.emptyGrid){var f=new rt;return f.resolve({result:[],count:0}),f.promise}return i.data.getData(e,u)}):(t.allowPaging&&!t.getDataModule().dataManager.dataSource.offline&&t.pageSettings&&t.pageSettings.pageSizes&&t.pagerModule&&t.pagerModule.pagerObj&&t.pagerModule.pagerObj.isAllPage&&(t.pagerModule.pagerObj.isAllPage=void 0),n=this.data.getData(e,this.data.generateQuery().requiresCount()));var l=this.parent.getForeignKeyColumns(),h=l.length;if(this.parent.columnQueryMode==="ExcludeHidden"&&h&&(h=l.filter(function(d){return d.visible!==!1}).length),h&&(!o||this.parent.searchSettings.key.length)){var p=new rt;n=n.then(function(d){return i.parent.notify(Es,{dataManager:n,result:d,promise:p,action:e}),p.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(n=n.then(function(d){return i.validateGroupRecords(d)})),n.then(function(d){return i.dataManagerSuccess(d,e)}).catch(function(d){return i.dataManagerFailure(d,e)})},s.prototype.getFData=function(e,i){return this.parent.notify(Es,{isComplex:!0,promise:e,action:i}),e.promise},s.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||!c(e.searchSettings.key)&&e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},s.prototype.foreignKey=function(e){var i=this;return e.some(function(t){var r=!1;return r=i.parent.filterSettings.columns.some(function(n){return t.uid===n.uid}),!!(r||i.parent.searchSettings.key.length)})},s.prototype.sendBulkRequest=function(e){var i=this;e.requestType="batchsave";var t=this.parent;if(t.allowPaging&&t.pageSettings.pageSizes&&t.pagerModule.pagerObj.isAllPage&&t.pagerModule.pagerObj.checkAll){var r=e.changes.addedRecords.length;r&&t.setProperties({pageSettings:{pageSize:t.pageSettings.pageSize+r}},!0)}t.allowPaging&&(e.changes.addedRecords.length||e.changes.deletedRecords.length||e.changes.changedRecords.length)&&t.pageSettings&&t.pageSettings.pageSizes&&t.pagerModule&&t.pagerModule.pagerObj&&!t.getDataModule().dataManager.dataSource.offline&&t.pagerModule.pagerObj.isAllPage&&(t.pagerModule.pagerObj.isAllPage=void 0);var n=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),o=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline){this.refreshDataManager({requestType:"batchsave"});return}else n.then(function(a){i.data.getData(e,o).then(function(l){return i.dmSuccess(l,e)}).catch(function(l){return i.dmFailure(l,e)})}).catch(function(a){return i.dmFailure(a,e)})},s.prototype.dmSuccess=function(e,i){this.dataManagerSuccess(e,i)},s.prototype.dmFailure=function(e,i){this.dataManagerFailure(e,i)},s.prototype.renderEmptyRow=function(){this.emptyRow(!0)},s.prototype.emptyRow=function(e){var i=this.parent,t=this.contentRenderer.getTable().querySelector(j);c(t)||q(t),t=this.parent.createElement(j,{attrs:{role:"rowgroup"}});var r=i.allowRowDragAndDrop&&c(i.rowDropSettings.targetID)?1:0;(i.detailTemplate||i.childGrid)&&++r;var n=i.editSettings.showAddNewRow&&i.editSettings.newRowPosition==="Bottom"?"e-emptyrow e-show-added-row":"e-emptyrow",o=this.parent.createElement("tr",{className:n,attrs:{role:"row"}}),a;if(i.emptyRecordTemplate){var l=i.element.id+"emptyRecordTemplate";a=this.parent.createElement("td",{attrs:{colspan:(i.getVisibleColumns().length+r+i.groupSettings.columns.length).toString()}}),i.isVue||i.parentDetails&&i.parentDetails.parentInstObj&&i.parentDetails.parentInstObj.isVue?a.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[1]):a.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[0]),i.isReact&&this.parent.renderTemplates()}else a=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(i.getVisibleColumns().length+r+(c(i.groupSettings.columns)?0:i.groupSettings.columns.length)).toString()}});i.isFrozenGrid()&&(a.classList.add("e-leftfreeze"),a.style.left="0px"),i.frozenRows&&i.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),o.appendChild(a),t.appendChild(o),this.contentRenderer.renderEmpty(t),e&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(xt,{}),this.parent.notify(ot,{rows:[new ri({isDataRow:!0,cells:[new bi({isDataCell:!0,visible:!0})]})]}),i.editSettings.showAddNewRow&&(i.addRecord(),this.parent.notify(Jt,{})))},s.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},s.prototype.updateColumnType=function(e){for(var i=this.parent.getColumns(),t,r="customFormat",n="equalTo",o=e&&e.items?e.items[0]:e,a=this.locator.getService("valueFormatter"),l=0,h=i.length;l<h;l++){t=yt(i[parseInt(l.toString(),10)].field||"",o),c(i[parseInt(l.toString(),10)][""+r])||(i[parseInt(l.toString(),10)].format=i[parseInt(l.toString(),10)][""+r]),!c(i[parseInt(l.toString(),10)].validationRules)&&!c(i[parseInt(l.toString(),10)].validationRules[""+n])&&(i[parseInt(l.toString(),10)].validationRules[""+n][0]=this.parent.element.id+i[parseInt(l.toString(),10)].validationRules[""+n][0]),i[parseInt(l.toString(),10)].isForeignColumn()&&i[parseInt(l.toString(),10)].columnData&&(t=yt(i[parseInt(l.toString(),10)].foreignKeyValue||"",i[parseInt(l.toString(),10)].columnData[0])),c(t)?i[parseInt(l.toString(),10)].type=i[parseInt(l.toString(),10)].type||null:(this.isColTypeDef=!0,i[parseInt(l.toString(),10)].type||(i[parseInt(l.toString(),10)].type=t.getDay?t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0?"datetime":"date":typeof t));var p=new xi;i[parseInt(l.toString(),10)].format&&(i[parseInt(l.toString(),10)].format.skeleton||i[parseInt(l.toString(),10)].format.format&&typeof i[parseInt(l.toString(),10)].format.format=="string")&&(i[parseInt(l.toString(),10)].setFormatter(p.getFormatFunction(W({},i[parseInt(l.toString(),10)].format))),i[parseInt(l.toString(),10)].setParser(p.getParserFunction(i[parseInt(l.toString(),10)].format))),typeof i[parseInt(l.toString(),10)].format=="string"?Cn(this.locator,i[parseInt(l.toString(),10)]):!i[parseInt(l.toString(),10)].format&&i[parseInt(l.toString(),10)].type==="number"&&i[parseInt(l.toString(),10)].setParser(a.getParserFunction({format:"n2"})),i[parseInt(l.toString(),10)].type==="dateonly"&&!i[parseInt(l.toString(),10)].format&&(i[parseInt(l.toString(),10)].format="yMd",Cn(this.locator,i[parseInt(l.toString(),10)]))}},s.prototype.dataManagerSuccess=function(e,i){var t=this,r=this.parent;this.contentRenderer=this.renderer.getRenderer(ze.Content),this.headerRenderer=this.renderer.getRenderer(ze.Header),e.actionArgs=i;var n=!!(r.childGrid||r.detailTemplate),o=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&(i.requestType==="delete"&&!n||i.requestType==="save"&&this.parent.infiniteScrollModule.requestType==="add"&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key||n));r.trigger(Na,e,function(a){if(!a.cancel){a.result=c(a.result)?[]:a.result;var l=Object.keys(a.result).length;if(!t.parent.isDestroyed){if(!r.getColumns().length&&!l&&!(r.columns.length&&r.columns[0]instanceof de)){r.hideSpinner();return}if(t.isInfiniteEnd(i)&&!l){t.parent.notify(Os,{e:i,result:e.result,count:e.count,agg:e.aggregates});return}if(t.parent.isEdit=!1,t.parent.notify(bl,{}),t.parent.notify(ln,{}),i&&!((i.requestType==="infiniteScroll"||i.requestType==="delete"||i.action==="add")&&r.enableInfiniteScrolling)&&t.parent.notify(th,{type:"refreshCommandColumn"}),t.contentRenderer.prevCurrentView=!c(t.parent.currentViewData)&&t.parent.currentViewData.slice(),r.currentViewData=a.result,r.notify(Nl,{args:i,data:a.result}),a.count&&!r.allowPaging&&(r.enableVirtualization||r.enableInfiniteScrolling)&&(r.totalDataRecordsCount=a.count),!l&&a.count&&r.allowPaging&&i&&i.requestType!=="delete"){t.parent.groupSettings.enableLazyLoading&&(i.requestType==="grouping"||i.requestType==="ungrouping")&&t.parent.notify(Qa,i),r.prevPageMoving=!0,r.pageSettings.totalRecordsCount=a.count,i.requestType!=="paging"&&(r.pageSettings.currentPage=Math.ceil(a.count/r.pageSettings.pageSize)),r.dataBind();return}if((!r.getColumns().length&&l||!t.isLayoutRendered)&&!nt(r)&&(r.removeMaskRow(),t.updatesOnInitialRender(a)),!t.isColTypeDef&&r.getCurrentViewRecords()&&(t.data.dataManager.dataSource.offline&&r.dataSource&&r.dataSource.length?t.updateColumnType(r.dataSource[0]):t.updateColumnType(r.getCurrentViewRecords()[0])),!t.parent.isInitialLoad&&t.parent.groupSettings.disablePageWiseAggregates&&!t.parent.groupSettings.columns.length&&(a.result=t.parent.dataSource instanceof Array?t.parent.dataSource:t.parent.currentViewData),(t.parent.isReact||t.parent.isVue)&&!c(i)&&i.requestType!=="infiniteScroll"&&!i.isFrozen&&dr(t.parent,["footerTemplate"]),t.parent.isAngular&&t.parent.allowGrouping&&t.parent.groupSettings.captionTemplate&&!(!c(i)&&i.requestType==="infiniteScroll")&&t.parent.destroyTemplate(["groupSettings_captionTemplate"]),t.parent.notify(Si,W({count:a.count,result:a.result,aggregates:a.aggregates,loadSummaryOnEmpty:!1},i)),(r.groupSettings.columns.length||i&&i.requestType==="ungrouping")&&i&&i.requestType!=="filtering"&&t.headerRenderer.refreshUI(),l){if(nt(r)){var h="content";i.scrollTop={top:t.contentRenderer[""+h].scrollTop}}o?t.parent.notify(Os,{e:i,result:e.result,count:e.count,agg:e.aggregates}):t.parent.enableImmutableMode?t.contentRenderer.immutableModeRendering(i):t.contentRenderer.refreshContentRows(i)}else{if(i&&i.isCaptionCollapse)return;if(!r.getColumns().length){r.element.innerHTML="",alert(t.l10n.getConstant("EmptyDataSourceError"));return}if(t.contentRenderer.setRowElements([]),t.contentRenderer.setRowObjects([]),t.ariaService.setBusy(t.parent.getContent().querySelector("."+ve),!1),r.removeMaskRow(),t.renderEmptyRow(),r.enableColumnVirtualization&&!l&&t.parent.notify(pe,{rows:r.getRowsObject(),args:{}}),i){var p=(i.requestType||"").toLowerCase()+"-complete";t.parent.notify(p,i),i.requestType==="batchsave"&&(i.cancel=!1,i.rows=[],i.isFrozen=!i.isFrozen,t.parent.trigger(Me,i))}t.parent.autoFit&&t.parent.preventAdjustColumns(),t.parent.hideSpinner()}t.parent.notify(il,{}),t.setRowCount(t.parent.getCurrentViewRecords().length),"query"in e&&(t.parent.getDataModule().isQueryInvokedFromData=!1)}}})},s.prototype.dataManagerFailure=function(e,i){c(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+ve),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger(Ta,e&&e.error?e:{error:e}),this.parent.hideSpinner(),this.parent.removeMaskRow(),!(i.requestType==="save"||i.requestType==="delete"||i.name==="bulk-save")&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:e}))},s.prototype.setRowCount=function(e){this.ariaService.setOptions(this.parent.element,{rowcount:e?e.toString():"1"})},s.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&e.requestType==="delete"},s.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0;var i=!1;this.parent.columns.length<1&&(this.buildColumns(e.result[0]),i=!0),lr(this.parent.columns,null,this.parent),i&&this.parent.notify(gn,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Ci,{})},s.prototype.iterateComplexColumns=function(e,i,t){for(var r=Object.keys(e),n=0;n<r.length;n++){var o=typeof e[r[parseInt(n.toString(),10)]]=="object"&&e[r[parseInt(n.toString(),10)]]&&!(e[r[parseInt(n.toString(),10)]]instanceof Date)?Object.keys(e[r[parseInt(n.toString(),10)]]):[];o.length?this.iterateComplexColumns(e[r[parseInt(n.toString(),10)]],i+(r[parseInt(n.toString(),10)]+"."),t):(t[this.counter]=i+r[parseInt(n.toString(),10)],this.counter++)}},s.prototype.buildColumns=function(e){var i=[],t={};this.iterateComplexColumns(e,"",t);for(var r=Object.keys(t).filter(function(a){return t[""+a]!=="BlazId"}).map(function(a){return t[""+a]}),n=0,o=r.length;n<o;n++)i[parseInt(n.toString(),10)]={field:r[parseInt(n.toString(),10)]},this.parent.enableColumnVirtualization&&(i[parseInt(n.toString(),10)].width=c(i[parseInt(n.toString(),10)].width)?200:i[parseInt(n.toString(),10)].width);this.parent.setProperties({columns:i},!0)},s.prototype.instantiateRenderer=function(){this.renderer.addRenderer(ze.Header,new fh(this.parent,this.locator)),this.renderer.addRenderer(ze.Content,new uh(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(A.Header,new xo(this.parent,this.locator)),e.addCellRenderer(A.Data,new Pe(this.parent,this.locator)),e.addCellRenderer(A.StackedHeader,new Ws(this.parent,this.locator)),e.addCellRenderer(A.Indent,new yn(this.parent,this.locator)),e.addCellRenderer(A.GroupCaption,new yh(this.parent,this.locator)),e.addCellRenderer(A.GroupCaptionEmpty,new Sh(this.parent,this.locator)),e.addCellRenderer(A.Expand,new bh(this.parent,this.locator)),e.addCellRenderer(A.HeaderIndent,new Ih(this.parent,this.locator)),e.addCellRenderer(A.StackedHeader,new Ws(this.parent,this.locator)),e.addCellRenderer(A.DetailHeader,new xh(this.parent,this.locator)),e.addCellRenderer(A.RowDragHIcon,new Eh(this.parent,this.locator)),e.addCellRenderer(A.DetailExpand,new Fh(this.parent,this.locator)),e.addCellRenderer(A.DetailFooterIntent,new yn(this.parent,this.locator)),e.addCellRenderer(A.RowDragIcon,new Th(this.parent,this.locator))},s.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(lo,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(nr,this.refresh,this),this.parent.on(el,this.refreshComplete,this),this.parent.on(rl,this.sendBulkRequest,this),this.parent.on(uo,function(){e.emptyGrid=!0},this),this.parent.on(Ci,this.dynamicColumnChange,this))},s.prototype.validateGroupRecords=function(e){var i=this,t=e.result.length-1;if(t<0)return Promise.resolve(e);var r=e.result[0],n=e.result[parseInt(t.toString(),10)],o=[],a=function(S){for(var y=[r,n],R=0;R<y.length;R++)o.push(new se("field","==",y[parseInt(R.toString(),10)].field).and(i.getPredicate("key","equal",y[parseInt(R.toString(),10)].key)));S.where(se.or(o))},l=new he;a(l);var h=new _(e.result),p=h.executeLocal(l),d=this.data.generateQuery(!0),u=[];if(this.data.isRemote()){for(var f=[r,n],g=0;g<f.length;g++)u.push(this.getPredicate(f[parseInt(g.toString(),10)].field,"equal",f[parseInt(g.toString(),10)].key));d.where(se.or(u))}else a(d);var m=new rt;return this.data.getData({},d).then(function(S){i.updateGroupInfo(p,S.result),m.resolve(e)}).catch(function(S){return m.reject(S)}),m.promise},s.prototype.getPredicate=function(e,i,t){return t instanceof Date?Pt({field:e,operator:i,value:t}):new se(e,i,t)},s.prototype.updateGroupInfo=function(e,i){for(var t=new _(i),r=e,n=0;n<r.length;n++){var o=t.executeLocal(new he().where(new se("field","==",r[parseInt(n.toString(),10)].field).and(this.getPredicate("key","equal",r[parseInt(n.toString(),10)].key))))[0];if(!c(o)){r[parseInt(n.toString(),10)].count=o.count;var a=r[parseInt(n.toString(),10)].items,l=o.items;a.GroupGuid&&(r[parseInt(n.toString(),10)].items=this.updateGroupInfo(r[parseInt(n.toString(),10)].items,o.items));for(var h=this.parent.aggregates,p=0;p<h.length;p++)for(var d=h[parseInt(p.toString(),10)],u=0;u<d.columns.length;u++)for(var f=d.columns[parseInt(u.toString(),10)],g=f.type instanceof Array?f.type:[f.type],m=0;m<g.length;m++){var S=f.field+" - "+g[parseInt(m.toString(),10)].toLowerCase(),y=a.level?l.records:o.items,R=this.parent;if(g[parseInt(m.toString(),10)]==="Custom"){var w=a.level?l:o,F=f.customAggregate;typeof F=="string"&&(F=Z(F,window)),r[parseInt(n.toString(),10)].aggregates[""+S]=F?F.call(R,w,d.columns[parseInt(u.toString(),10)]):""}else r[parseInt(n.toString(),10)].aggregates[""+S]=fe.aggregates[g[parseInt(m.toString(),10)].toLowerCase()](y,d.columns[parseInt(u.toString(),10)].field)}}}return e},s}(),Lh=function(){function s(){this.cellRenderMap={}}return s.prototype.addCellRenderer=function(e,i){e=typeof e=="string"?e:wt(A,e),c(this.cellRenderMap[""+e])&&(this.cellRenderMap[""+e]=i)},s.prototype.getCellRenderer=function(e){if(e=typeof e=="string"?e:wt(A,e),c(this.cellRenderMap[""+e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[""+e]},s}(),zh=function(){function s(e,i){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=i,this.addEventListener()}return s.prototype.addEventListener=function(){this.evtHandlers=[{event:yo,handler:this.closeCustomDialog},{event:fn,handler:this.refreshCustomFilterOkBtn},{event:Gl,handler:this.renderResponsiveContextMenu},{event:_l,handler:this.renderCustomFilterDiv},{event:Wl,handler:this.customExFilterClose},{event:Vl,handler:this.refreshCustomFilterClearBtn}],Ft(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Me,this.onActionCompleteFn)},s.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},s.prototype.renderCustomFilterDiv=function(){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),i=e.querySelector(".e-dlg-custom-header"),t=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",t.style.display="",i.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var r=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),r.appendChild(this.customExcelFilterParent)},s.prototype.renderResponsiveContextMenu=function(e){if(this.action===P.isFilter){var i=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),r=t.querySelector(".e-dlg-closeicon-btn"),n=t.querySelector(".e-dlg-custom-header");if(e.isOpen){i.firstChild.style.display="none",i.appendChild(e.target),r.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;var o=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});o.appendChild(a),this.backBtn=new Bt({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(o),n.parentElement.insertBefore(o,n)}else this.backBtn&&!this.isCustomDlgRender&&(i.firstChild.style.display="",q(this.backBtn.element),r.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:P.isFilter},e.col))}},s.prototype.refreshCustomFilterClearBtn=function(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")},s.prototype.refreshCustomFilterOkBtn=function(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=e.disabled)},s.prototype.columnMenuResponsiveContent=function(e,i,t){var r=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+e.toLowerCase()+"div"+(t?" e-disabled":"")}),n=this.parent.createElement("span",{className:"e-icons e-res"+e.toLowerCase()+"-icon e-btn-icon"}),o=this.parent.createElement("span",{innerHTML:i,className:"e-rescolumn-menu e-res-header-text"});r.appendChild(n),r.appendChild(o),this.customColumnDiv.appendChild(r)},s.prototype.renderResponsiveContent=function(e,i){var t=this,r=this.parent,n=this.action===P.isColumnChooser;if(e||n)return this.filterParent=this.parent.createElement("div",{className:(n?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(n?"columchooser":e.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=r.createElement("div",{className:"columndiv columnmenudiv"}),this.customColumnDiv.style.width="100%",this.parent.showColumnMenu&&this.parent.rowRenderingMode==="Horizontal"&&this.action===P.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",r.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",r.localeObj.getConstant("AutoFit")),i.allowGrouping&&r.allowGrouping&&(this.columnMenuResponsiveContent("Group",r.localeObj.getConstant("Group"),r.groupSettings.columns.indexOf(i.field)>=0),this.columnMenuResponsiveContent("UnGroup",r.localeObj.getConstant("Ungroup"),r.groupSettings.columns.indexOf(i.field)<0)),i.allowSorting&&r.allowSorting){for(var o="None",a=this.parent.sortSettings.columns,l=0;l<a.length;l++)if(a[parseInt(l.toString(),10)].field===i.field){o=a[parseInt(l.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",r.localeObj.getConstant("SortAscending"),o==="Ascending"),this.columnMenuResponsiveContent("descending",r.localeObj.getConstant("SortDescending"),o==="Descending")}r.showColumnChooser&&this.columnMenuResponsiveContent("Column",r.localeObj.getConstant("Columnchooser")),i.allowFiltering&&r.allowFiltering&&this.columnMenuResponsiveContent("Filter",r.localeObj.getConstant("FilterMenu"))}else{var h=r.getColumns(),p=r.createElement("div",{className:"e-ressortbutton-parent"}),d=[],u=this.action===P.isSort,f=this.action===P.isFilter;if(f)for(var l=0;l<r.filterSettings.columns.length;l++)d.push(r.filterSettings.columns[parseInt(l.toString(),10)].field);for(var l=0;l<h.length;l++)if(!(!h[parseInt(l.toString(),10)].visible||!h[parseInt(l.toString(),10)].allowSorting&&u||!h[parseInt(l.toString(),10)].allowFiltering&&f)){var g=r.createElement("div",{className:"e-responsivecoldiv"});g.setAttribute("data-e-mappingname",h[parseInt(l.toString(),10)].field),g.setAttribute("data-e-mappinguid",h[parseInt(l.toString(),10)].uid);var m=r.createElement("span",{innerHTML:h[parseInt(l.toString(),10)].headerText,className:"e-res-header-text"});if(g.appendChild(m),this.customColumnDiv.appendChild(g),u){var S=this.getSortedFieldsAndDirections("field"),y=S.indexOf(h[parseInt(l.toString(),10)].field),R=r.createElement("button",{id:r.element.id+h[parseInt(l.toString(),10)].field+"sortbutton"}),w=p.cloneNode();w.appendChild(R),g.appendChild(w);var F=new Bt({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"});F.appendTo(R);var L=void 0;c(this.parent.sortSettings.columns[parseInt(y.toString(),10)])||(L=this.parent.sortSettings.columns[parseInt(y.toString(),10)].direction==="Ascending"?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),R.innerHTML=y>-1?L:this.parent.localeObj.getConstant("NoneText"),R.onclick=function(B){t.sortButtonClickHandler(B.target)}}if(f&&d.indexOf(h[parseInt(l.toString(),10)].field)>-1){var k=r.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),z=r.createElement("span",{className:"e-icons e-res-icon e-filterset"});z.setAttribute("colType",h[parseInt(l.toString(),10)].type),k.appendChild(z),g.appendChild(k)}}}return I.add(this.customColumnDiv,O.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},s.prototype.getSortedFieldsAndDirections=function(e){for(var i=[],t=0;t<this.parent.sortSettings.columns.length;t++)i.push(this.parent.sortSettings.columns[parseInt(t.toString(),10)][""+e]);return i},s.prototype.sortButtonClickHandler=function(e){if(e){var i=b(e,"e-responsivecoldiv"),t=i.getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));var r=e.textContent,n=r===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):r===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),o=n===this.parent.localeObj.getConstant("AscendingText")?"Ascending":n===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";e.innerHTML=n,this.setSortedCols(t,o)}},s.prototype.resetSortButtons=function(e){for(var i=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),t=0;t<i.length;t++)i[parseInt(t.toString(),10)]!==e&&(i[parseInt(t.toString(),10)].innerHTML=this.parent.localeObj.getConstant("NoneText"))},s.prototype.setSortedCols=function(e,i){var t=this.getCurrentSortedFields(),r=t.indexOf(e);this.parent.allowMultiSorting&&r>-1&&(this.sortedCols.splice(r,1),this.sortPredicate.splice(r,1)),this.isSortApplied=!0,i!=="None"&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:i}))},s.prototype.getCurrentSortedFields=function(){for(var e=[],i=0;i<this.sortedCols.length;i++)e.push(this.sortedCols[parseInt(i.toString(),10)]);return e},s.prototype.customFilterColumnClickHandler=function(e){var i=this.parent,t=e.target;if(b(t,"columnmenudiv")&&this.action===P.isColMenu&&!b(t,"e-disabled")){var r=this.menuCol?this.menuCol:this.filteredCol;b(t,"e-responsiveautofitalldiv")?(i.autoFitColumns([]),this.closeCustomFilter()):b(t,"e-responsiveautofitdiv")?(i.autoFitColumns(r.field),this.closeCustomFilter()):b(t,"e-responsivegroupdiv")?(i.groupColumn(r.field),this.closeCustomFilter()):b(t,"e-responsiveungroupdiv")?(i.ungroupColumn(r.field),this.closeCustomFilter()):b(t,"e-responsiveascendingdiv")?(i.sortColumn(r.field,"Ascending"),this.closeCustomFilter()):b(t,"e-responsivedescendingdiv")?(i.sortColumn(r.field,"Descending"),this.closeCustomFilter()):b(t,"e-responsivecolumndiv")?(i.notify(Oi,{action:5}),i.showResponsiveCustomColumnChooser()):b(t,"e-responsivefilterdiv")&&(i.notify(Oi,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,i.filterModule&&i.filterModule.responsiveDialogRenderer.showResponsiveDialog(r)),e.preventDefault()}if(this.action===P.isFilter&&i.filterSettings.type!=="FilterBar"){if(t.classList.contains("e-responsivecoldiv")||t.parentElement.classList.contains("e-responsivecoldiv")){var n=t.getAttribute("data-e-mappingname");if(n||(n=t.parentElement.getAttribute("data-e-mappingname")),n){var o=i.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(o)}}else if(t.classList.contains("e-filterset")||t.parentElement.classList.contains("e-filtersetdiv")){var a=b(t,"e-responsivecoldiv");if(a){var n=a.getAttribute("data-e-mappingname"),o=i.getColumnByField(n);(o.filter.type==="Menu"||!o.filter.type&&i.filterSettings.type==="Menu")&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(o),this.removeCustomDlgFilterEle(t)}}}},s.prototype.showResponsiveDialog=function(e,i){if(this.isCustomDialog&&this.action===P.isFilter&&!this.isRowResponsive||i&&this.action===P.isColMenu)this.menuCol=i,this.renderCustomFilterDialog(null,i);else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===P.isColumnChooser&&this.parent.notify(Kr,{action:"open"}),this.action===P.isSort){var t={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(Rs,t),t.cancel)return}if(this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element),this.parent.enableAdaptiveUI&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel")&&this.parent.filterSettings.enableInfiniteScrolling&&this.parent.filterSettings.loadingIndicator==="Shimmer"){var r=this.parent.filterSettings.type==="CheckBox"?this.parent.filterModule.filterModule.checkBoxBase:this.parent.filterModule.filterModule.excelFilterBase;r.showMask()}}},s.prototype.setTopToChildDialog=function(e){var i=e.querySelector(".e-dialog");if(i){var t=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;i.style.top=t+"px"}},s.prototype.renderCustomFilterDialog=function(e,i){var t=this.parent,r=this.action===P.isColMenu;if(!(this.action===P.isFilter&&t.filterSettings.type==="FilterBar")){var n=r?"e-customcolumnmenudiv ":"",o=this.parent.createElement("div",{id:t.element.id+(r?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?n+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:n+"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(o),this.customFilterDlg=this.getDialogOptions(e,!0,null,i);var a={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(Rs,a),!a.cancel&&(this.customFilterDlg.appendTo(o),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},s.prototype.getDialogOptions=function(e,i,t,r){var n=new Dn({isModal:!0,showCloseIcon:!(t==="columnchooser"&&this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization),closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e,r),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),o="isStringTemplate";if(n[""+o]=!0,i){n.header=this.renderResponsiveHeader(e,void 0,!0);var a=this.action===P.isColMenu?"e-customcolumnmenu ":"";n.cssClass=a+"e-customfilter"}else n.header=this.renderResponsiveHeader(e),n.cssClass=this.parent.rowRenderingMode==="Vertical"&&this.action===P.isFilter?"e-res"+t+" e-row-responsive-filter":"e-res"+t;return n},s.prototype.renderResponsiveDialog=function(e){var i=this.parent;if(!(this.action===P.isFilter&&i.filterSettings.type==="FilterBar")){var t=this.action===P.isFilter?"filter":"sort";t=this.action===P.isColumnChooser?"columnchooser":t;var r=this.parent.createElement("div",{id:i.element.id+"responsive"+t,className:this.parent.cssClass?"e-res"+t+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+t+"div e-responsive-dialog"});this.parent.element.appendChild(r),this.customResponsiveDlg=this.getDialogOptions(e,!1,t),this.customResponsiveDlg.appendTo(r)}},s.prototype.dialogCreated=function(){Vp(this.parent)},s.prototype.dialogOpen=function(){if(this.action===P.isSort&&this.parent.allowMultiSorting)for(var e=0;e<this.parent.sortSettings.columns.length;e++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(e.toString(),10)].field);var i=this.parent.sortSettings.columns[parseInt(e.toString(),10)].field,t=this.parent.sortSettings.columns[parseInt(e.toString(),10)].direction;this.sortPredicate.push({field:i,direction:t})}},s.prototype.beforeDialogClose=function(e){if(this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===P.isFilter){if(e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu){this.parent.notify(Oi,{action:4});var i=document.querySelector(".e-resfilter");i&&q(i)}}else if(this.action===P.isSort)this.closeCustomDialog();else if(this.action===P.isColMenu){this.closeCustomFilter();var i=document.querySelector(".e-rescolummenu");i&&q(i)}else if(this.action===P.isColumnChooser){this.parent.notify(Kr,{action:"clear"});var i=document.querySelector(".e-rescolumnchooser");i&&q(i),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu&&this.parent.notify(Oi,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1}this.parent.off(Qi,this.keyHandler)},s.prototype.sortColumn=function(){if(!this.isSortApplied){this.closeCustomDialog();return}this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[parseInt(e.toString(),10)].field,this.sortPredicate[parseInt(e.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()},s.prototype.getHeaderTitle=function(e,i){var t=this.parent,r;return this.action===P.isEdit?r=t.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===P.isAdd?r=t.localeObj.getConstant("AddFormTitle"):this.action===P.isFilter?r=i?i.headerText||i.field:t.localeObj.getConstant("FilterTitle"):this.action===P.isSort?r=t.localeObj.getConstant("Sort"):this.action===P.isColMenu?r=t.localeObj.getConstant("ColumnMenu"):this.action===P.isColumnChooser&&(r=t.localeObj.getConstant("ChooseColumns")),r},s.prototype.getDialogName=function(e){var i;return e===P.isAdd||e===P.isEdit?i="dialogEdit_wrapper_title":e===P.isFilter?i="responsive_filter_dialog_wrapper":e===P.isColumnChooser&&(i="responsive_column_chooser_dialog_wrapper"),i},s.prototype.getButtonText=function(e){var i;return e===P.isAdd||e===P.isEdit?i="Save":(e===P.isFilter||this.action===P.isSort||e===P.isColumnChooser||this.action===P.isColumnChooser)&&(i="OKButton"),i},s.prototype.renderResponsiveHeader=function(e,i,t){var r=this,n=this.parent;n.on(Qi,this.keyHandler,this);var o=n.element.id+this.getDialogName(this.action);if(this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization&&this.getHeaderTitle(i,e)===n.localeObj.getConstant("ChooseColumns")){var a=this.parent.columnChooserModule.renderHeader();return a}var l=n.createElement("div",{className:"e-res-custom-element"}),h=n.createElement("div",{className:"e-dlg-custom-header",id:o});h.innerHTML=this.getHeaderTitle(i,e),l.appendChild(h);var p=n.createElement("button");t||(this.saveBtn=new Bt({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),p.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(p),p.onclick=function(S){r.dialogHdrBtnClickHandler()});var d=this.action===P.isSort,u=this.action===P.isFilter;if(u||d){var f=d?"sort":"filter",g=n.createElement("button");if(this.filterClearBtn=new Bt({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+f+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+f+"-clear-btn"}),u){var m=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});g.appendChild(m)}else g.innerHTML=n.localeObj.getConstant("Clear");l.appendChild(g),this.filterClearBtn.appendTo(g),g.onclick=function(S){b(S.target,"e-customfilter")?(r.parent.filterModule.clearFiltering(),r.removeCustomDlgFilterEle()):u?r.filterClear():(r.resetSortButtons(),r.sortedCols=[],r.sortPredicate=[],r.isSortApplied=!0)},l.appendChild(g)}return t||l.appendChild(p),l},s.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},s.prototype.removeCustomFilterElement=function(){var e=document.getElementById(this.parent.element.id+"customcolumnmenu");if(e){q(e);var i=document.querySelector(".e-customfilter");i&&q(i)}var t=document.querySelector(".e-rescolumnchooser");t&&q(t)},s.prototype.hideResponsiveColumnChooser=function(){var e=document.querySelector(".e-rescolumnchooser");e&&(q(e),this.isCustomDialog=!1,this.isDialogClose=!1)},s.prototype.dialogHdrBtnClickHandler=function(){this.action===P.isEdit||this.action===P.isAdd?this.parent.endEdit():this.action===P.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===P.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===P.isColumnChooser&&(this.parent.notify(Kr,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},s.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");q(e);return}this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},s.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),q(e)),this.closeCustomFilter(),this.action===P.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},s.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),q(e))}this.isCustomDialog=!1,this.isDialogClose=!1},s.prototype.removeCustomDlgFilterEle=function(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?q(e.parentElement):q(e);else for(var i=this.customColumnDiv.children,t=0;t<i.length;t++)e=i[parseInt(t.toString(),10)].querySelector(".e-filtersetdiv"),e&&(q(e),t--)},s.prototype.keyHandler=function(e){e.keyCode===13&&(this.action===P.isFilter&&e.target.classList.contains("e-searchinput")||this.action===P.isEdit||this.action===P.isAdd)&&this.dialogHdrBtnClickHandler()},s.prototype.editComplate=function(e){(e.requestType==="save"||e.requestType==="cancel")&&this.parent.off(Qi,this.keyHandler)},s.prototype.removeEventListener=function(){this.customColumnDiv&&I.remove(this.customColumnDiv,O.isDevice?"touchend":"click",this.customFilterColumnClickHandler),Ft(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Me,this.onActionCompleteFn)},s}(),Ph=function(){function s(){this.services={}}return s.prototype.register=function(e,i){c(this.services[""+e])&&(this.services[""+e]=i)},s.prototype.getService=function(e){if(c(this.services[""+e]))throw"The service "+e+" is not registered";return this.services[""+e]},s.prototype.registerAdaptiveService=function(e,i,t){i?(e.responsiveDialogRenderer=new zh(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=t):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)},s}(),Bh=function(){function s(){this.rendererMap={}}return s.prototype.addRenderer=function(e,i){var t=wt(ze,e);c(this.rendererMap[""+t])&&(this.rendererMap[""+t]=i)},s.prototype.getRenderer=function(e){var i=wt(ze,e);if(c(this.rendererMap[""+i]))throw"The renderer "+i+" is not found";return this.rendererMap[""+i]},s}(),Pn=function(){function s(e){this.parent=e}return s.prototype.setWidthToColumns=function(){var e=0,i=this.parent.getColumnIndexesInView(),t=!0,r=0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;e<n;e++){if(this.parent.enableColumnVirtualization&&i.indexOf(e)===-1){t=!1;continue}this.setColumnWidth(new de({width:"30px"}),e)}(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new de({width:"30px"}),e),e++),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(this.setColumnWidth(new de({width:"30px"}),e),e++);for(var o=this.parent.getColumns(),a=0;a<o.length;a++)this.setColumnWidth(o[parseInt(a.toString(),10)],t&&this.parent.enableColumnVirtualization?void 0:a+e);if(this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&this.setColumnWidth(new de({width:"30px"}),this.parent.groupSettings.columns.length+o.length),r=this.getTableWidth(this.parent.getColumns()),r!=="auto"){this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(r);var l=o.filter(function(d){return!c(d.maxWidth)}),h=this.parent.getHeaderTable(),p=this.parent.getContentTable();this.parent.allowResizing&&this.parent.element.getBoundingClientRect().width>r&&l.length===o.length&&h&&p&&T([h,p],["e-tableborder"])}},s.prototype.setMinwidthBycalculation=function(e){var i=this,t=0,r=this.parent.getColumns().filter(function(d){return i.parent.allowResizing?(c(d.width)||d.width==="auto")&&c(d.maxWidth):c(d.width)||d.width==="auto"});if(r.length){!c(this.parent.width)&&this.parent.width!=="auto"&&typeof this.parent.width=="string"&&this.parent.width.indexOf("%")===-1?t=parseInt(this.parent.width,10)-e:t=this.parent.element.getBoundingClientRect().width-e;for(var n=0,o=0,a=r;o<a.length;o++){var l=a[o];n+=c(l.minWidth)?0:typeof l.minWidth=="string"?parseInt(l.minWidth,10):l.minWidth}for(var h=0;h<r.length;h++){e===0&&this.parent.allowResizing&&this.isWidthUndefined()&&h!==r.length-1&&this.setUndefinedColumnWidth(r);var p=this.parent.getColumnIndexByField(r[parseInt(h.toString(),10)].field)+this.parent.getIndentCount();e!==0&&t<n?this.setWidth(r[parseInt(h.toString(),10)].minWidth,p):e!==0&&t>n&&this.setWidth("",p,!0)}}},s.prototype.setUndefinedColumnWidth=function(e){for(var i=0;i<e.length;i++)i!==e.length-1&&(e[parseInt(i.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[parseInt(i.toString(),10)].field)))},s.prototype.setColumnWidth=function(e,i,t){if(!(this.parent.getColumns().length<1)){var r=c(i)?this.parent.getNormalizedColumnIndex(e.uid):i,n=this.getWidth(e),o=this.getTableWidth(this.parent.getColumns());if(n!==null){if(this.setWidth(n,r),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&o!=="auto"&&this.setMinwidthBycalculation(o),this.parent.allowResizing&&(t==="resize"||this.parent.getFrozenColumns())){var a=this.parent.getContentTable();this.setWidthToTable(this.parent.getFrozenColumns()&&a.style.width.indexOf("px")===-1&&o<a.clientWidth)}this.parent.notify(po,{index:r,width:n,column:e,module:t})}}},s.prototype.setWidth=function(e,i,t){if(this.parent.groupSettings.columns.length>i&&wn(this.parent)&&!(this.parent.resizeModule&&this.parent.resizeModule.resizeProcess)){var r=this.parent.element.offsetWidth;e=(30/r*100).toFixed(1)+"%"}var n=this.parent.getHeaderTable(),o=this.parent.getContentTable(),a=Ie(e),l=n.querySelector(_e).children[parseInt(i.toString(),10)];l&&!t?l.style.width=a:l&&t&&(l.style.width="");var h=o.querySelector(_e).children[parseInt(i.toString(),10)];if(h&&!t?h.style.width=a:h&&t&&(h.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var p=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),d=[],u=0;u<p.length;u++)if(b(p[parseInt(u.toString(),10)],"e-grid").id===this.parent.element.id)for(var f=0;f<p[parseInt(u.toString(),10)].querySelector("colgroup").children.length;f++)d.push(p[parseInt(u.toString(),10)].querySelector("colgroup").children[parseInt(f.toString(),10)]);p.length&&d.length&&d[parseInt(i.toString(),10)]&&(d[parseInt(i.toString(),10)].style.width=a)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},s.prototype.refreshFrozenScrollbar=function(){var e={cancel:!1};if(this.parent.notify(ql,e),!e.cancel){var i=De(),t=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().firstElementChild.getBoundingClientRect().width;if(this.parent.enableColumnVirtualization){var n=this.parent.getContent().querySelector(".e-virtualtrack");n&&(r=n.scrollWidth)}this.parent.height!=="auto"&&(r=r+i),t.firstElementChild.style.width=r+"px"}},s.prototype.getSiblingsHeight=function(e){var i=this.getHeightFromDirection(e,"previous"),t=this.getHeightFromDirection(e,"next");return i+t},s.prototype.getHeightFromDirection=function(e,i){for(var t=e[i+"ElementSibling"],r=0,n=[Ke,Xi,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];t;)n.some(function(o){return t.classList.contains(o)})&&(r+=t.offsetHeight),t=t[i+"ElementSibling"];return r},s.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter(function(i){return c(i.width)&&c(i.minWidth)}).length;return this.parent.getColumns().length===e},s.prototype.getWidth=function(e){if(this.parent.allowResizing&&c(e.width)&&(c(e.minWidth)&&c(e.maxWidth)&&!this.isWidthUndefined()?e.width=200:e.maxWidth&&(e.width=e.maxWidth)),!e.width)return null;var i=parseInt(e.width.toString(),10);return e.minWidth&&i<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&i>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},s.prototype.getTableWidth=function(e,i){for(var t=0,r=!1,n=0,o=e;n<o.length;n++){var a=o[n];if(a.visible!==!1){var l=this.getWidth(a);(a.width==="auto"||!a.width)&&(this.parent.allowResizing&&!i?a.maxWidth||(r=!0):l=0),l!==null&&(t+=parseInt(l.toString(),10))}}return t=r?"auto":t,t},s.prototype.setWidthToTable=function(e){var i=Ie(this.getTableWidth(this.parent.getColumns()));(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new de({width:"30px"})),i=this.isAutoResize()||i==="auto"||e?"100%":i,this.parent.getHeaderTable().style.width=i,this.parent.getContentTable().style.width=i;var t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&(t.style.width=i)},s.prototype.isAutoResize=function(){return this.parent.allowResizing&&this.parent.resizeSettings.mode==="Auto"},s}(),Hh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Oh=function(){function s(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.virtualSelectionInfo={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.groupedFrozenRow=0,this.parent=e,this.rowModelGen=new cr(this.parent),this.addEventListener()}return s.prototype.focusCheck=function(e){var i=e.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=i.classList.contains("e-grid")},s.prototype.onFocus=function(e){if(!(this.parent.isDestroyed||O.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&e&&e.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&this.parent.frozenRows===0),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&(this.parent.editSettings.mode!=="Batch"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[or].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new ri({isDataRow:!0})]}),this.getContent().selector,!1);var i=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator(),this.active);this.getContent().matrix.select(i[0],i[1]),this.skipFocus&&!(e&&e.target===this.parent.element)&&(this.focus(e),this.skipFocus=!1)}},s.prototype.passiveFocus=function(e){if(!this.parent.isDestroyed){var i=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(e.target===i&&e.relatedTarget&&!b(e.relatedTarget,"e-grid")&&!this.firstHeaderCellClick){var t=[0,0];this.active.matrix.matrix[t[0]][t[1]]===0&&(t=Ye(this.active.matrix.matrix,t,!0)),this.active.matrix.current=t,this.currentInfo.element=e.target,this.currentInfo.elementToFocus=e.target,this.currentInfo.element.querySelector(".e-checkselectall")?(this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)):T([this.currentInfo.element],["e-focused","e-focus"])}this.firstHeaderCellClick=!1,e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,T([this.currentInfo.element],["e-focused","e-focus"]))}},s.prototype.onBlur=function(e){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var i=!!(b(e.target,"e-gantt")&&e.target.classList.contains("e-rowcell")&&!c(e.target.nextElementSibling)&&e.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||e&&(!e.relatedTarget||M(e.relatedTarget,".e-grid")||M(e.relatedTarget,".e-grid-popup"))&&!(this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within")))&&!(!i&&c(e.relatedTarget)&&parseInt(e.target.getAttribute("aria-colindex"),10)-1===0&&parseInt(e.target.getAttribute("index"),10)===0)&&!(!i&&c(e.relatedTarget)&&!M(document.activeElement,".e-grid")&&!c(e.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},s.prototype.setFirstFocusableTabIndex=function(){var e=this.parent;if(e.element.tabIndex=-1,e.allowGrouping&&e.groupSettings.showDropArea){var i=e.groupModule,t=i.getFocusableGroupedItems();t.length>0?(i.element.tabIndex=-1,t[0].tabIndex=0):i.element.tabIndex=0;return}if(e.toolbar||e.toolbarTemplate){var r=e.toolbarModule.element,n=this.parent.toolbarModule.getFocusableToolbarItems();n.length>0&&n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")?(r.tabIndex=-1,n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0):r.tabIndex=0;return}if(e.getColumns().length){var o=e.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(o.tabIndex=0,this.setActive(!1),!c(this.active)&&(c(this.active.target)||!this.active.target.classList.contains("e-columnmenu"))){var a=[0,0];this.active.matrix.matrix[a[0]][a[1]]===0&&(a=Ye(this.active.matrix.matrix,a,!0)),this.active.matrix.current=a}return}},s.prototype.setLastContentCellTabIndex=function(){var e=this.parent.getContentTable();if(e.rows[e.rows.length-1]){var i=e.rows[e.rows.length-1].lastElementChild;i.tabIndex=0}},s.prototype.onClick=function(e,i,t){if(!(b(e.target,"e-filterbarcell")&&(b(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))){var r=!c(M(e.target,"."+vt)),n=!c(M(e.target,"."+Ke));if(r=r&&n?!r:r,!(!r&&c(M(e.target,"."+Ke))||e.target.classList.contains(ve)||e.target.classList.contains(me)||!c(M(e.target,".e-unboundcell"))&&!i)){this.setActive(r);var o={cancel:!1,byKey:!1,byClick:!c(e.target),clickArgs:e};if(this.parent.notify(nn,o),!(o.cancel||M(e.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))&&(this.setActive(r),this.getContent())){var a=this.getContent().onClick(e,i);if(a===!1)return;this.focus(),this.currentInfo.element.classList.contains("e-rowcell")&&e.type&&e.type==="click"&&!t&&T([this.currentInfo.element],["e-focused","e-focus"]),t&&e&&e.target&&T([e.target],["e-focused","e-focus"])}}}},s.prototype.handleFilterNavigation=function(e,i,t){e.target===document.querySelector(i)&&e.key==="Tab"&&e.shiftKey?(e.preventDefault(),document.querySelector(t).focus()):e.target===document.querySelector(t)&&e.key==="Tab"&&!e.shiftKey&&document.activeElement===document.querySelector(t)&&(e.preventDefault(),document.querySelector(i).focus())},s.prototype.onKeyPress=function(e){if(this.content&&this.content.target&&(this.content.target=null),this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.element,t=this.parent.pagerModule.pagerObj.getFocusablePagerElements(i,[]);if(this.parent.childGrid&&!b(e.target,"e-gridpager")&&this.allowToPaging(e)&&t.length&&(t[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if(e.action==="shiftTab"&&t.length&&t[0]===e.target){this.setActive(!0);var r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=Ye(this.active.matrix.matrix,r,!1)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(r)?r:this.findBatchEditCell(r,!1):r,e.preventDefault(),this.focus(e);return}if(e.action==="tab"&&this.parent.element.classList.contains("e-childgrid")&&(!this.parent.pageSettings.pageSizes&&t.length&&t[t.length-1]===e.target||this.parent.pagerModule.pagerObj.getDropDownPage()===e.target)){var n=b(this.parent.element,"e-detailcell");E([this.parent.element],["e-focus"]),E([n],["e-focused"]),n.tabIndex=-1}else{this.parent.pagerModule.pagerObj.changePagerFocus(e);return}}if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&(e.keyCode===38||e.shiftKey&&e.keyCode===9)){e.preventDefault(),this.focus(e);return}else if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&e.keyCode===9){e.preventDefault(),this.parent.pagerModule.pagerObj.setPagerFocus();return}if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var o=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[o,a]}}if(this.parent.filterSettings.type==="Excel"&&this.handleFilterNavigation(e,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="CheckBox"){var l=this.parent.getColumnByUid(this.focusedColumnUid),h=l&&l.filter&&l.filter.hideSearchbox?".e-chk-hidden":".e-searchinput.e-input";this.handleFilterNavigation(e,h,".e-checkboxfilter .e-footer-content button:nth-child(2)")}if(this.parent.filterSettings.type==="Menu"&&this.handleFilterNavigation(e,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),this.parent.showColumnChooser&&this.handleFilterNavigation(e,".e-ccdlg .e-ccsearch.e-cc.e-input",".e-ccdlg .e-footer-content button:nth-child(2)"),!this.skipOn(e)){if(e.target&&b(e.target,"e-gridcontent")){var p=[].slice.call(this.parent.getContentTable().rows),d=p[p.length-1].lastElementChild;e.target===d&&(this.setActive(!0),this.setLastContentCellActive())}if(e.action==="shiftTab"&&e.target&&(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))){if(e.target===this.parent.element){this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}if(b(e.target,"e-groupdroparea")){this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}if(b(e.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var u=this.parent.groupModule,f=u.getFocusableGroupedItems();e.preventDefault(),f.length>0?f[f.length-1].focus():u.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}}var g=!1;if(e.action==="tab"&&e.target&&(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(e.target===this.parent.element||e.target.classList.contains("e-groupdroparea"))){var u=this.parent.groupModule,f=u.getFocusableGroupedItems();if(f.length>0){e.preventDefault(),f[0].focus();return}if(!e.target.classList.contains("e-groupdroparea")){e.preventDefault(),u.element.focus();return}}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(e.target===this.parent.element||b(e.target,"e-groupdroparea")||e.target.classList.contains("e-toolbar"))){var m=this.parent.toolbarModule.element,S=this.parent.toolbarModule.getFocusableToolbarItems();if(S.length>0){e.preventDefault(),S[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}if(!e.target.classList.contains("e-toolbar")){e.preventDefault(),m.focus();return}}(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))&&(g=!0)}g&&(this.parent.allowGrouping&&!c(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=e.action;var y={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(nn,y),!y.cancel){var R=this.getContent().matrix.current,w=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0;this.currentInfo.outline=!0;var F=this.getContent().jump(e.action,R);this.swap=F,F.swap&&!(this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab"))&&(this.setActive(!F.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(R,F,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent());var L=this.content.lastIdxCell?!1:this.getContent().onKeyPress(e);if(e.target&&b(e.target,"e-gridheader")){if(e.action==="tab"&&R.toString()===this.active.matrix.current.toString()){var k=Ye(this.active.matrix.matrix,this.active.matrix.current,!0),r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=Ye(this.active.matrix.matrix,r,!1));var z=Z(k[0]+".cells."+k[1],this.active.matrix.getRowsFromIndex(k[0],this.active));if(z&&z.getBoundingClientRect().width===0&&this.active.matrix.matrix.length-1===k[0]&&(r=this.active.matrix.nextVisibleCellFocus(k[0],k[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),this.active.matrix.current.toString()===r.toString()&&this.content.matrix.matrix.length){L=!0,this.setActive(!0);var H=[0,0];this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),this.active.matrix.matrix[H[0]][H[1]]===0&&(H=Ye(this.active.matrix.matrix,[0,0],!0));var B=Z(H[0]+".cells."+H[1],this.active.matrix.getRowsFromIndex(H[0],this.active));if(B&&B.getBoundingClientRect().width===0&&(H=this.active.matrix.nextVisibleCellFocus(H[0],H[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(H)?H:this.findBatchEditCell(H,!0):H,this.parent.enableVirtualization&&!this.parent.enableColumnVirtualization&&this.parent.contentModule.prevInfo.blockIndexes[0]!==1){e.preventDefault(),this.removeFocus();var Q=this.parent.contentModule;Q.firstCellFocus=!0,Q.content.scrollTop=0;return}}else this.active.matrix.current.toString()!==k.toString()&&(this.active.matrix.current=k)}if(e.action==="shiftTab"&&R.toString()===this.active.matrix.current.toString()){var D=Ye(this.active.matrix.matrix,this.active.matrix.current,!1),K=Z(D[0]+".cells."+D[1],this.active.matrix.getRowsFromIndex(D[0],this.active));if(K&&K.getBoundingClientRect().width===0&&D[0]===0&&(D=this.active.matrix.nextVisibleCellFocus(D[0],D[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),D.toString()===this.active.matrix.current.toString()){this.focusOutFromHeader(e);return}if(this.active.matrix.current.toString()!==D.toString()&&!L){L=!0;var ie=Z(D[0]+".cells."+D[1],this.active.matrix.getRowsFromIndex(D[0],this.active));ie&&ie.getBoundingClientRect().width===0&&D[0]===0&&(D=this.active.matrix.nextVisibleCellFocus(D[0],D[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=D}}}if(e.target&&b(e.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab")&&(this.active.matrix.current=this.findBatchEditCell(w,e.action==="tab"),e.action==="tab"&&w.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),e.action==="shiftTab"&&R.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&!c(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length){this.focusOutFromHeader(e);return}var H=[0,0];this.active.matrix.matrix[H[0]][H[1]]===0&&(H=Ye(this.active.matrix.matrix,[0,0],!0));var B=Z(H[0]+".cells."+H[1],this.active.matrix.getRowsFromIndex(H[0],this.active));B&&B.getBoundingClientRect().width===0&&(H=this.active.matrix.nextVisibleCellFocus(H[0],H[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),!L&&(H.toString()===this.active.matrix.current.toString()||this.parent.editSettings.mode==="Batch"&&w.toString()===this.active.matrix.current.toString())&&(L=!0,this.setActive(!1),this.setLastContentCellActive())}if(L===!1){if(this.clearIndicator(),e.action==="shiftTab"&&R.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&R.toString()!==[0,0].toString()){if(e.preventDefault(),e.keyCode===40){this.parent.pagerModule.pagerObj.setPagerContainerFocus();return}else if(e.keyCode===9){this.parent.pagerModule.pagerObj.setPagerFocus();return}}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}if(this.header.action=e.action,this.header.currentTarget=null,this.header.focusType="key",e.target&&b(e.target,"e-fltrtemp")&&(e.action==="tab"||e.action==="shiftTab")){var ae=e.target,xe=[].slice.call(M(ae,"th").querySelectorAll(".e-fltrtemp-focus"));if(xe.length){var ce=xe.indexOf(ae),ke=e.action==="tab"&&ce<xe.length-1||e.action==="shiftTab"&&ce>0;ke&&(this.setActive(!1),this.active.matrix.current=R,this.active.currentTarget=ae)}}g&&b(this.active.getTable(),"e-gridheader")&&e.target&&e.target.id===this.parent.element.id+"_searchbar"&&(this.parent.searchModule.headerFocus=!0),e.preventDefault(),this.focus(e)}}},s.prototype.isValidBatchEditCell=function(e){var i=this.active.getTable().rows[e[0]].cells[e[1]],t=M(i,"tr"),r=parseInt(i.getAttribute("aria-colindex"),10)-1,n=this.parent.getColumns()[parseInt(r.toString(),10)];return!!(this.active.matrix.matrix[e[0]][e[1]]===1&&(!t.classList.contains("e-row")||(t.classList.contains("e-insertedrow")||!n.isPrimaryKey)&&n.allowEditing))},s.prototype.findBatchEditCell=function(e,i,t){for(var r=e,n=e,o=!1;!o;){var a=n;n=Ye(this.active.matrix.matrix,n,i);var l=Z(n[0]+".cells."+n[1],this.active.getTable().rows);if(l&&l.getBoundingClientRect().width===0&&(n=this.active.matrix.nextVisibleCellFocus(n[0],n[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),a.toString()===n.toString()||t&&a[0]!==n[0]){o=!0;continue}this.isValidBatchEditCell(n)&&(r=n,o=!0)}return r},s.prototype.setLastContentCellActive=function(){var e=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[e[0]][e[1]]===0&&(e=Ye(this.active.matrix.matrix,e,!1));var i=Z(e[0]+".cells."+e[1],this.active.matrix.getRowsFromIndex(e[0],this.active));i&&i.getBoundingClientRect().width===0&&(e=this.active.matrix.nextVisibleCellFocus(e[0],e[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),this.active.matrix.current=e},s.prototype.focusOutFromChildGrid=function(e){var i=b(this.parent.element,"e-table"),t=b(i,"e-grid").ej2_instances[0],r=b(this.parent.element,"e-detailcell"),n=b(this.parent.element,"e-detailrow").getAttribute("data-uid"),o=[].slice.call(t.getContentTable().rows),a=o.map(function(u){return u.getAttribute("data-uid")}).indexOf(n);if(!(e.action==="tab"&&a>=o.length-1)){E([this.parent.element],["e-focus"]),E([r],["e-focused"]),r.tabIndex=-1,e.preventDefault();var l;if(t.focusModule.removeFocus(),e.action==="shiftTab"){for(var h=o[a-1],p=h.cells,d=p.length-1;d>=0;d--)if(l=p[parseInt(d.toString(),10)],!l.classList.contains("e-hide")){t.focusModule.active.matrix.current=[a-1,d];break}}else l=o[a+1].cells[0],t.focusModule.active.matrix.current=[a+1,0];t.focusModule.currentInfo.element=l,t.focusModule.currentInfo.elementToFocus=l,T([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},s.prototype.focusOutFromHeader=function(e){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var i=this.parent.toolbarModule.element,t=this.parent.toolbarModule.getFocusableToolbarItems();e.preventDefault(),t.length>0?t[t.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus():i.focus();return}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var r=this.parent.groupModule,n=r.getFocusableGroupedItems();e.preventDefault(),n.length>0?n[n.length-1].focus():r.element.focus();return}this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus())},s.prototype.allowToPaging=function(e){return!(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode!==40)},s.prototype.skipOn=function(e){var i=e.target;if(!i)return!1;if(!this.parent.isEdit&&i&&i.closest(".e-unboundcell")&&this.currentInfo.skipAction&&(e.action==="shiftTab"&&this.commandColumnFocusElement(i.closest(".e-unboundcell"),!1)===i||e.action==="tab"&&this.commandColumnFocusElement(i.closest(".e-unboundcell"),!0)===i))return this.currentInfo.skipAction=!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var t=this.parent.groupModule.getFocusableGroupedItems();if(b(e.target,"e-groupheadercell")&&!(e.target===t[0]&&e.action==="shiftTab"||e.target===t[t.length-1]&&e.action==="tab"))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var r=this.parent.toolbarModule.element,n=r.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(b(e.target,"e-toolbar-item")&&!(n.length>0&&(b(e.target,"e-toolbar-item")===n[0]&&e.action==="shiftTab"||b(e.target,"e-toolbar-item")===n[n.length-1]&&e.action==="tab")))return!0}var o=M(i,"th")&&!M(i,"th").tabIndex;if(e.target.classList.contains("e-filterbaroperator")&&(e.keyCode===13||e.keyCode===27)){var a=M(e.target,".e-filterbarcell");a.querySelector("input").focus()}var l=this.parent.editSettings.showAddNewRow&&M(document.activeElement,".e-addedrow")!==null;(o&&M(document.activeElement,".e-filterbarcell")!==null||l)&&this.removeFocus();var h=M(document.activeElement,".e-filterbarcell")!==null;if(this.parent.enableHeaderFocus&&h){var p=this.active.matrix,d=p.current;h=p.matrix[d[0]].lastIndexOf(1)!==d[1]}if(this.parent.isEdit&&(e.action==="tab"||e.action==="shiftTab")&&this.parent.editSettings.mode==="Normal"&&!this.parent.editSettings.showAddNewRow&&!c(b(i,"e-addedrow"))){var u=this.parent.editModule.formObj.element.querySelectorAll('input:not([type="hidden"],.e-numeric-hidden,.e-disabled), select:not([aria-hidden="true"]), button:not(.e-hide), textarea:not(.e-hide,.e-disabled,[disabled])'),a=i.classList.contains("e-ddl")?i.querySelector("input"):i,f=e.action==="tab"&&a===u[u.length-1],g=e.action==="shiftTab"&&a===u[0];if(f||g){e.preventDefault();var m=u[f?0:u.length-1];m=m.parentElement.classList.contains("e-ddl")?m.parentElement:m,m.focus()}}return e.action==="delete"||this.parent.editSettings.mode!=="Batch"&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!c(this.parent.element.querySelector(".e-editedrow"))||!c(b(i,"e-addedrow"))&&!c(M(e.target,"input"))&&!c(document.querySelector(".e-popup-open"))||!c(b(i,"e-addedrow"))&&i&&!i.querySelector(".e-cancel-icon")&&!c(b(i,"e-unboundcell"))))||["insert","f2"].indexOf(e.action)>-1)||h&&this.parent.enableHeaderFocus||(h||l)&&e.action!=="tab"&&e.action!=="shiftTab"||M(document.activeElement,"#"+this.parent.element.id+"_searchbar")!==null&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||M(i,"."+vt)===null&&M(i,"."+Ke)===null&&!(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))||e.action==="space"&&!i.classList.contains(Zt)&&M(i,"."+Zt)===null&&M(i,".e-headerchkcelldiv")===null||M(i,".e-filter-popup")!==null},s.prototype.focusVirtualElement=function(e){var i=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var t={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(wl,t);var r=this.actions.some(function(o){return o===i.activeKey}),n=this.parent.contentModule?this.parent.contentModule.selectedRowIndex>-1:!1;t.isAdd||Object.keys(t.virtualData).length||r||t.isCancel||n?(this.parent.notify(Xl,{isCancel:!1}),t.isCancel=!1,(this.parent.enableVirtualization&&!this.parent.selectVirtualRowOnAdd&&(!e||e&&e.action!=="ctrlHome"&&e.action!=="ctrlEnd")||!this.parent.enableVirtualization)&&(this.parent.contentModule.selectedRowIndex=-1),this.parent.selectVirtualRowOnAdd=!1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},s.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},s.prototype.getContent=function(){return this.active||this.content},s.prototype.setActive=function(e){this.active=e?this.content:this.header},s.prototype.setFocusedElement=function(e,i){var t=this;this.currentInfo.elementToFocus=e,setTimeout(function(){if(!c(t.currentInfo.elementToFocus)){var r=c(t.parent.element.querySelector(".e-flmenu"))?document.querySelector(".e-grid-popup .e-flmenu"):t.parent.element.querySelector(".e-flmenu");(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&c(r)?t.focusVirtualElement(i):(c(r)||b(document.activeElement,"e-flmenu-valuediv")!==r.querySelector(".e-flmenu-valuediv"))&&t.currentInfo.elementToFocus.focus()}},0)},s.prototype.focus=function(e){this.parent.notify(Sl,e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},s.prototype.removeFocus=function(e){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&!(this.parent.allowGrouping&&!c(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var i=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=i||this.currentInfo.element}E([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1}},s.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(T([e.element],["e-focused"]),T([e.elementToFocus],["e-focus"]))},s.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},s.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},s.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},s.prototype.addFocus=function(e,i){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&(!c(i)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!!e.element){var t=e.elementToFocus.classList.contains("e-focus");if(!t){this.currentInfo.outline&&T([e.element],["e-focused"]),T([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,t||this.setFocusedElement(e.elementToFocus,i),this.parent.notify(sn,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!c(i),byClick:c(i),keyArgs:i,isJump:this.swap.swap,container:this.getContent().getInfo(i),outline:!c(i),swapInfo:this.swap});var r=this.getContent().matrix.current,n=r[0],o=r[1];this.prevIndexes={rowIndex:n,cellIndex:o},this.focusedColumnUid=this.parent.getColumnByIndex(o).uid,this.focusByClick=!1}}},s.prototype.refreshMatrix=function(e){var i=this;return function(t){e&&!i.content&&(i.content=new Fo(i.parent)),!e&&!i.header&&(i.header=new Nh(i.parent));var r=e?i.content:i.header,n=i.parent.frozenRows,o=0;if(n&&i.parent.editSettings.mode==="Batch"&&(o=i.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+i.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),!c(i.parent.groupSettings.columns)&&i.parent.groupSettings.columns.length&&n&&e){n=0;for(var a=0;a<t.rows.length&&(n++,t.rows[parseInt(a.toString(),10)].index+1!==i.parent.frozenRows);a++);i.groupedFrozenRow=n}var l=e?t.rows.slice(n+o):t.rows,h=e?t.rows.slice(0,n+o):t.rows;i.parent.isCollapseStateEnabled()&&e&&(l=l.filter(function(D){return D.visible!==!1}));var p=!c(i.parent.rowTemplate);if(n&&(i.parent.editSettings.mode==="Batch"&&e&&(t.name==="batchDelete"||t.name==="batchAdd"||t.name==="batchCancel"||t.args&&t.args.requestType==="batchsave")||t.args&&(t.args.requestType==="delete"||t.args.requestType==="save"))){var d=i.header.matrix.matrix,u=i.parent.headerModule.rows.length;d.splice(u,d.length-u)}var f=r.matrix.generate(h,r.selector,p);r.matrix.generate(l,r.selector,p);var g=i.parent.enableVirtualization||i.parent.enableInfiniteScrolling;if(i.parent.editSettings.showAddNewRow&&e&&i.header&&i.header.matrix&&(!g||g&&i.parent.isAddNewRow)){var m=i.header.matrix.matrix,S=i.parent.allowFiltering&&i.parent.filterSettings.type==="FilterBar"?2:1;r.matrix.rows=i.parent.frozenRows&&i.parent.editSettings.newRowPosition==="Top"?r.matrix.rows:++r.matrix.rows,i.parent.editSettings.newRowPosition==="Top"?(i.parent.frozenRows||g?f:r.matrix.matrix).unshift(i.refreshAddNewRowMatrix(m[m.length-S])):r.matrix.matrix.push(i.refreshAddNewRowMatrix(m[m.length-S])),i.parent.isAddNewRow=!1}if((!(i.parent.isFrozenGrid()&&t.args&&(t.args.requestType==="sorting"||t.args.requestType==="batchsave"||t.args.requestType==="paging"))||n&&i.parent.editSettings.mode==="Batch"&&e&&(t.name==="batchDelete"||t.name==="batchAdd"||t.name==="batchCancel"||t.args.requestType==="batchsave"))&&r.generateRows(h,{matrix:f,handlerInstance:i.header}),!O.isDevice&&t&&t.args&&(!i.focusByClick&&t.args.requestType==="paging"&&!i.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(i.skipFocus=!1,i.parent.element.focus()),t.args.requestType==="grouping"&&(i.skipFocus=!0)),t&&t.args&&t.args.requestType==="virtualscroll"){if(i.currentInfo.uid){var y,R=t.rows.some(function(D,K){return y=K,D.uid===i.currentInfo.uid});if(R){i.content.matrix.current[0]=y,i.content.matrix.current[1]=i.parent.getColumnIndexByUid(i.focusedColumnUid)||0;var w=i.parent.getVisibleFrozenLeftCount(),F=i.parent.getVisibleFrozenRightCount();i.parent.enableColumnVirtualization&&!(w&&F)&&i.parent.isFrozenGrid()&&t.args.virtualInfo.direction==="right"&&(i.content.matrix.current[1]=i.content.matrix.current[1]-(w+(F?F+1:0)));var L=!!(i.parent.allowGrouping&&i.parent.groupSettings.columns.length);L&&(i.content.matrix.current[1]=i.prevIndexes.cellIndex,i.virtualSelectionInfo.isPending&&(i.content.matrix.current[0]=i.virtualSelectionInfo.direction==="downArrow"?i.content.matrix.current[0]+1:i.content.matrix.current[0]-1));var k=i.getContent().getFocusInfo().elementToFocus;if(k){var z=k.getBoundingClientRect(),H=i.parent.element.getBoundingClientRect(),B=0,Q=0;i.parent.enableColumnVirtualization&&!(w&&F)&&i.parent.isFrozenGrid()&&t.args.virtualInfo.direction==="right"&&(w?B=i.parent.leftrightColumnWidth("left"):Q=i.parent.leftrightColumnWidth("right")),(z.top>=0&&z.left>=0&&z.right-B-Q<=Math.min(H.right,window.innerWidth||document.documentElement.clientWidth)+Q&&z.bottom<=Math.min(H.bottom,window.innerHeight||document.documentElement.clientHeight)||L)&&(i.isVirtualScroll=!0,i.focus(L&&i.virtualSelectionInfo.isPending?i.virtualSelectionInfo.event:void 0))}}}else if(t.args.focusElement&&t.args.focusElement.classList.contains("e-filtertext")){var k=i.parent.element.querySelector("#"+t.args.focusElement.id);k&&k.focus()}i.virtualSelectionInfo={}}t&&t.args&&t.args.requestType==="infiniteScroll"&&(i.isInfiniteScroll=!0)}},s.prototype.refreshAddNewRowMatrix=function(e){for(var i=this.parent.getColumns(),t=this.parent.getIndentCount(),r=t;r<e.length-1;r++)i[r-t]&&i[r-t].visible&&i[r-t].allowEditing?e[parseInt(r.toString(),10)]=1:e[parseInt(r.toString(),10)]=0;return e},s.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(I.add(this.parent.element,"mousedown",this.focusCheck,this),I.add(this.parent.element,"touchstart",this.focusCheck,this),I.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(i){return e.passiveFocus(i)},!0),I.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Yt,handler:this.onKeyPress},{event:ii,handler:this.onClick},{event:pe,handler:this.refMatrix},{event:mo,handler:this.refMatrix},{event:So,handler:this.refMatrix},{event:Jt,handler:this.showAddNewRowFocus},{event:mt,handler:this.refreshMatrix()},{event:Ql,handler:this.restoreFocus},{event:yl,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"custom-filter-close",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:Ba,handler:this.refMatrix},{event:ao,handler:this.refMatrix},{event:Ha,handler:this.refMatrix},{event:Pa,handler:this.refMatrix},{event:ot,handler:this.refMatrix},{event:sn,handler:this.internalCellFocus}],Ft(this.parent,this.evtHandlers,!0,this))},s.prototype.showAddNewRowFocus=function(){if(this.parent.editSettings.showAddNewRow){var e=this.parent.editSettings.newRowPosition==="Top"?0:this.content.matrix.matrix.length-1,i=this.parent.getIndentCount();if(this.parent.editSettings.newRowPosition==="Top"&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var t=this.header.matrix.matrix.length-(this.groupedFrozenRow?this.groupedFrozenRow:this.parent.frozenRows);i=this.findNextCellFocus(this.header.matrix.matrix[t-1],i),this.header.matrix.current=[t-1,i],this.active=this.header}else i=this.findNextCellFocus(this.content.matrix.matrix[parseInt(e.toString(),10)],i),this.content.matrix.current=[e,i],this.active=this.content;var r=this.parent.element.querySelector(".e-addedrow");r&&r.querySelectorAll("tr")&&r.querySelector("tr").cells[parseInt(i.toString(),10)].querySelector("input")&&r.querySelector("tr").cells[parseInt(i.toString(),10)].querySelector("input").select()}},s.prototype.findNextCellFocus=function(e,i){for(var t=i;t<e.length;t++)if(e[parseInt(t.toString(),10)]===1)return t;return i},s.prototype.filterfocus=function(){this.parent.filterSettings.type!=="FilterBar"&&(this.removeFocus(),this.restoreFocus())},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(I.remove(this.parent.element,"mousedown",this.focusCheck),I.remove(this.parent.element,"touchstart",this.focusCheck),I.remove(this.parent.element,"focus",this.onFocus),I.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),Ft(this.parent,this.evtHandlers,!1))},s.prototype.destroy=function(){this.removeEventListener()},s.prototype.restoreFocus=function(e){if(!(e&&e.requestType==="sorting"&&c(e.target))){var i=this.parent.groupModule;if(this.parent.allowGrouping&&i&&(i.groupSortFocus||i.groupTextFocus)){i.groupSortFocus=!1,i.groupTextFocus=!1;return}this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo());var t=["add","save","delete","cancel","batchsave","batchDelete","batchCancel"],r=this.getContent().getFocusInfo();e&&t.indexOf(e.requestType)>-1&&r&&r.elementToFocus&&r.elementToFocus.matches(".e-rowcell.e-focus")&&T([r.elementToFocus],["e-focused","e-focus"])}},s.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling&&!(this.parent.groupModule&&this.parent.groupModule.preventFocusOnGroup)){var i=this.getContent().matrix,t=i.current;switch(e.requestType){case"grouping":case"ungrouping":t[1]=t.length&&!this.parent.groupSettings.showGroupedColumn&&!c(i.matrix[t[0]])?i.matrix[t[0]].indexOf(1):e.requestType==="grouping"?t[1]+1:t[1]-1;break}this.getContent().matrix.current=t,this.prevIndexes={rowIndex:t[0],cellIndex:t[1]};var r=this.parent.groupModule;if(this.parent.allowGrouping&&r&&r.groupCancelFocus){var n=r.getFocusableGroupedItems();n.length?n[0].parentElement.getAttribute("ej-mappingname")===e.columnName?n[3].focus():n[0].focus():r.element.focus(),r.groupCancelFocus=!1;return}this.addFocus(this.getContent().getFocusInfo())}},s.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||E([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},s.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},s.prototype.forgetPrevious=function(){this.forget=!0},s.prototype.setActiveByKey=function(e,i){if(this.parent.frozenRows!==0){var t,r={home:function(){return{toHeader:!t.isContent,toFrozen:!0}},end:function(){return{toHeader:!t.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in r){t=i.getInfo();var n=r[""+e]();this.setActive(!n.toHeader),this.getContent().matrix.current=i.matrix.current}}},s.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&(e.keyArgs.action==="enter"&&e.parent.classList.contains("e-detailcell")||(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab")&&e.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var i;e.parent&&e.parent.closest(".e-unboundcell")&&e.keyArgs.action==="shiftTab"?i=this.commandColumnFocusElement(e.parent,!0):i=this.getContent().getFocusable(this.getFocusedElement()),this.setFocusedElement(i),this.currentInfo.skipAction=!0}},s.prototype.commandColumnFocusElement=function(e,i){var t=e.querySelectorAll("button:not(.e-hide)");return i?t[t.length-1]:t[0]},s}(),qh=function(){function s(){this.matrix=[],this.current=[]}return s.prototype.set=function(e,i,t){e=Math.max(0,Math.min(e,this.rows)),i=Math.max(0,Math.min(i,this.columns)),this.matrix[parseInt(e.toString(),10)]=this.matrix[parseInt(e.toString(),10)]||[],this.matrix[parseInt(e.toString(),10)][parseInt(i.toString(),10)]=t?1:0},s.prototype.get=function(e,i,t,r,n,o){var a=i;if(e+t[0]<0)return[e,i];e=Math.max(0,Math.min(e+t[0],this.rows));var l=!0;if(c(this.matrix[parseInt(e.toString(),10)]))return null;if(i=Math.max(0,Math.min(i+t[1],this.matrix[parseInt(e.toString(),10)].length-1)),a+t[1]>this.matrix[parseInt(e.toString(),10)].length-1&&n(e,i,r))return[e,a];var h=this.first(this.matrix[parseInt(e.toString(),10)],i,t,!0,r);i=h===null?a:h;var p=Z(e+"."+i,this.matrix);e===this.rows&&(r==="downArrow"||r==="enter")&&(t[0]=-1);var d;if(o){var u=this.getRowsFromIndex(e,o);d=Z(e+".cells."+i,u)}if(d&&d.getBoundingClientRect().width===0){var f=this.nextVisibleCellFocus(e,i,r,t,o,a);e=f[0],i=f[1]}if(h===null){for(var g=0;g<this.rows;g++)if(this.matrix[parseInt(g.toString(),10)].some(function(m){return m===1})){l=!1;break}if(l)return e=this.current.length?this.current[0]:0,[e,i]}return this.inValid(p)||!n(e,i,r)?this.get(e,a,t,r,n):[e,i]},s.prototype.getRowsFromIndex=function(e,i){return i.getTable().rows[parseInt(e.toString(),10)].classList.contains("e-addedrow")?i.getTable().rows[parseInt(e.toString(),10)].querySelector("table").rows:i.getTable().rows},s.prototype.nextVisibleCellFocus=function(e,i,t,r,n,o){var a=this.getRowsFromIndex(e,n),l=Z(e+".cells."+i,a),h=n.matrix.matrix,p=h.length-1,d=t==="tab",u=t==="shiftTab",f=t==="enter"||t==="shiftEnter"||t==="downArrow"||t==="upArrow";if(f)return[e,i];for(;l&&l.getBoundingClientRect().width===0;){if(d&&e===p&&i===h[parseInt(e.toString(),10)].lastIndexOf(1)||u&&e===0&&i===h[parseInt(e.toString(),10)].indexOf(1))return i=o,[e,i];d?i===h[parseInt(e.toString(),10)].lastIndexOf(1)?(e++,i=h[parseInt(e.toString(),10)].indexOf(1),i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t),a=this.getRowsFromIndex(e,n)):(i++,i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t)):u?i===h[parseInt(e.toString(),10)].indexOf(1)?(e--,i=h[parseInt(e.toString(),10)].lastIndexOf(1),i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t),a=this.getRowsFromIndex(e,n)):(i--,i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t)):t==="rightArrow"||t==="shiftRight"?i===h[parseInt(e.toString(),10)].lastIndexOf(1)?i=o:(i++,i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t)):t==="leftArrow"||t==="shiftLeft"?i===h[parseInt(e.toString(),10)].indexOf(1)?i=o:(i--,i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t)):t===null&&(i++,i=this.first(this.matrix[parseInt(e.toString(),10)],i,r,!0,t)),l=Z(e+".cells."+i,a)}return[e,i]},s.prototype.first=function(e,i,t,r,n){return(i<0||i===e.length)&&this.inValid(e[parseInt(i.toString(),10)])&&n!=="upArrow"&&n!=="downArrow"||!e.some(function(o){return o===1})?null:this.inValid(e[parseInt(i.toString(),10)])?this.first(e,["upArrow","downArrow","shiftUp","shiftDown","enter","shiftEnter"].indexOf(n)!==-1?r?0:++i:i+t[1],t,!1,n):i},s.prototype.select=function(e,i){e=Math.max(0,Math.min(e,this.rows)),i=Math.max(0,Math.min(i,this.matrix[parseInt(e.toString(),10)].length-1)),this.current=[e,i]},s.prototype.generate=function(e,i,t){this.rows=e.length-1,this.matrix=[];for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)].cells.filter(function(l){return l.isSpanned!==!0});this.columns=Math.max(n.length-1,this.columns|0);for(var o=0,a=0;a<n.length;a++)n[parseInt(a.toString(),10)].column&&n[parseInt(a.toString(),10)].column.columns?o=this.columnsCount(n[parseInt(a.toString(),10)].column.columns,o):o++,this.set(r,a,e[parseInt(r.toString(),10)].visible===!1?!1:i(e[parseInt(r.toString(),10)],n[parseInt(a.toString(),10)],t));this.columns=Math.max(o-1,this.columns|0)}return this.matrix},s.prototype.columnsCount=function(e,i){for(var t=e,r=i,n=0;n<t.length;n++)t[parseInt(n.toString(),10)].columns?r=this.columnsCount(t[parseInt(n.toString(),10)].columns,r):r++;return r},s.prototype.inValid=function(e){return e===0||e===void 0},s}(),Fo=function(){function s(e){var i=this;this.matrix=new qh,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(t){var r={home:[i.matrix.current[0],-1,0,1],end:[i.matrix.current[0],i.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[i.matrix.rows,i.matrix.columns+1,0,-1]};return r[""+t]||null}}return s.prototype.getTable=function(){return this.parent.getContentTable()},s.prototype.onKeyPress=function(e){var i=/(Mac)/i.test(navigator.platform);if(i&&e.metaKey){if(e.action==="home")e.action="ctrlHome";else if(e.action==="end")e.action="ctrlEnd";else if(["downArrow","upArrow","leftArrow","rightArrow"].indexOf(e.action)!==-1)return}var t=this.keyActions[e.action],r=this.getCurrentFromAction(e.action,t,e.action in this.keyActions,e);if(r){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===r.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode===40||e.keyCode===40)){if(r.toString()===[this.matrix.rows,this.matrix.columns].toString()||r.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===r.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&r.toString()===[0,1].toString())return!1;r=this.editNextRow(r[0],r[1],e.action)}this.matrix.select(r[0],r[1])}},s.prototype.editNextRow=function(e,i,t){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),o=r.getColumnIndexByField(r.getVisibleColumns()[0].field),a=this.getTable().rows[parseInt(e.toString(),10)],l=r.editSettings.showAddNewRow&&a.classList.contains("e-addedrow")?a.querySelectorAll("td:not(.e-editcell)")[parseInt(i.toString(),10)]:a.cells[parseInt(i.toString(),10)];if(t==="tab"&&n){e++;var h=this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-detailrowcollapse").length;i=o+h}return t==="shiftTab"&&n&&(e--,i=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),!l.classList.contains(U)&&!l.classList.contains("e-headercell")&&!l.classList.contains("e-groupcaption")&&!l.classList.contains("e-filterbarcell")?this.editNextRow(e,i,t):[e,i]},s.prototype.getCurrentFromAction=function(e,i,t,r){if(i===void 0&&(i=[0,0]),!t&&!this.indexesByKey(e)||this.matrix.current.length===0)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(i),o=n[0],a=n[1],l=n[2],h=n[3];if(this.parent.allowGrouping&&!c(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&e==="enter")for(var p=o;p<this.matrix.matrix.length;p++){var d=this.getTable().rows[p+1];if(d&&d.cells[parseInt(a.toString(),10)]&&d.cells[parseInt(a.toString(),10)].classList.contains("e-rowcell"))return[p+1,a];if(p===this.matrix.matrix.length-1)return[o,a]}if(e==="ctrlEnd"||e==="end"){var u=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];e==="end"&&(u=[o,this.matrix.matrix[parseInt(o.toString(),10)].length-1]),this.matrix.matrix[u[0]][u[1]]===0&&(u=Ye(this.matrix.matrix,u,!1)),o=u[0],a=u[1]+1}var f=this.matrix.get(o,a,[l,h],e,this.validator(),this);return f},s.prototype.checkRowCellFocus=function(e){return e.classList.contains(U)?e.classList.contains("e-focused"):!0},s.prototype.onClick=function(e,i){var t=e.target;if(this.target=t,t=t.classList.contains(U)?t:M(t,"td"),t=t||M(e.target,"td.e-detailrowcollapse")||M(e.target,"td.e-detailrowexpand"),t=M(e.target,"td.e-detailcell")&&c(M(M(e.target,".e-grid"),"td.e-detailcell"))?null:t,t=t&&M(t,"table").classList.contains(ft)?t:null,!t)return!1;var r=t.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&b(t,"e-addedrow")&&(r=b(t,"e-addedrow").rowIndex);var n=[r,t.cellIndex],o=n[0],a=n[1],l=this.matrix.current,h=l[0],p=l[1],d=Z(o+"."+a,this.matrix.matrix);if(this.matrix.inValid(d)||!i&&h===o&&p===a&&this.checkRowCellFocus(t)||!b(e.target,U)&&!b(e.target,"e-groupcaption")&&!b(e.target,"e-recordpluscollapse")&&!b(e.target,"e-recordplusexpand")&&!b(e.target,"e-detailrowcollapse")&&!b(e.target,"e-detailrowexpand")&&!b(e.target,"e-templatecell"))return!1;this.matrix.select(o,a)},s.prototype.getFocusInfo=function(){var e={},i=this.matrix.current,t=i[0],r=t===void 0?0:t,n=i[1],o=n===void 0?0:n;this.matrix.current=[r,o];var a=this.getTable().rows[parseInt(r.toString(),10)];return e.element=c(a)?null:this.parent.editSettings.showAddNewRow&&a.classList.contains("e-addedrow")?a.querySelectorAll("td:not(.e-editcell)")[parseInt(o.toString(),10)]:a.cells[parseInt(o.toString(),10)],e.element&&(e.elementToFocus=(!e.element.classList.contains("e-unboundcell")||this.parent.editSettings.showAddNewRow&&e.element.classList.contains("e-unboundcell")&&b(e.element,"e-addedrow"))&&!e.element.classList.contains("e-detailcell")?this.getFocusable(e.element):e.element,e.elementToFocus=e.element.classList.contains("e-detailcell")&&e.element.querySelector(".e-childgrid")?e.element.querySelector(".e-childgrid"):e.elementToFocus,this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&e.elementToFocus.tagName.toLowerCase()==="input"&&e.elementToFocus.classList.contains("e-dropdownlist")&&(e.elementToFocus=e.elementToFocus.parentElement),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e},s.prototype.getFocusable=function(e){var i='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',t=!c(M(e,".e-templatecell"));if(this.parent.isEdit){var r=this.parent.editSettings.showAddNewRow&&b(e,"e-addedrow")?", button:not(.e-hide)":"";i='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+r}var n=[].slice.call(e.querySelectorAll(i));if(e.classList.contains("e-fltrtemp")){var o=[].slice.call(e.querySelectorAll(".e-fltrtemp-focus"));if(this.focusType==="click"&&this.target&&this.target.classList.contains("e-fltrtemp-focus"))return this.target;if(this.focusType==="key"&&o.length&&(this.action==="tab"||this.action==="shiftTab")){var a=o.indexOf(this.currentTarget);return a===-1?o[this.action==="tab"?0:o.length-1]:o[this.action==="tab"?a+1:a-1]}}return n.length?t&&n.length>1&&!(this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&this.target)?this.target?this.target:e:n[0]:e},s.prototype.selector=function(e,i,t){var r=[A.Expand,A.GroupCaption,A.CaptionSummary,A.GroupSummary];return(e.isDataRow&&i.visible&&(i.isDataCell||i.isTemplate)||e.isDataRow&&i.cellType===A.DetailExpand&&c(i.visible)||!e.isDataRow&&r.indexOf(i.cellType)>-1&&!((i.cellType===A.GroupSummary||i.cellType===A.CaptionSummary)&&!(i.isDataCell&&i.visible))||i.column&&i.visible&&i.column.type==="checkbox"||i.cellType===A.CommandColumn||e.isDataRow&&t)&&!(e.edit==="delete"&&e.isDirty)},s.prototype.nextRowFocusValidate=function(e){for(var i=e,t=e,r=this.matrix.rows;t<=r;t++)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1)e=e+1;else return e;return this.lastIdxCell=!0,i},s.prototype.previousRowFocusValidate=function(e){for(var i=e,t=e,r=0;t>=r;t--)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1){if(e=e-1,e<0)return this.lastIdxCell=!0,i}else return e;return i},s.prototype.jump=function(e,i){this.lastIdxCell=!1;var t=this.parent.frozenRows!==0&&e==="shiftEnter",r=(e==="upArrow"||t)&&i[0]===0;this.matrix.matrix[i[0]]&&e==="tab"&&this.matrix.matrix.length&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==i[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),e==="shiftTab"&&i[0]!==0&&this.matrix.matrix[i[0]].indexOf(1)===i[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[i[0]].length);var n=!1,o=b(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?b(document.activeElement,"e-addedrow"):document.activeElement.parentElement;if((this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!c(o)&&o.classList.contains(Se)){var a=parseInt(o.getAttribute(ee),10)-1;n=a>0}var l={swap:n?!1:(e==="upArrow"||t)&&i[0]===0,toHeader:r};return l},s.prototype.getNextCurrent=function(e,i,t,r){e===void 0&&(e=[]);var n=[];return(r==="rightArrow"||r==="tab")&&(n[0]=e[0],n[1]=-1),(r==="downArrow"||r==="enter")&&(n[0]=-1,n[1]=e[1]),n},s.prototype.generateRows=function(e,i){var t,r=i.matrix,n=i.handlerInstance,o=n.matrix.matrix.length,a=this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"?o+1:o;n.matrix.matrix=n.matrix.matrix.slice(0,a),n.matrix.rows=a,(t=n.matrix.matrix).push.apply(t,r),n.matrix.rows+=r.length},s.prototype.getInfo=function(e){var i=this.getFocusInfo(),t=this.matrix.current,r=t[0],n=t[1],o=i.element.classList.contains(U),a=o||e&&e.action!=="enter"&&(i.element.classList.contains("e-detailrowcollapse")||i.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(i.element.parentElement.getAttribute(ee),10)-1,r),Math.min(parseInt(i.element.getAttribute(ne),10)-1,n)],h=l[0],p=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&o&&(h=this.parent.getDataRows().indexOf(i.element.parentElement)),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&(h=r,p=n),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e&&e.action==="downArrow"&&h++,{isContent:!0,isDataCell:o,indexes:[h,p],isSelectable:a}},s.prototype.validator=function(){var e=this.getTable();return function(i,t,r){if(!c(e.rows[parseInt(i.toString(),10)])){var n=void 0;t=e.querySelector(".e-emptyrow")?0:t,e.rows[parseInt(i.toString(),10)].cells[0].classList.contains("e-editcell")?n=e.rows[parseInt(i.toString(),10)].cells[0].querySelectorAll("td")[parseInt(t.toString(),10)]:n=e.rows[parseInt(i.toString(),10)].cells[parseInt(t.toString(),10)];var o=n.getBoundingClientRect().width!==0;if(r==="enter"||r==="shiftEnter")return o&&n.classList.contains(U);if((r==="shiftUp"||r==="shiftDown")&&n.classList.contains(U))return o;if(r!=="shiftUp"&&r!=="shiftDown")return o}return!1}},s.prototype.shouldFocusChange=function(e){var i=this.matrix.current,t=i[0],r=t===void 0?-1:t,n=i[1],o=n===void 0?-1:n;if(r<0||o<0)return!0;var a=Z(r+".cells."+o,this.getTable().rows);return a&&(e.action==="enter"||e.action==="shiftEnter")?a.classList.contains(U)&&!a.classList.contains("e-unboundcell")||a.classList.contains("e-editedbatchcell")&&!a.classList.contains("e-detailcell"):!0},s.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},s}(),Nh=function(s){Hh(e,s);function e(i){return s.call(this,i)||this}return e.prototype.getTable=function(){return this.parent.getHeaderTable()},e.prototype.onClick=function(i){this.focusType="click";var t=i.target;if(this.target=t,t=t.classList.contains("e-headercell")?t:M(t,"th"),!t&&(this.parent.frozenRows!==0||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(t=i.target.classList.contains(U)?i.target:M(i.target,"td")),i.target.classList.contains("e-columnheader")||i.target.querySelector(".e-stackedheadercell"))return!1;if(t){var r=t.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&b(t,"e-addedrow")&&(r=b(t,"e-addedrow").rowIndex);var n=[r,t.cellIndex],o=n[0],a=n[1],l=Z(o+"."+a,this.matrix.matrix);if(this.matrix.inValid(l))return!1;this.matrix.select(r,t.cellIndex)}},e.prototype.getFocusInfo=function(){var i={},t=this.matrix.current,r=t[0],n=r===void 0?0:r,o=t[1],a=o===void 0?0:o,l=this.getTable().rows[parseInt(n.toString(),10)];return i.element=c(l)?null:this.parent.editSettings.showAddNewRow&&l.classList.contains("e-addedrow")?l.querySelectorAll("td:not(.e-editcell)")[parseInt(a.toString(),10)]:l.cells[parseInt(a.toString(),10)],c(i.element)||(i.elementToFocus=this.getFocusable(i.element),i.outline=!i.element.classList.contains("e-filterbarcell")),i},e.prototype.selector=function(i,t){return t.visible&&(t.column.field!==void 0||t.isTemplate||!c(t.column.template)||!c(t.column.commands)||t.column.type==="checkbox")||t.cellType===A.StackedHeader},e.prototype.jump=function(i,t){var r=this.parent.frozenRows!==0&&i==="enter",n,o;return this.parent.enableHeaderFocus&&i==="tab"&&(o=this.matrix.matrix.length-1===t[0],n=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),n&&(o?this.matrix.current[0]=0:this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:(i==="downArrow"||r)&&t[0]===this.matrix.matrix.length-1||i==="tab"&&o&&n}},e.prototype.getNextCurrent=function(i,t,r,n){i===void 0&&(i=[]);var o=[];return(n==="rightArrow"||n==="shiftRight"&&this.getGridSeletion()||n==="tab")&&(o[0]=i[0],o[1]=-1),(n==="upArrow"||n==="shiftEnter")&&(o[0]=this.matrix.matrix.length,o[1]=i[1]),o},e.prototype.generateRows=function(i){var t=this.matrix.matrix.length;if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"){this.matrix.rows=++this.matrix.rows;for(var r=i[0].cells,n=0,o=0;o<r.length;o++)r[parseInt(o.toString(),10)].column&&r[parseInt(o.toString(),10)].column.columns?n=this.checkFilterColumn(r[parseInt(o.toString(),10)].column.columns,t,n):(this.matrix.set(t,n,r[parseInt(o.toString(),10)].visible&&r[parseInt(o.toString(),10)].column.allowFiltering!==!1),n++)}},e.prototype.checkFilterColumn=function(i,t,r){for(var n=i,o=r,a=0;a<n.length;a++)n[parseInt(a.toString(),10)].columns?o=this.checkFilterColumn(n[parseInt(a.toString(),10)].columns,t,o):(this.matrix.set(t,o,n[parseInt(a.toString(),10)].visible&&n[parseInt(a.toString(),10)].allowFiltering!==!1),o++);return o},e.prototype.getInfo=function(i){return W(s.prototype.getInfo.call(this,i),{isContent:!1,isHeader:!0})},e.prototype.validator=function(){return function(){return!0}},e.prototype.shouldFocusChange=function(i){var t=this.matrix.current,r=t[0],n=t[1];if(r<0||n<0)return!0;var o=Z(r+".cells."+n,this.getTable().rows);return o&&(i.action==="enter"||i.action==="altDownArrow")?!o.classList.contains("e-headercell"):!0},e.prototype.getHeaderType=function(){return"HeaderFocus"},e}(Fo),Vh=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Et=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},Gh=function(s){Vh(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return Et([C(12)],e.prototype,"pageSize",void 0),Et([C(8)],e.prototype,"pageCount",void 0),Et([C(1)],e.prototype,"currentPage",void 0),Et([C()],e.prototype,"totalRecordsCount",void 0),Et([C(!1)],e.prototype,"enableQueryString",void 0),Et([C(!1)],e.prototype,"pageSizes",void 0),Et([C(null)],e.prototype,"template",void 0),e}(oe),_h=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Dt=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},Wh=function(s){_h(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return Dt([C("startsWith")],e.prototype,"operator",void 0),Dt([C(!1)],e.prototype,"ignoreAccent",void 0),Dt([C(null)],e.prototype,"headerTemplate",void 0),Dt([C(null)],e.prototype,"template",void 0),Dt([C(null)],e.prototype,"footerTemplate",void 0),Dt([C(!0)],e.prototype,"enableSearching",void 0),Dt([C(null)],e.prototype,"renderCustomColumnChooser",void 0),e}(oe),Kh=function(){function s(e,i,t){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.virtualSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.isRowDeselect=!1,this.autoFillRLselection=!0,this.isFocusLastCell=!1,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=i,this.factory=t.getService("rendererFactory"),this.focus=t.getService("focus"),this.addEventListener(),this.wireEvents()}return s.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},s.prototype.onActionBegin=function(e,i){this.parent.trigger(i,this.fDataUpdate(e))},s.prototype.fDataUpdate=function(e){if(!this.isMultiSelection&&(!c(e.cellIndex)||!c(e.rowIndex))){var i=this.getRowObj(c(e.rowIndex)?c(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=i.foreignKeyData}return e},s.prototype.onActionComplete=function(e,i){this.parent.trigger(i,this.fDataUpdate(e)),this.isMultiSelection=!1},s.prototype.getModuleName=function(){return"selection"},s.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+Ke)&&!e.querySelector("."+vt)||(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),I.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),I.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},s.prototype.isEditing=function(){return(this.parent.editSettings.mode==="Normal"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},s.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if(e.editSettings.mode==="Batch"&&e.editModule){var i=Ur(this.parent.getCurrentViewRecords());i=e.editSettings.newRowPosition==="Bottom"?i.concat(this.parent.editModule.getBatchChanges()[or]):this.parent.editModule.getBatchChanges()[or].concat(i);for(var t=this.parent.editModule.getBatchChanges()[bo],r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<t.length;n++)for(var o=0;o<i.length;o++)if(t[parseInt(n.toString(),10)][""+r]===i[parseInt(o.toString(),10)][""+r]){i.splice(o,1);break}return i}else if(this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection){var a=e.getCurrentViewRecords().filter(function(l){return l.key===void 0});return a}else return e.getCurrentViewRecords()},s.prototype.selectRow=function(e,i){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([e]);return}var t=this.parent,r=t.getRowByIndex(e),n=r&&t.getRowObjectFromUID(r.getAttribute("data-uid"));if(!(this.isPartialSelection&&n&&n.isDataRow&&!n.isSelectable)){var o,a=!1;if(t.enableVirtualization&&e>-1){var l={selectedIndex:e,isAvailable:!0};if(this.parent.notify(gl,l),r&&t.getRowObjectFromUID(r.getAttribute("data-uid")))o=t.getRowObjectFromUID(r.getAttribute("data-uid")).data;else{if(l.isAvailable&&!t.selectionSettings.persistSelection){var h=this.parent.getSelectedRecords();h.length>0&&this.clearRowSelection()}return}}else o=this.getRowObj(e).data;if(!(!this.isRowType()||!r||this.isEditing())){var p=r.hasAttribute("aria-selected");if(this.activeTarget(),!i||!this.selectedRowIndexes.length)i=!1;else{var d=this.selectionSettings.checkboxMode==="ResetOnRowClick",u=!this.parent.isCheckBoxSelection&&this.selectionSettings.type==="Multiple";!d&&!u||this.selectedRowIndexes.length===1&&(d||u)?i=this.isKeyAction&&this.parent.isCheckBoxSelection?!1:this.selectedRowIndexes.indexOf(e)!==-1:i=!1}this.isKeyAction=!1;var f,g="cancel";if(!i)f={data:o,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(Hr,this.fDataUpdate(f),this.rowSelectingCallBack(f,i,e,o,a,p,g));else{if(this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&this.selectionSettings.persistSelection){if(this.rowDeselect(qr,[n.index],[n.data],[r],[n.foreignKeyData],this.actualTarget),this.isCancelDeSelect)return;this.parent.isCheckBoxSelection||(this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1)),this.rowDeselect(Nr,[n.index],[n.data],[r],[n.foreignKeyData],this.actualTarget,void 0,void 0,void 0)}this.rowSelectingCallBack(f,i,e,o,a,p,g)(f)}}}},s.prototype.rowSelectingCallBack=function(e,i,t,r,n,o,a){var l=this;return function(h){if(!c(h)&&h[""+a]===!0){l.disableInteracted();return}l.index=t,l.toggle=i,l.data=r,l.removed=n,o&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"?(l.clearSelectedRow(t),l.selectRowCallBack()):!o&&l.selectionSettings.persistSelection&&l.parent.isCheckBoxSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"&&l.selectRowCallBack(),l.selectionSettings.checkboxMode==="ResetOnRowClick"&&(l.isCheckboxReset=!0,l.clearSelection()),(!l.selectionSettings.persistSelection||l.selectionSettings.checkboxMode==="ResetOnRowClick"||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())}},s.prototype.selectRowCallBack=function(){var e=this.parent,i,t=this.index,r=this.toggle,n=this.data,o=this.removed,a=e.getRowByIndex(t);!r&&!o&&(this.selectedRowIndexes.indexOf(t)<=-1&&this.updateRowSelection(a,t),this.selectRowIndex(t)),r||(i={data:n,rowIndex:t,row:a,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:t},this.onActionComplete(i,Or)),this.isInteracted=!1,this.updateRowProps(t)},s.prototype.selectRowsByRange=function(e,i){this.selectRows(this.getCollectionFromIndexes(e,i)),this.selectRowIndex(i)},s.prototype.selectedDataUpdate=function(e,i,t,r,n){for(var o=0,a=r.length;o<a;o++){var l=this.parent.getDataRows()[r[parseInt(o.toString(),10)]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(r[parseInt(o.toString(),10)]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(e.push(h.data),t.push(l),i.push(h.foreignKeyData)):this.isPartialSelection&&n&&n.splice(n.indexOf(r[parseInt(o.toString(),10)]),1)}},s.prototype.selectRows=function(e){var i=this,t=this.parent,r=e.slice(),n=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var o=[],a=[],l="cancel",h=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(h,a,o,e,r),this.activeTarget();var p={cancel:!1,rowIndexes:r,row:o,rowIndex:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};this.parent.trigger(Hr,this.fDataUpdate(p),function(d){if(!c(d)&&d[""+l]===!0){i.disableInteracted();return}i.selectionSettings.persistSelection&&t.allowRowDragAndDrop&&i.isDragged||i.clearRow(),i.selectRowIndex(r.slice(-1)[0]);var u=function(F,L){i.updateRowSelection(t.getRowByIndex(F),F,L),i.updateRowProps(n)};if(i.isSingleSel())u(n);else for(var f=0,g=r;f<g.length;f++){var m=g[f];u(m,!!t.enableVirtualization)}if(i.checkVirtualCheckBox()&&!i.parent.isPersistSelection)if(r.length===i.totalRecordsCount)i.virtualSelectedData=i.virtualCheckBoxData().slice(),i.selectedRowIndexes=Object.keys(i.virtualSelectedData).map(function(F){return parseInt(F,10)}),i.setCheckAllState();else{var S=r.filter(function(F){return i.selectedRowIndexes.indexOf(F)===-1});if(S.length>0){for(var y=i.virtualCheckBoxData().slice(),R=0;R<S.length;R++){var w=y[S[R]];c(w)||(i.virtualSelectedData.push(w),i.selectedRowIndexes.push(S[R]))}i.setCheckAllState()}}d={rowIndexes:r,row:o,rowIndex:n,target:i.actualTarget,prevRow:t.getRows()[i.prevRowIndex],previousRowIndex:i.prevRowIndex,data:i.getSelectedRecords(),isInteracted:i.isInteracted,isHeaderCheckboxClicked:i.isHeaderCheckboxClicked,foreignKeyData:a},i.isRowSelected&&i.onActionComplete(d,Or),i.isInteracted=!1})}},s.prototype.addRowsToSelection=function(e){var i=this.parent,t="cancel",r=this.target;this.isMultiSelection=!0;var n=[],o=[],a=[],l=i.getSelectedRowIndexes().concat(e),h=this.isSingleSel()?i.getRowByIndex(e[e.length-1]):i.getRowByIndex(e[0]);if(!((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)){var p,d=this.parent.getColumns().filter(function(y){return y.type==="checkbox"});this.isMultiCtrlRequest&&!d.length&&this.selectedDataUpdate(a,o,n,l);for(var u=0,f=e;u<f.length;u++){var g=f[u],m=this.getRowObj(g),S=this.selectedRowIndexes.indexOf(g)>-1;if(!(this.isPartialSelection&&m&&m.isDataRow&&!m.isSelectable)){if(this.selectRowIndex(g),S&&(d.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(qr,[g],[m.data],[h],[m.foreignKeyData],r),this.isCancelDeSelect)return;this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.splice(this.virtualSelectedData.indexOf(m.data),1),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(g),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(Nr,[g],[m.data],[h],[m.foreignKeyData],r,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),p={cancel:!1,data:a.length?a:m.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:m.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(Hr,this.fDataUpdate(p)),!c(p)&&p[""+t]===!0){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,g)}if(S||(p={data:a.length?a:m.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:m.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(p,Or)),this.isInteracted=!1,this.updateRowProps(g),this.isSingleSel())break}}}},s.prototype.getCollectionFromIndexes=function(e,i){for(var t=[],r=e<=i?{i:e,max:i}:{i,max:e},n=r.i,o=r.max;n<=o;n++)t.push(n);return e>i&&t.reverse(),t},s.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},s.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&this.parent.checkAllRows!=="Check"||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},s.prototype.clearSelectedRow=function(e){if(this.toggle){var i=this.parent.getRowByIndex(e);this.disableUI||(i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(i,!1),this.updateCheckBoxes(i),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},s.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},s.prototype.getPkValue=function(e,i){return e&&Rp(e)?yt(e,i):i[""+e]},s.prototype.updatePersistCollection=function(e,i){var t=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!c(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(e),n=r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;r.isSelected=i,i&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[""+n]=i,delete this.unSelectedRowState[""+n],this.persistSelectedData.some(function(o){return t.getPkValue(t.primaryKey,o)===n})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},s.prototype.updatePersistDelete=function(e,i){var t=this;delete this.selectedRowState[""+e],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+e]=!0);var r,n=this.persistSelectedData.some(function(o,a){return r=a,t.getPkValue(t.primaryKey,o)===e});n&&(this.persistSelectedData.splice(r,1),i&&this.parent.partialSelectedRecords.splice(r,1))},s.prototype.updateCheckBoxes=function(e,i,t){if(!c(e)){var r=e.querySelector(".e-checkselect");c(r)||(Ji(r.nextElementSibling,i),Ot(r,i),(c(this.checkedTarget)||!c(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(t))}},s.prototype.updateRowSelection=function(e,i,t){if(e&&(this.selectedRowIndexes.indexOf(i)===-1&&(this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.push(this.parent.getRowObjectFromUID(e.getAttribute("data-uid")).data),this.selectedRowIndexes.push(i),this.selectedRecords.push(e)),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus||this.parent.isFocusFirstCell||this.isFocusLastCell)){var r=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop)");if(this.parent.contextMenuModule&&this.mouseButton===2&&(r=this.parent.contextMenuModule.cell),this.parent.isFocusFirstCell||this.isFocusLastCell){this.parent.isFocusFirstCell=!1;var n=this.isFocusLastCell?"last-child":"first-child";r=e.querySelector(".e-selectionbackground.e-rowcell:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop, .e-gridchkbox):"+n),this.isFocusLastCell=!1}if(!r||t)return;this.focus.onClick({target:r},!0,!(this.parent.contextMenuModule&&this.mouseButton===2))}},s.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=Ur(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!c(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");if(e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection){this.persistSelectedData=[],this.selectedRowState={},this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[];for(var i=this.parent.getRowsObject(),t=0;t<i.length;t++)i[t].isDataRow&&(i[t].isSelectable?this.parent.partialSelectedRecords.push(i[t].data):this.parent.disableSelectedRecords.push(i[t].data))}this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.selectionSettings.checkboxMode==="ResetOnRowClick"&&this.target&&b(this.target,"e-rowcell")||(this.isInteracted=!1),this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},s.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){var i=this.parent.getDataRows(),t=[],r=[],n=[],o=[],a=this.target;this.isRowDeselect=!0;for(var l=0,h=this.selectedRowIndexes.length;l<h;l++){var p=void 0;this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache?p=this.parent.getRowByIndex(this.selectedRowIndexes[parseInt(l.toString(),10)]):p=this.parent.editSettings.mode==="Batch"?this.parent.getRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]];var d=this.getRowObj(p);d&&(t.push(d.data),r.push(p),n.push(this.selectedRowIndexes[parseInt(l.toString(),10)]),o.push(d.foreignKeyData))}this.selectionSettings.persistSelection&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(qr,n,t,r,o,a,null,function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked||e.isInteracted&&!e.parent.isPersistSelection)){if(e.parent.isPersistSelection)if(e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall"))==="Intermediate"||e.parent.isPersistSelection)for(var u=0;u<e.selectedRecords.length;u++)e.updatePersistCollection(e.selectedRecords[parseInt(u.toString(),10)],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1));return}for(var f=[].slice.call(i.filter(function(m){return m.hasAttribute("aria-selected")})),g=0;g<f.length;g++)e.disableUI||(f[parseInt(g.toString(),10)].removeAttribute("aria-selected"),e.addRemoveClassesForRow(f[parseInt(g.toString(),10)],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(f[parseInt(g.toString(),10)],!1),e.updateCheckBoxes(f[parseInt(g.toString(),10)]);(e.parent.enableVirtualization||e.parent.enableInfiniteScrolling&&e.parent.infiniteScrollSettings.enableCache)&&e.selectedRecords.length&&!f.length&&!e.parent.selectionSettings.persistSelection&&!e.disableUI&&!e.parent.isCheckBoxSelection&&e.addRemoveClassesForRow(null,!1,!0),e.virtualSelectedData=[],e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect(Nr,n,t,r,o,a,null,void 0,null),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))},null),this.isRowDeselect=!1}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},s.prototype.rowDeselect=function(e,i,t,r,n,o,a,l,h){var p=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||!this.isRowDeselect||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&this.focus.activeKey==="space")||!this.selectionSettings.persistSelection){var d="cancel",u=i.length===1&&this.deSelectedData.length===1,f={rowIndex:i[0],data:this.selectionSettings.persistSelection&&this.parent.checkAllRows==="Uncheck"&&!u&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"?this.deSelectedData:t,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};e==="rowDeselected"&&delete f.cancel;var g="row",m="target",S="rowIndex",y="rowIndexes",R="data",w="foreignKeyData";f[""+g]=r,f[""+m]=this.actualTarget;var F=this.actualTarget&&!c(M(this.actualTarget,"thead"));F||i.length>1?(f[""+S]=i[0],f[""+y]=i):i.length===1&&(f[""+R]=f[""+R][0],f[""+g]=f[""+g][0],f[""+w]=f[""+w][0],this.isAddRowsToSelection&&(f[""+y]=i)),this.parent.trigger(e,f,function(L){p.isCancelDeSelect=L[""+d],(!p.isCancelDeSelect||!p.isRowClicked&&!p.isInteracted&&!p.checkSelectAllClicked)&&(p.updatePersistCollection(r[0],!1),p.updateCheckBoxes(r[0],void 0,i[0])),l!==void 0&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&l!==void 0&&l()},s.prototype.getRowObj=function(e){return e===void 0&&(e=this.currentIndex),c(e)?{}:(typeof e=="number"&&(e=this.parent.getRowByIndex(e)),e?this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{}:{})},s.prototype.selectCell=function(e,i){if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))){var t=this.parent,r,n=t.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex));this.currentIndex=e.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!n||this.isEditing())){var a=n.classList.contains("e-cellselectionbackground");if(i=i&&!Ge(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&a,i)this.successCallBack(r,i,e,n,o)(r);else{r={data:o,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1};var l="currentCell";r[""+l]=n;var h="previousRowCellIndex";r[""+h]=this.prevECIdxs,this.parent.trigger(ai,this.fDataUpdate(r),this.successCallBack(r,i,e,n,o)),this.cellselected=!0}}}},s.prototype.successCallBack=function(e,i,t,r,n){var o=this;return function(a){var l="cancel",h="currentCell";if(!(!c(a)&&a[""+l]===!0)&&(i||(a[""+h]=a[""+h]?a[""+h]:r),o.clearCell(),i||o.updateCellSelection(r,t.rowIndex,t.cellIndex),!i)){var p={data:n,cellIndex:t,currentCell:r,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0},d="previousRowCellIndex";p[""+d]=o.prevECIdxs,o.updateCellProps(t,t),o.onActionComplete(p,Hi)}}},s.prototype.getCellIndex=function(e,i){return this.parent.getCellFromIndex(e,i)},s.prototype.selectCellsByRange=function(e,i){var t=this;if(this.isCellType()){var r=this.parent,n=this.parent.isSpan?Us(this.parent,e.rowIndex,e.cellIndex):r.getCellFromIndex(e.rowIndex,e.cellIndex),o,a,l=e,h=i=i||e,p;this.currentIndex=e.rowIndex;var d="cancel",u=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var f={data:u,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},g="previousRowCellIndex";f[""+g]=this.prevECIdxs,this.parent.trigger(ai,this.fDataUpdate(f),function(m){if(!(!c(m)&&m[""+d]===!0)){if(t.clearCell(),e.rowIndex>i.rowIndex){var S=e;e=i,i=S}for(var y=e.rowIndex;y<=i.rowIndex;y++){t.selectionSettings.cellSelectionMode.indexOf("Box")<0?(o=y===e.rowIndex?e.cellIndex:0,a=y===i.rowIndex?i.cellIndex:t.getLastColIndex(y)):(o=e.cellIndex,a=i.cellIndex),p=[];for(var R=o<a?o:a,w=o>a?o:a;R<=w;R++)n=t.parent.isSpan?Us(r,y,R):r.getCellFromIndex(y,R),n&&(p.push(R),t.updateCellSelection(n),t.addAttribute(n));t.selectedRowCellIndexes.push({rowIndex:y,cellIndexes:p})}var F={data:u,cellIndex:h,currentCell:r.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:t.selectedRowCellIndexes,previousRowCell:t.prevECIdxs?t.getCellIndex(t.prevECIdxs.rowIndex,t.prevECIdxs.cellIndex):void 0},L="previousRowCellIndex";F[""+L]=t.prevECIdxs,t.isDragged||(t.onActionComplete(F,Hi),t.cellselected=!0),t.updateCellProps(l,h)}})}}},s.prototype.selectCells=function(e){if(this.isCellType()){var i=this.parent,t=i.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0]);this.currentIndex=e[0].rowIndex;var r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var n={data:r,cellIndex:e[0].cellIndexes[0],currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},o="previousRowCellIndex";n[""+o]=this.prevECIdxs,this.onActionBegin(n,ai);for(var a=0,l=e.length;a<l;a++)for(var h=0,p=e[parseInt(a.toString(),10)].cellIndexes.length;h<p;h++)t=i.getCellFromIndex(e[parseInt(a.toString(),10)].rowIndex,e[parseInt(a.toString(),10)].cellIndexes[parseInt(h.toString(),10)]),t&&(this.updateCellSelection(t),this.addAttribute(t),this.addRowCellIndex({rowIndex:e[parseInt(a.toString(),10)].rowIndex,cellIndex:e[parseInt(a.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});var d={data:r,cellIndex:e[0].cellIndexes[0],currentCell:t,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},u="previousRowCellIndex";d[""+u]=this.prevECIdxs,this.onActionComplete(d,Hi)}}},s.prototype.addCellsToSelection=function(e){if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))){var i=this.parent,t,r;this.currentIndex=e[0].rowIndex;var n="cancel",o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var a;a=i.getRowsObject()[e[0].rowIndex],i.groupSettings.columns.length>0&&(a=i.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var l=[],h=0,p=e;h<p.length;h++){for(var d=p[h],u=0,f=this.selectedRowCellIndexes.length;u<f;u++)if(this.selectedRowCellIndexes[parseInt(u.toString(),10)].rowIndex===d.rowIndex){r=u;break}t=i.getCellFromIndex(d.rowIndex,this.getColIndex(d.rowIndex,d.cellIndex));var g=d.cellIndex;i.groupSettings.columns.length>0?l.push(a.cells[g+i.groupSettings.columns.length].foreignKeyData):l.push(a.cells[parseInt(g.toString(),10)].foreignKeyData);var m={cancel:!1,data:o,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},S="previousRowCellIndex";m[""+S]=this.prevECIdxs;var y=r>-1;if(y){var R=this.selectedRowCellIndexes[parseInt(r.toString(),10)].cellIndexes;R.indexOf(d.cellIndex)>-1||this.selectionSettings.mode==="Both"&&t.classList.contains("e-gridchkbox")&&!t.getAttribute("aria-selected")?(this.cellDeselect(Cs,[{rowIndex:d.rowIndex,cellIndexes:[d.cellIndex]}],o,[t],l),R.splice(R.indexOf(d.cellIndex),1),R.length===0&&this.selectedRowCellIndexes.splice(r,1),t.classList.remove("e-cellselectionbackground"),t.removeAttribute("aria-selected"),this.cellDeselect(bs,[{rowIndex:d.rowIndex,cellIndexes:[d.cellIndex]}],o,[t],l)):(y=!1,this.onActionBegin(m,ai),this.addRowCellIndex({rowIndex:d.rowIndex,cellIndex:d.cellIndex}),this.updateCellSelection(t),this.addAttribute(t))}else{if(this.onActionBegin(m,ai),!c(m)&&m[""+n]===!0)return;this.updateCellSelection(t,d.rowIndex,d.cellIndex)}if(!y){var w={data:o,cellIndex:e[0],currentCell:t,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};w[""+S]=this.prevECIdxs,this.onActionComplete(w,Hi),this.cellselected=!0}this.updateCellProps(d,d)}}}},s.prototype.getColIndex=function(e,i){var t=this.parent.getColumnByIndex(i),r=Oo(this.parent,t,e);if(r)for(var n=0;n<r.length;n++){var o=parseInt(r[parseInt(n.toString(),10)].getAttribute(ne),10)-1;if(o===i)return n}return-1},s.prototype.getLastColIndex=function(e){var i=this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(i[i.length-1].getAttribute(ne),10)-1},s.prototype.clearCell=function(){this.clearCellSelection()},s.prototype.cellDeselect=function(e,i,t,r,n){var o="cancel";if(r&&r.length>0)for(var a=0,l=r;a<l.length;a++){var h=l[a];h&&h.classList.contains(Zt)&&this.updateCheckBoxes(M(h,"tr"))}var p={cells:r,data:t,cellIndexes:i,foreignKeyData:n,cancel:!1};this.parent.trigger(e,p),this.isPreventCellSelect=p[""+o]},s.prototype.updateCellSelection=function(e,i,t){c(i)||this.addRowCellIndex({rowIndex:i,cellIndex:t}),e.classList.add("e-cellselectionbackground"),e.classList.contains(Zt)&&this.updateCheckBoxes(M(e,"tr"),!0),this.addAttribute(e)},s.prototype.addAttribute=function(e){this.target=e,c(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0,!0))},s.prototype.updateCellProps=function(e,i){this.prevCIdxs=e,this.prevECIdxs=i,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},s.prototype.addRowCellIndex=function(e){for(var i,t,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[parseInt(r.toString(),10)].rowIndex===e.rowIndex){i=!0,t=r;break}i?this.selectedRowCellIndexes[parseInt(t.toString(),10)].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(t.toString(),10)].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},s.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,i=this.getSelectedCellsElement(),t=this.selectedRowCellIndexes,r=[],n=[],o=[],a=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var l=0,h=t.length;l<h;l++){r.push(a[t[parseInt(l.toString(),10)].rowIndex]);for(var p=this.getRowObj(t[parseInt(l.toString(),10)].rowIndex),d=0,u=t[parseInt(l.toString(),10)].cellIndexes.length;d<u;d++)p.cells&&o.push(p.cells[t[parseInt(l.toString(),10)].cellIndexes[parseInt(d.toString(),10)]].foreignKeyData),n.push(e.getCellFromIndex(t[parseInt(l.toString(),10)].rowIndex,t[parseInt(l.toString(),10)].cellIndexes[parseInt(d.toString(),10)]))}if(this.cellDeselect(Cs,t,r,n,o),this.isPreventCellSelect===!0)return;for(var l=0,h=i.length;l<h;l++)i[parseInt(l.toString(),10)].classList.remove("e-cellselectionbackground"),i[parseInt(l.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(bs,t,r,n,o)}},s.prototype.getSelectedCellsElement=function(){for(var e=this.parent,i=e.getDataRows(),t=[],r=0,n=i.length;r<n;r++)t=t.concat([].slice.call(i[parseInt(r.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return t},s.prototype.mouseMoveHandler=function(e){e.preventDefault(),this.stopTimer();var i=this.parent.element.getBoundingClientRect(),t=this.x,r=this.y,n=Sn(e),o=n.x-i.left,a=n.y-i.top,l,h=M(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=M(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),t>o&&(l=o,o=t,t=l),r>a&&(l=a,a=r,r=l),this.element.style.left=t+"px",this.element.style.top=r+"px",this.element.style.width=o-t+"px",this.element.style.height=a-r+"px"),h&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(h.getAttribute(ee),10)-1;if(!this.isCellDrag)this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0;else{var d=b(e.target,U);d&&(this.startAFCell=this.startCell,this.endAFCell=b(e.target,U),p>-1&&this.selectLikeExcel(e,p,parseInt(d.getAttribute(ne),10)-1))}}!e.ctrlKey&&!e.shiftKey&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.isCellDrag&&this.updateScrollPosition(e,n,this.parent.getContent())},s.prototype.updateScrollPosition=function(e,i,t){var r=this,n=t.getBoundingClientRect();n.left>=i.x-20-(this.parent.enableRtl&&this.parent.height!=="auto"?De():0)?this.timer1=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,r.parent.enableRtl?"right":"left",e)},200):n.left+t.clientWidth-20-(!this.parent.enableRtl&&this.parent.height!=="auto"?De():0)<i.x&&(this.timer1=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,r.parent.enableRtl?"left":"right",e)},200)),n.top>=i.y-this.parent.getRowHeight()*.5?this.timer2=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,"up",e)},200):n.top+t.clientHeight-this.parent.getRowHeight()*.5-(t.firstElementChild.scrollWidth>t.firstElementChild.offsetWidth?De():0)<=i.y&&(this.timer2=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,"down",e)},200))},s.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},s.prototype.setScrollPosition=function(e,i,t){var r=-1,n=-1;switch((this.endAFCell||this.prevECIdxs)&&(r=this.endAFCell?parseInt(this.endAFCell.getAttribute("index"),10):this.prevECIdxs.rowIndex,n=this.endAFCell?parseInt(this.endAFCell.getAttribute("aria-colindex"),10)-1:this.prevECIdxs.cellIndex),i){case"up":if(t&&M(t.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes.length===1&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r-=1,this.parent.frozenRows&&(r+=this.parent.frozenRows+1),r<1?e.scrollTop=0:e.scrollTop-=this.parent.getRowByIndex(r).offsetHeight;break;case"down":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r<this.parent.getRows().length-1?(r+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(r,this.selectedRowCellIndexes[0].cellIndexes[0])),e.scrollTop+=this.parent.getRowByIndex(r).offsetHeight):e.scrollTop=e.scrollHeight;break;case"left":if(n>0&&r>-1){this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&(!this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left>0||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(n=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);var o=this.findNextCell(e,i,n,r);n=o?parseInt(o.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&o?n<1?e.scrollLeft=e.scrollWidth:e.scrollLeft+=o.offsetWidth:o&&(n<1?e.scrollLeft=0:e.scrollLeft-=o.offsetWidth)}break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(n=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);var a=this.parent.getCellFromIndex(r,n),l=this.findNextCell(e,i,n,r);l&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(l.getAttribute("aria-colindex"),10)-1)),n=l?parseInt(l.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&l?n<this.parent.columns.length-1?e.scrollLeft-=a.offsetWidth:e.scrollLeft=-e.scrollWidth:l&&(n<this.parent.columns.length-1?e.scrollLeft+=a.offsetWidth:e.scrollLeft=e.scrollWidth),this.isAutoFillSel&&(n===this.parent.columns.length-1||n===-1)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),e.scrollLeft=this.parent.enableRtl?-e.scrollWidth:e.scrollWidth);break}if(r>-1&&r<this.parent.getRows().length&&n>-1){var h={target:this.parent.getCellFromIndex(r,n)};if(this.isAutoFillSel&&h.target.classList.contains("e-cellselectionbackground")&&(i==="down"&&parseInt(h.target.getAttribute("index"),10)===this.parent.getRows().length-1||i==="right"&&parseInt(h.target.getAttribute("aria-colindex"),10)-1===this.parent.columns.length-1))return;this.endAFCell=h.target,this.preventFocus=!0,this.selectLikeExcel(h,r,n)}},s.prototype.findNextCell=function(e,i,t,r){var n=this.parent.getCellFromIndex(r,i==="left"?t-1:t+1);if(n&&n.classList.contains("e-hide")){var o=n.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),a=Array.from(o).indexOf(n.nextElementSibling);return a>0&&a<o.length-1?(n=o[a+(i==="left"?-1:1)],n):(e.scrollLeft=0,null)}return n},s.prototype.selectLikeExcel=function(e,i,t){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:t}),this.drawBorders())},s.prototype.setFrozenBorders=function(e,i,t){var r=i.style.borderWidth.toString().split(" "),n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"],o=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+t])).filter(function(R){return R.style.display===""}),a=[].slice.call(e.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(R){return R.style.display===""}),l=this.parent.enableRtl;if(o.length)for(var h=o[0].getAttribute("index"),p=o[0].getAttribute("aria-colindex"),d=o[o.length-1].getAttribute("index"),u=o[o.length-1].getAttribute("aria-colindex"),f=0;f<o.length;f++)o[parseInt(f.toString(),10)].getAttribute("index")===h&&(r.length===1||r.length===3&&parseInt(r[0],10)===2||r.length===4&&parseInt(r[0],10)===2)&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),o[parseInt(f.toString(),10)].getAttribute("aria-colindex")===p&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&(!l&&parseInt(r[3],10)===2||l&&parseInt(r[1],10)===2))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border"),o[parseInt(f.toString(),10)].getAttribute("index")===d&&(r.length===1||r.length===3&&parseInt(r[2],10)===2||r.length===4&&parseInt(r[2],10)===2)&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),o[parseInt(f.toString(),10)].getAttribute("aria-colindex")===u&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&!l&&parseInt(r[1],10)===2||l&&parseInt(r[3],10)===2)&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border");if(a.length)for(var h=a[0].getAttribute("index"),p=(parseInt(a[0].getAttribute("aria-colindex"),10)-1).toString(),d=a[a.length-1].getAttribute("index"),u=(parseInt(a[a.length-1].getAttribute("aria-colindex"),10)-1).toString(),f=0;f<a.length;f++){var g=a[parseInt(f.toString(),10)].getAttribute("index"),m=(parseInt(a[parseInt(f.toString(),10)].getAttribute("aria-colindex"),10)-1).toString();g===h&&(!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&b(e,"e-content")||!b(e,"e-content"))&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),g===d&&(!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&b(e,"e-headercontent")||!b(e,"e-headercontent"))&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border");var S=a[parseInt(f.toString(),10)].parentElement.children[parseInt(m,10)-1];m===p&&(!S||S&&!S.classList.contains("e-cellselectionbackground"))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border");var y=a[parseInt(f.toString(),10)].parentElement.children[parseInt(m,10)+1];m===u&&(!y||y&&!y.classList.contains("e-cellselectionbackground"))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border")}},s.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===Xe&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===Xe&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},s.prototype.drawBorders=function(){this.selectionSettings.cellSelectionMode==="BoxWithBorder"&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},s.prototype.isLastCell=function(e){var i=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return i[i.length-1]===e},s.prototype.isLastRow=function(e){var i=[].slice.call(M(e,j).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===i[i.length-1]},s.prototype.isFirstRow=function(e){var i=[].slice.call(M(e,j).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===i[0]},s.prototype.isFirstCell=function(e){var i=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return i[0]===e},s.prototype.setBorders=function(e,i,t){var r=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(S){return S.style.display===""});if(r.length&&this.parent.isFrozenGrid()){var n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"];r=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+t]+":not(.e-hide)")).filter(function(S){return S.style.display===""})}if(r.length){var o=this.parent.isFrozenGrid(),a=r[0],l=r[r.length-1],h=a.getBoundingClientRect(),p=l.getBoundingClientRect(),d=a.offsetParent.getBoundingClientRect();(a.offsetParent.classList.contains("e-content")||a.offsetParent.classList.contains("e-headercontent"))&&(d=a.offsetParent.querySelector("table").getBoundingClientRect());var u=!o&&this.isLastRow(l)&&(t==="1"||t==="2"||t==="5")?2:0,f=0,g=o&&(t==="2"||t==="4")&&this.isFirstCell(a)?1:0,m=(this.parent.getFrozenMode()==="Right"&&(t==="1"||t==="3")||this.parent.getFrozenMode()===Xe&&(t==="5"||t==="6"))&&this.isFirstCell(a)?1:0;this.parent.enableRtl?(i.style.right=d.right-h.right-g+"px",i.style.width=h.right-p.left+g+1+"px"):(i.style.left=h.left-d.left-g-m+"px",i.style.width=p.right-h.left+g-m+1+"px"),i.style.top=h.top-d.top-f+"px",i.style.height=p.top-h.top>0?p.top-d.top+p.height+(o?0:1)-(h.top-d.top)-u+f+"px":p.height+f-u+(o?0:1)+"px",this.selectDirection+=t}else i.style.display="none"},s.prototype.positionBorders=function(){this.updateStartEndCells(),!(!this.startCell||!this.bdrElement||!this.selectedRowCellIndexes.length)&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Xe&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Xe&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},s.prototype.applyBothFrozenBorders=function(e){var i=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=i?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=i?this.top_left:this.top_right,this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=i?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border);break}},s.prototype.applyBorders=function(e){var i=this.parent.enableRtl;if(this.parent.getFrozenMode()===Xe)this.applyBothFrozenBorders(e);else switch(e.length){case 4:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=i?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=i?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=i?this.top_left:this.top_right);break;case 2:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=e.includes("2")?i?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?i?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:i?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:i?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?i?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?i?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:i?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:i?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border));break}},s.prototype.createBorders=function(){if(!this.bdrElement){var e=le("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr"});if(e.style.cssText="width: 2px; border-width: 0;",this.bdrElement=this.parent.getContentTable().parentElement.appendChild(e),this.parent.isFrozenGrid()){var i=le("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr"});if(i.style.cssText="height: 2px; border-width: 0;",this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(i),this.parent.getFrozenMode()===Xe){var t=le("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr"});t.style.cssText="height: 2px; border-width: 0;",this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(t)}}if(this.parent.frozenRows){var r=le("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr"});r.style.height="2px",this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(r)}if(this.parent.frozenRows&&this.parent.isFrozenGrid()){var n=le("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr"});if(n.style.height="2px",this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(n),this.parent.getFrozenMode()===Xe){var o=le("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr"});o.style.height="2px",this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(o)}}}},s.prototype.showHideBorders=function(e,i){if(this.bdrElement){if(this.bdrElement.style.display=e,this.parent.isFrozenGrid()){var t=this.parent.getContentTable();E(t.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),E(t.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),E(t.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),E(t.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),i||(this.mcBdrElement.style.display=e),this.parent.getFrozenMode()===Xe&&(this.frcBdrElement.style.display=e)}if(this.parent.frozenRows){var t=this.parent.getHeaderTable();E(t.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),E(t.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),E(t.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),E(t.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=e}this.parent.frozenRows&&this.parent.isFrozenGrid()&&(i||(this.mhBdrElement.style.display=e),this.parent.getFrozenMode()===Xe&&(this.frhBdrElement.style.display=e))}},s.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},s.prototype.positionAFBorders=function(){if(!(!this.startCell||!this.bdrAFLeft)){var e=this.startAFCell.getBoundingClientRect(),i=this.endAFCell.getBoundingClientRect(),t=i.top-e.top>0?1:0,r=i.top-e.top>=0&&(b(this.startAFCell,qi)||b(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(b(this.startAFCell,qi)||b(this.startAFCell,vn))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(b(this.endAFCell,qi)||b(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,p=this.startAFCell.offsetParent.parentElement.scrollLeft,d=h-this.startAFCell.offsetTop,u=p-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight-De();this.parent.allowPaging&&(f-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(f-=this.parent.getFooterContent().offsetHeight);var g=this.parent.element.clientWidth-(this.parent.height!=="auto"?De():0);d=d>0?Math.floor(d)-1:0,u=u>0?u:0;var m=e.left-l.left;if(this.parent.enableRtl){var y=b(this.startAFCell,qi)||b(this.startAFCell,vn)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-i.right-2+i.width+"px",this.bdrAFLeft.style.width=g<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px";var R=l.right-e.right-n+y-1;R>0?this.bdrAFRight.style.right=R+"px":this.bdrAFRight.style.right="0px",this.bdrAFTop.style.left=i.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.parent.height!=="auto"&&De()?(this.bdrAFTop.style.left=De()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-De()+"px"):this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=m-n+u-1+"px",this.bdrAFRight.style.left=i.left-l.left-2+i.width+"px",this.bdrAFRight.style.width=g<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=m+u-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",g<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var S=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-g;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-S+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-r+d+"px",this.bdrAFLeft.style.height=i.top-e.top>0?i.top-a.top+i.height+1-(e.top-a.top)+r-o-d+"px":i.height+r-o-d+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-t-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var w=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-w+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},s.prototype.createAFBorders=function(){if(!this.bdrAFLeft){var e=le("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft"});e.style.width="2px",this.bdrAFLeft=this.parent.element.appendChild(e);var i=le("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright"});i.style.width="2px",this.bdrAFRight=this.parent.element.appendChild(i);var t=le("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom"});t.style.height="2px",this.bdrAFBottom=this.parent.element.appendChild(t);var r=le("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop"});r.style.height="2px",this.bdrAFTop=this.parent.element.appendChild(r)}},s.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null),this.autofill&&(this.autofill.remove(),this.autofill=null)},s.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},s.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},s.prototype.updateValue=function(e,i,t){var r=this.createBeforeAutoFill(e,i,t);if(!r.cancel){var n=this.parent.getColumnByIndex(i);this.parent.editModule&&t&&(n.type==="number"?this.parent.editModule.updateCell(e,n.field,parseFloat(r.value)):this.parent.editModule.updateCell(e,n.field,r.value))}},s.prototype.createBeforeAutoFill=function(e,i,t){var r=this.parent.getColumnByIndex(i),n={column:r,value:t.innerText};return this.parent.trigger(Wa,n),n},s.prototype.getAutoFillCells=function(e,i){var t=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll(t));return r},s.prototype.selectLikeAutoFill=function(e,i){var t=parseInt(b(this.startAFCell,Se).getAttribute(ee),10)-1,r=parseInt(this.startAFCell.getAttribute(ne),10)-1,n=parseInt(b(this.endAFCell,Se).getAttribute(ee),10)-1,o=parseInt(this.endAFCell.getAttribute(ne),10)-1,a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case(!i&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!b(e.target,U)):this.startAFCell=this.parent.getCellFromIndex(t,r),this.endAFCell=this.parent.getCellFromIndex(t+a,r+l),this.drawAFBorders();break;case(this.autoFillRLselection&&r+l<o&&o-r-l+1>n-t-a&&o-r-l+1>t-n):if(this.endAFCell=this.parent.getCellFromIndex(t+a,o),n=parseInt(b(this.endAFCell,Se).getAttribute(ee),10)-1,o=parseInt(this.endAFCell.getAttribute(ne),10)-1,!i)this.drawAFBorders();else{for(var h=parseInt(this.endCell.getAttribute(ne),10)-1,p=t;p<=n;p++)for(var d=this.getAutoFillCells(p,r),u=0,f=h+1;f<=o;f++)u>l&&(u=0),this.updateValue(p,f,d[parseInt(u.toString(),10)]),u++;this.selectCellsByRange({rowIndex:t,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:o})}break;case(this.autoFillRLselection&&r>o&&r-o+1>n-t-a&&r-o+1>t-n):if(this.startAFCell=this.parent.getCellFromIndex(t,o),this.endAFCell=this.endCell,!i)this.drawAFBorders();else{for(var p=t;p<=t+a;p++){var d=this.getAutoFillCells(p,r);d.reverse();for(var u=0,f=this.startCellIndex-1;f>=o;f--)u>l&&(u=0),this.updateValue(p,f,d[parseInt(u.toString(),10)]),u++}this.selectCellsByRange({rowIndex:t,cellIndex:o},{rowIndex:t+a,cellIndex:this.startCellIndex+l})}break;case t>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,!i)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(ee),10)-1,m=g,p=t-1;p>=n;p--){m===this.startIndex-1&&(m=g);var d=this.getAutoFillCells(m,r),u=0;m--;for(var f=this.startCellIndex;f<=this.startCellIndex+l;f++)this.updateValue(p,f,d[parseInt(u.toString(),10)]),u++}this.selectCellsByRange({rowIndex:n,cellIndex:r+l},{rowIndex:t+a,cellIndex:r})}break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+l),!i)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(ee),10)-1,m=this.startIndex,p=g+1;p<=n;p++){m===g+1&&(m=this.startIndex);var d=this.getAutoFillCells(m,r);m++;for(var u=0,S=this.startCellIndex;S<=this.startCellIndex+l;S++)this.updateValue(p,S,d[parseInt(u.toString(),10)]),u++}this.selectCellsByRange({rowIndex:g-a,cellIndex:r},{rowIndex:n,cellIndex:r+l})}break}},s.prototype.mouseUpHandler=function(e){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!c(this.element.parentElement)&&q(this.element),this.isDragged&&this.selectedRowCellIndexes.length===1&&this.selectedRowCellIndexes[0].cellIndexes.length===1?this.mUPTarget=b(e.target,U):this.mUPTarget=null;var i=M(e.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&this.selectionSettings.mode==="Cell"&&i&&i.classList.contains(U)){var t=parseInt(i.parentElement.getAttribute(ee),10)-1,r=parseInt(i.getAttribute(ne),10)-1;this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:r})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.preventFocus=!0;var n=b(e.target,U);this.endAFCell=n||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,!c(this.endAFCell)&&!c(this.startAFCell)&&(this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.parent.aggregates.length>0&&this.parent.notify(tn,{})),this.isAutoFillSel=!1,this.preventFocus=!1}I.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&I.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),I.remove(document,"mouseup",this.mouseUpHandler)},s.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},s.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(ne),10)-1,i=parseInt(this.target.getAttribute("index"),10),t=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,r=this.getAutoFillCells(t,e).filter(function(g){return g.style.display===""}),n=this.parent.getColumnByIndex(e),o=n.getFreezeTableName()==="movable",a=i<this.parent.frozenRows,l=this.parent.getFrozenMode()===Xe&&n.getFreezeTableName()===lh;Fe("#"+this.parent.element.id+"_autofill",b(this.target,ft))||(Fe("#"+this.parent.element.id+"_autofill",this.parent.element)&&Fe("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=le("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),a?o?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.getContentTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));var h=r[r.length-1];if(h&&h.offsetParent){var p=h.getBoundingClientRect(),d=h.offsetParent.getBoundingClientRect();(h.offsetParent.classList.contains("e-content")||h.offsetParent.classList.contains("e-headercontent"))&&(d=h.offsetParent.querySelector("table").getBoundingClientRect());var u=this.isLastCell(h)?4:0,f=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=d.right-p.right+p.width-4-u+"px":this.autofill.style.left=p.left-d.left+p.width-4-u+"px",this.autofill.style.top=p.top-d.top+p.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},s.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var i=e.target,t=this.parent,r,n=b(i,"e-grid");if(!(n&&n.id!==t.element.id||b(i,me)&&!this.parent.frozenRows||b(i,"e-editedbatchcell")||b(i,di))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),b(i,U)&&!e.shiftKey&&!e.ctrlKey){if(t.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,r=!0;else if(t.allowRowDragAndDrop&&!t.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||M(i,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}r=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),t.getContent().appendChild(this.element)}r&&this.enableDrag(e,!0)}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},s.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(ee),10)-1,this.startCellIndex=parseInt(b(this.startCell,U).getAttribute(ne),10)-1)},s.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(ee),10)-1,this.startCellIndex=parseInt(b(this.startCell,U).getAttribute(ne),10)-1)},s.prototype.enableDrag=function(e,i){var t=this.parent;if(i){var r=M(e.target,"tr");this.startDIndex=parseInt(r.getAttribute(ee),10)-1,this.startDCellIndex=parseInt(b(e.target,U).getAttribute(ne),10)-1}document.body.classList.add("e-disableuserselect");var n=t.element.getBoundingClientRect(),o=Sn(e);this.x=o.x-n.left,this.y=o.y-n.top,I.add(t.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&I.add(t.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),I.add(document,"mouseup",this.mouseUpHandler,this)},s.prototype.clearSelAfterRefresh=function(e){var i=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";if(e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!i&&this.clearSelection(),(e.requestType==="virtualscroll"||i)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var t=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),r=[];this.selectedRowState={},this.persistSelectedData=[];for(var n=0;n<t.length;n++){r.push(t[parseInt(n.toString(),10)].index);var o=this.getPkValue(this.primaryKey,t[parseInt(n.toString(),10)].data);this.selectedRowState[""+o]=!0,this.persistSelectedData.push(t[parseInt(n.toString(),10)].data)}this.selectedRowIndexes=r}},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ue,handler:this.enableAfterRender},{event:Ln,handler:this.initializeSelection},{event:Ya,handler:this.onActionComplete},{event:Ja,handler:this.onActionComplete},{event:Ne,handler:this.onPropertyChanged},{event:sn,handler:this.onCellFocused},{event:go,handler:this.clearSelAfterRefresh},{event:co,handler:this.columnPositionChanged},{event:pe,handler:this.initialEnd},{event:on,handler:this.rowsRemoved},{event:mt,handler:this.refreshHeader},{event:rn,handler:this.destroyAutoFillElements},{event:St,handler:this.destroy}],Ft(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(st,this.actionBeginFunction),this.parent.addEventListener(Me,this.actionCompleteFunction),this.addEventListener_checkbox())},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(I.remove(document,"mouseup",this.mouseUpHandler),I.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),I.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),Ft(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(st,this.actionBeginFunction),this.parent.removeEventListener(Me,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(rn,this.destroyAutoFillElements))},s.prototype.wireEvents=function(){this.isMacOS=navigator.userAgent.indexOf("Mac OS")!==-1,this.isMacOS?(I.add(this.parent.element,"keydown",this.keyDownHandler,this),I.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||I.add(this.parent.element,"keydown",this.keyDownHandler,this)},s.prototype.unWireEvents=function(){this.isMacOS?(I.remove(this.parent.element,"keydown",this.keyDownHandler),I.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||I.remove(this.parent.element,"keydown",this.keyDownHandler)},s.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},s.prototype.refreshHeader=function(){var e=this.parent.getColumns().filter(function(i){return i.type==="checkbox"});e.length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),this.setCheckAllState()},s.prototype.rowsRemoved=function(e){for(var i=0;i<e.records.length;i++){var t=this.getPkValue(this.primaryKey,e.records[parseInt(i.toString(),10)]);delete this.selectedRowState[""+t],--this.totalRecordsCount}this.setCheckAllState()},s.prototype.beforeFragAppend=function(e){e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&this.clearSelection()},s.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},s.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},s.prototype.render=function(e){I.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),I.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var i=this.parent;c(e.properties.type)||(this.selectionSettings.type==="Single"?(i.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):this.selectionSettings.type==="Multiple"&&i.element.setAttribute("aria-multiselectable","true")),(!c(e.properties.mode)||!c(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection();var t=this.parent.getColumns().filter(function(r){return r.type==="checkbox"});t.length&&(i.isCheckBoxSelection=this.selectionSettings.checkboxMode!=="ResetOnRowClick"),this.drawBorders()}},s.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},s.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(pe,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},s.prototype.checkBoxSelectionChanged=function(){var e=this.parent;e.off(pe,this.checkBoxSelectionChanged);var i=e.getColumns().filter(function(t){return t.type==="checkbox"});i.length>0&&(e.isCheckBoxSelection=!0,this.chkField=i[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,c(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},s.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},s.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&Object.keys(this.selectedRowState).length===0||!e.isPersistSelection)&&this.dataSuccess(!c(this.parent.dataSource)&&this.parent.dataSource.result||this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json)},s.prototype.dataSuccess=function(e){for(var i=0;i<e.length;i++){var t=this.getPkValue(this.primaryKey,e[parseInt(i.toString(),10)]),r=e[parseInt(i.toString(),10)][this.chkField];c(this.selectedRowState[""+t])&&r&&typeof r=="boolean"&&(this.selectedRowState[""+t]=r,this.parent.isPersistSelection&&this.persistSelectedData.push(e[parseInt(i.toString(),10)]))}},s.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)if(e){var u=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var g=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData,m=0,S=g;m<S.length;m++){var h=S[m];if(!c(h[this.primaryKey])){var y=h[this.primaryKey].toString();u.indexOf(y)===-1&&f.indexOf(y)===-1&&(this.selectedRowState[h[this.primaryKey]]=!0)}}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(e)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=this.parent.getRowsObject().filter(function(R){return R.isSelectable}),t=0,r=i;t<r.length;t++){var n=r[t];this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=!0}else{var o=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,l=this.isPartialSelection?o:o.records;a<l.length;a++){var h=l[a];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}else for(var p=0,d=o;p<d.length;p++){var h=d[p];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}}else this.selectedRowState={}},s.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},s.prototype.getAvailableSelectedData=function(e){var i=new _(e).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&i&&i.records&&(i=i.records.slice()),i},s.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!c(e)&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var i=[],t=0;t<e.length;t++){var r=this.getRowObj(e[parseInt(t.toString(),10)]),n=r&&r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;if(!(this.isPartialSelection&&!r.isSelectable)){var o=void 0,a=e[parseInt(t.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+n]||this.parent.checkAllRows==="Check"&&this.selectedRowState[""+n]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||this.parent.checkAllRows==="Uncheck"&&this.chkAllCollec.indexOf(n)>0&&!this.parent.selectedRowIndex||this.parent.checkAllRows==="Intermediate"&&!c(this.chkField)&&r.data[this.chkField]?(i.push(parseInt(e[parseInt(t.toString(),10)].getAttribute(ee),10)-1),o=!0):(o=!1,this.checkedTarget!==a&&this.parent.isCheckBoxSelection&&a&&Ji(a.nextElementSibling,o)),this.updatePersistCollection(e[parseInt(t.toString(),10)],o)}}this.isSingleSel()&&i.length>0?this.selectRow(i[0],!0):this.selectRows(i)}(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick")&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},s.prototype.actionBegin=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){var i=this.parent.element.querySelector(".e-edit-checkselect");if(!c(i)){var t=M(i,"."+di);if(t){this.parent.editSettings.mode==="Dialog"&&(t=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(t);if(!r)return;this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=r.isSelected=i.checked}else this.isCheckedOnAdd=i.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&e.requestType==="paging"&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[])},s.prototype.actionComplete=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){if(e.action==="add"){if(this.isCheckedOnAdd){var i=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,i.data)]=i.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if(e.requestType==="delete"&&this.parent.isPersistSelection){for(var t=e.data,r=t.slice(),n=0;n<r.length;n++){var o=this.getPkValue(this.primaryKey,r[parseInt(n.toString(),10)]);c(o)||this.updatePersistDelete(o,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if(e.requestType==="paging"){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var a=this.parent.getRowsObject(),l=[],n=0;n<a.length;n++)a[parseInt(n.toString(),10)].isSelectable&&l.push(a[parseInt(n.toString(),10)].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},s.prototype.onDataBound=function(){var e=this.parent.getColumns().filter(function(n){return n.type==="checkbox"});if(e.length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked||this.isPartialSelection&&this.parent.isPersistSelection&&this.isHdrSelectAllClicked)&&(this.parent.checkAllRows==="Intermediate"?this.setRowSelection(!0):this.parent.checkAllRows==="Uncheck"&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var i=this.parent.getRowsObject(),t=[],r=0;r<i.length;r++)i[parseInt(r.toString(),10)].isSelected&&t.push(r);t.length&&this.selectRows(t),this.initialRowSelection=!0}},s.prototype.updatePersistSelectedData=function(e){var i=this;if(this.parent.isPersistSelection){var t=[];if(this.parent.checkAllRows==="Check"&&(this.parent.searchSettings.key.length>0||this.parent.filterSettings.columns.length>0)&&this.persistSelectedData.length&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection){var r=this.getAvailableSelectedData(this.persistSelectedData),n=new Set(r.map(function(l){return l[i.primaryKey]}));t=this.persistSelectedData.filter(function(l){return!n.has(l[i.primaryKey])})}for(var o=this.parent.getRows(),a=0;a<o.length;a++)this.updatePersistCollection(o[parseInt(a.toString(),10)],e);if(this.parent.checkAllRows==="Uncheck")this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[];else if(this.parent.checkAllRows==="Check"&&(this.setRowSelection(!0),this.persistSelectedData=!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection?this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice():this.persistSelectedData,t.length>0))for(var a=0;a<t.length;a++)this.persistSelectedData.push(t[parseInt(a.toString(),10)])}},s.prototype.checkSelectAllAction=function(e){var i=this.getRenderer(),t=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(i.getVirtualRowIndex(0),i.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1)),this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(this.virtualSelectedData=this.virtualCheckBoxData().slice(),this.selectedRowIndexes=Object.keys(this.virtualSelectedData).map(function(n){return parseInt(n,10)}))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!c(t)){var r=t.querySelector(".e-edit-checkselect");c(r)||Ji(r.nextElementSibling,e)}},s.prototype.checkSelectAll=function(e){var i=this,t=this.getCheckAllStatus(e),r=t==="Check";if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(t==="Uncheck"||this.isCheckboxReset||t==="Intermediate"&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,t==="Intermediate"&&(!this.chkField&&!this.parent.isPersistSelection&&(r=this.getCurrentBatchRecordChanges().some(function(a){return i.getPkValue(i.primaryKey,a)in i.selectedRowState})),this.parent.isPersistSelection)){if(this.parent.allowPaging&&this.isPartialSelection)for(var n=this.parent.getRowsObject(),o=0;o<n.length;o++)if(n[o].isDataRow&&n[o].isSelectable&&!n[o].isSelected){r=!1;break}else r=!0;else if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result){for(var o=0;o<this.getCurrentBatchRecordChanges().length;o++)if(!c(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+o])))if(Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+o]).toString()))r=!0;else{r=!1;break}}}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!r)},s.prototype.getCheckAllStatus=function(e){var i;c(e)?c(this.getCheckAllBox())||(i=this.getCheckAllBox().nextElementSibling.classList):i=e.nextElementSibling.classList;var t="None";return i instanceof DOMTokenList&&(i.contains("e-check")?t="Check":i.contains("e-uncheck")?t="Uncheck":i.contains("e-stop")&&(t="Intermediate")),t},s.prototype.checkSelect=function(e){var i=M(this.checkedTarget,"."+U),t=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,nt(t)){var n=i.parentElement.getAttribute("data-uid");this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?r=parseInt(i.parentElement.getAttribute(ee),10)-1:r=t.getRows().map(function(o){return o.getAttribute("data-uid")}).indexOf(n)}else r=parseInt(i.parentElement.getAttribute(ee),10)-1;this.parent.isPersistSelection&&this.parent.element.getElementsByClassName($t).length>0&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.editSettings.showAddNewRow&&++r,this.rowCellSelectionHandler(r,parseInt(i.getAttribute(ne),10)-1),this.moveIntoUncheckCollection(M(i,"."+Se)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},s.prototype.moveIntoUncheckCollection=function(e){if(this.parent.checkAllRows==="Check"||this.parent.checkAllRows==="Uncheck"){var i=this.getRowObj(e),t=i&&i.data?this.getPkValue(this.primaryKey,i.data):null;if(!t)return;this.chkAllCollec.indexOf(t)<0?this.chkAllCollec.push(t):this.chkAllCollec.splice(this.chkAllCollec.indexOf(t),1)}},s.prototype.triggerChkChangeEvent=function(e,i){this.parent.trigger(Va,{checked:i,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},s.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&this.parent.checkAllRows!=="Uncheck")for(var e=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),i=0,t=e;i<t.length;i++){var r=t[i];this.selectedRowIndexes.push(r.index)}if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&this.parent.checkAllRows==="Check"){var e=this.parent.getRowsObject().filter(function(l){return l.isSelectable});if(e.length!==this.selectedRowIndexes.length)for(var n=0,o=e;n<o.length;n++){var r=o[n];this.selectedRowIndexes.indexOf(r.index)<=-1&&this.selectedRowIndexes.push(r.index)}}},s.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if(this.parent.checkAllRows==="Check"){this.selectedRowIndexes=[];for(var i=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,t=0;t<i;t++)this.selectedRowIndexes.push(t)}else if(this.parent.checkAllRows==="Uncheck")this.selectedRowIndexes=[];else{var r=this.parent.getRowByIndex(e);if(e&&r&&r.getAttribute("aria-selected")==="false"){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}}},s.prototype.isAllSelected=function(e){if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData(this.persistSelectedData).length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection)if(this.parent.allowPaging&&!this.selectionSettings.persistSelection&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var i=this.parent.partialSelectedRecords,t=0;t<i.length;t++){var r=this.getPkValue(this.primaryKey,i[parseInt(t.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}else return this.isSelectAllRowCount(e);else{var i=this.getData();this.parent.groupSettings.columns.length&&i.records&&(i=i.records);for(var t=0;t<i.length;t++){var r=this.getPkValue(this.primaryKey,i[parseInt(t.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}},s.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var e=this.getAvailableSelectedData(this.persistSelectedData),i=0;i<e.length;i++){var t=this.getPkValue(this.primaryKey,e[parseInt(i.toString(),10)]);if(this.selectedRowState[""+t])return!1}for(var r=this.isPartialSelection?this.getAvailableSelectedData(this.parent.partialSelectedRecords):this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),i=0;i<r.length;i++){var t=this.getPkValue(this.primaryKey,r[parseInt(i.toString(),10)]);if(this.selectedRowState[""+t])return!1}return!0},s.prototype.setCheckAllState=function(e,i){if(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick"){var t=!1,r=!1,n=Object.keys(this.selectedRowState).length;this.parent.element.classList.contains("e-treelistgrid")&&this.parent.isPersistSelection&&!this.parent.enableVirtualization&&!this.parent.getDataModule().isRemote()&&Array.isArray(this.parent.dataSource)&&n===this.parent.dataSource.length&&n>this.totalRecordsCount&&(n=this.totalRecordsCount),this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(r=!0,t=this.isAllSelected(n));var o=this.getCheckAllBox();if(o){var a=o.nextElementSibling;E([a],["e-check","e-stop","e-uncheck"]),Ot(o,!1),o.indeterminate=!1;var l=this.parent.getDataModule().isRemote()?[]:this.gridCurrentRecord;if(this.parent.groupSettings.columns.length&&l.records&&(l=l.records),this.totalRecordsCount=this.checkVirtualCheckBox()?l.length:this.totalRecordsCount,t&&r&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result||l.length)||!r&&(n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(n)||this.isHdrSelectAllClicked&&!this.parent.isPersistSelection)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&l.length&&n===l.length||(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(n===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(n)||n===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(n)))||n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(T([a],["e-check"]),Ot(o,!0),i&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!r||r&&this.someDataSelected())||n===0&&this.getCurrentBatchRecordChanges().length===0)&&!this.parent.allowPaging||this.parent.allowPaging&&(n===0||n&&r&&this.someDataSelected())?(T([a],["e-uncheck"]),i&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(T([a],["e-stop"]),this.parent.checkAllRows="Intermediate",o.indeterminate=!0),n===0&&this.getCurrentBatchRecordChanges().length===0?T([a.parentElement],["e-checkbox-disabled"]):E([a.parentElement],["e-checkbox-disabled"]),this.isPartialSelection){var h=this.parent.getRowsObject().filter(function(p){return p.isSelectable}).length;h===0&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?T([a.parentElement],["e-checkbox-disabled"]):E([a.parentElement],["e-checkbox-disabled"])}(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(e)}}},s.prototype.checkVirtualCheckBox=function(){return this.parent.enableVirtualization&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isCheckBoxSelection&&!this.isPartialSelection},s.prototype.virtualCheckBoxData=function(){var e=this.getData();return this.parent.groupSettings.columns.length&&e.records&&(e=e.records),e},s.prototype.isSelectAllRowCount=function(e){var i=0,t=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var r=this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length;return r===t.length?(i=t.filter(function(l){return l.isSelectable}).length,i&&e===i):!1}else if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var n=this.getAvailableSelectedData(this.parent.disableSelectedRecords).length,o=this.getAvailableSelectedData(this.parent.partialSelectedRecords).length,a=this.getAvailableSelectedData(this.persistSelectedData).length;return i=n+o,i===this.totalRecordsCount&&a!==0&&a===o}else return i=t.filter(function(l){return l.isSelectable}).length,i&&e===i},s.prototype.keyDownHandler=function(e){(O.info.name==="opera"&&e.keyCode===17||O.info.name==="mozilla"&&e.keyCode===224||(O.info.name==="safari"||O.info.name==="chrome")&&(e.keyCode===91||e.keyCode===93))&&(this.cmdKeyPressed=!0);var i=b(e.target,"e-headercell"),t=b(e.target,U),r=i?i.children[0].classList.contains("e-headerchkcelldiv"):t?t.classList.contains("e-gridchkbox"):!1;r&&!this.parent.allowKeyboard&&e.keyCode===32&&e.preventDefault()},s.prototype.keyUpHandler=function(e){(O.info.name==="opera"&&e.keyCode===17||O.info.name==="mozilla"&&e.keyCode===224||(O.info.name==="safari"||O.info.name==="chrome")&&(e.keyCode===91||e.keyCode===93))&&(this.cmdKeyPressed=!1)},s.prototype.clickHandler=function(e){var i=e.target;this.actualTarget=i,!this.isAutoFillSel&&!e.ctrlKey&&!e.shiftKey&&(this.startAFCell=this.endAFCell=null),this.selectionSettings.persistSelection&&(this.deSelectedData=Ur(this.persistSelectedData)),(b(i,Se)||b(i,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&i.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=e.metaKey,this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(e);var t=!1;this.preventFocus=!0;var r,n=b(i,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&b(i,Se)),this.selectionSettings.persistSelection&&this.isPartialSelection&&b(i,"e-headerchkcelldiv")&&!i.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),t=!0),this.drawBorders(),this.updateAutoFillPosition(),i=b(i,U),this.parent.isReact&&i&&!i.parentElement&&i.classList.contains("e-rowcell")&&(i=this.parent.getCellFromIndex(parseInt(i.getAttribute("index"),10),parseInt(i.getAttribute("aria-colindex"),10)-1)),this.isRowDragSelected&&c(i)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(i&&i.parentElement.classList.contains(Se)&&!this.parent.selectionSettings.checkboxOnly||t)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=i,!c(r))this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);else{var o=0;o=parseInt(i.parentElement.getAttribute(ee),10)-1,this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&this.parent.element.getElementsByClassName($t).length>0&&++o,(!this.mUPTarget||!this.mUPTarget.isEqualNode(i))&&this.rowCellSelectionHandler(o,parseInt(i.getAttribute(ne),10)-1),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(M(i,"."+Se)),this.setCheckAllState())}!this.parent.isCheckBoxSelection&&O.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){var a=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(a))}this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,c(M(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},s.prototype.popUpClickHandler=function(e){var i=e.target;M(i,".e-headercell")||e.target.classList.contains(U)||M(i,".e-gridpopup")?i.classList.contains("e-rowselect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},s.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||yp(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},s.prototype.rowCellSelectionHandler=function(e,i){if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:i},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest){var t=M(this.target,"."+U).classList.contains(Zt);this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!t||this.parent.getColumns().some(function(o){return o.type==="checkbox"})&&this.selectionSettings.checkboxMode==="ResetOnRowClick"&&t?this.selectRowsByRange(Ge(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(Ge(this.prevCIdxs)?{rowIndex:e,cellIndex:i}:this.prevCIdxs,{rowIndex:e,cellIndex:i}),this.updateAutoFillPosition(),this.drawBorders()}else{if(this.addRowsToSelection([e]),this.selectionSettings.mode==="Both"){var r=this.parent.getColumns().find(function(o){return o.type==="checkbox"}),n=r&&r.index!==i;n&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:e,cellIndex:i},this.selectionSettings.enableToggle):(!r||n)&&this.addCellsToSelection([{rowIndex:e,cellIndex:i}])}else this.addCellsToSelection([{rowIndex:e,cellIndex:i}]);this.showHideBorders("none")}this.isDragged=!1},s.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if(e.keyArgs.action==="upArrow")this.parent.allowFiltering?e.isJump=e.element.tagName==="INPUT":e.isJump=e.element.tagName==="TH";else if(e.keyArgs.action==="downArrow"){var i=Number(e.element.parentElement.getAttribute(ee))-1;e.isJump=i===0}else e.keyArgs.action==="ctrlHome"&&(e.isJump=!0);var t=(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&e.keyArgs.action==="space")&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),r=e.container.isHeader&&e.element.tagName!=="TD"&&!M(e.element,"."+U)&&!(e.byKey&&e.keyArgs.action==="space");if(!e.byKey||t){t&&!(this.parent.isCheckBoxSelection||this.selectionSettings.persistSelection&&(e.parent.classList.contains("e-recordplusexpand")||e.parent.classList.contains("e-recordpluscollapse")||e.parent.classList.contains("e-groupcaption")))&&this.clearSelection();return}var n=e.container.isContent?e.container.indexes:e.indexes,o=n[0],a=n[1],l=this.focus.getPrevIndexes();if((e.element.parentElement.querySelector(".e-rowcelldrag")||e.element.parentElement.querySelector(".e-dtdiagonalright")||e.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(l.cellIndex=l.cellIndex-1),this.parent.frozenRows)if(e.container.isHeader&&(e.element.tagName==="TD"||M(e.element,"."+U))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&e.keyArgs.action==="upArrow"&&h++,o-=h,l.rowIndex=c(l.rowIndex)?null:l.rowIndex-h}else o+=this.parent.frozenRows,l.rowIndex=l.rowIndex===0||!c(l.rowIndex)?l.rowIndex+this.parent.frozenRows:null;if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(o=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)-1),!((r||["ctrlPlusA","escape"].indexOf(e.keyArgs.action)===-1&&e.keyArgs.action!=="space"&&o===l.rowIndex&&a===l.cellIndex)&&!this.selectionSettings.allowColumnSelection)){this.parent.enableVirtualization&&(o=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)-1,!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.parent.totalDataRecordsCount>=1&&(e.keyArgs.action==="ctrlHome"?(o=0,this.parent.isFocusFirstCell=!0):e.keyArgs.action==="ctrlEnd"&&(o=this.parent.totalDataRecordsCount-1,this.isFocusLastCell=!0))),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e.keyArgs.action==="downArrow"&&o--,this.preventFocus=!0;var p=this.getKeyColIndex(e);if(this.needColumnSelection&&(a=p),this.parent.element.classList.contains("e-gridcell-read")&&(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab"||e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")){var d=this.target.getAttribute("aria-label");d=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",d)}switch(e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(o,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(o,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(o,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(o,a);break;case"home":case"end":a=e.keyArgs.action==="end"?this.getLastColIndex(o):0,this.applyHomeEndKey(o,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(o,a);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(o);break}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}},s.prototype.getKeyColIndex=function(e){var i,t=null,r=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&b(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,r){if(e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")return t;i=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(i).columns),o=this.parent.getColumnIndexByUid(n[n.length-1].uid),a=this.parent.getColumnIndexByUid(n[0].uid);t=this.prevColIndex>=o?a:o}else t=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return t},s.prototype.ctrlPlusA=function(){if(this.isRowType()&&!this.isSingleSel()){var e=this.parent.getRowsObject();this.selectRowsByRange(e[0].index,e[e.length-1].index)}this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},s.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},s.prototype.applyDownUpKey=function(e,i){var t=this.parent;this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows?(this.selectRow(e,!0),this.applyUpDown(t.selectedRowIndex)):(this.selectRow(e,!0),this.applyUpDown(t.selectedRowIndex))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:i},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(i)},s.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var i=parseInt(this.target.getAttribute(ne),10)-1,t=this.contentRenderer.getRowByIndex(e);if(t&&(this.target=t.getElementsByClassName(U)[parseInt(i.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var r=this.target.getAttribute("aria-label");r=this.target.innerHTML,this.target.setAttribute("aria-label",r)}}},s.prototype.applyRightLeftKey=function(e,i){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(i):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:i},!0),this.addAttribute(this.target))},s.prototype.applyHomeEndKey=function(e,i){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:i},!0):this.addAttribute(this.parent.getCellFromIndex(e,i))},s.prototype.shiftDownKey=function(e,i){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(Ge(this.prevRowIndex)?this.isPartialSelection?this.selectRow(e,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:i}),this.isMultiShiftRequest=!1},s.prototype.applyShiftLeftRightKey=function(e,i){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,i):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:i}),this.isMultiShiftRequest=!1},s.prototype.getstackedColumns=function(e){for(var i=[],t=0,r=e.length;t<r;t++)e[parseInt(t.toString(),10)].columns?this.getstackedColumns(e[parseInt(t.toString(),10)].columns):i.push(e[parseInt(t.toString(),10)]);return i},s.prototype.applyCtrlHomeEndKey=function(e,i){this.isRowType()&&(this.selectRow(e,!0),this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.addAttribute(this.parent.getCellFromIndex(e,i))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:i},!0)},s.prototype.addRemoveClassesForRow=function(e,i,t){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var o=[].slice.call(e.getElementsByClassName(U)),a=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),l=e.querySelector(".e-rowdragdrop");a&&o.push(a),l&&o.push(l),zt.apply(void 0,[o,i].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,i,t)},s.prototype.isRowType=function(){return this.selectionSettings.mode==="Row"||this.selectionSettings.mode==="Both"},s.prototype.isCellType=function(){return this.selectionSettings.mode==="Cell"||this.selectionSettings.mode==="Both"},s.prototype.isSingleSel=function(){return this.selectionSettings.type==="Single"},s.prototype.getRenderer=function(){return c(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(ze.Content)),this.contentRenderer},s.prototype.getSelectedRecords=function(){var e=[];return!this.selectionSettings.persistSelection&&this.selectedRecords.length?e=this.parent.getRowsObject().filter(function(i){return i.isSelected}).map(function(i){return i.data}):e=this.persistSelectedData,this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(e=this.virtualSelectedData),e},s.prototype.selectColumn=function(e){var i=this.parent;if(!c(i.getColumns()[parseInt(e.toString(),10)])){var t=i.getColumnByIndex(e),r=i.getColumnHeaderByUid(t.uid),n=r.classList.contains("e-columnselection");if(i.selectionSettings.allowColumnSelection){var o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!this.selectionSettings.enableToggle||o||!n){var a={columnIndex:e,headerCell:r,column:t,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,Vr),a.cancel){this.disableInteracted();return}(o||!(n&&i.selectionSettings.enableToggle&&e===this.prevColIndex))&&this.updateColSelection(r,e);var l={columnIndex:e,headerCell:r,column:t,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(l,Gr)}this.updateColProps(e)}}},s.prototype.selectColumnsByRange=function(e,i){var t=this.parent;if(!c(t.getColumns()[parseInt(e.toString(),10)])){var r=[];if(t.selectionSettings.type==="Single"||c(i))r[0]=e;else for(var n=e<i,o=e;n?o<=i:o>=i;n?o++:o--)r.push(o);this.selectColumns(r)}},s.prototype.selectColumns=function(e){var i=this.parent,t=this.getselectedCols();if(i.selectionSettings.type==="Single"&&(e=[e[0]]),!!i.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:e[0],headerCell:t,columnIndexes:e,column:i.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,Vr),r.cancel){this.disableInteracted();return}for(var n=0,o=e.length;n<o;n++)this.updateColSelection(i.getColumnHeaderByUid(i.getColumnByIndex(e[parseInt(n.toString(),10)]).uid),e[parseInt(n.toString(),10)]);t=this.getselectedCols();var a={columnIndex:e[0],headerCell:t,columnIndexes:e,column:i.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,Gr),this.updateColProps(e[0])}},s.prototype.selectColumnWithExisting=function(e){var i=this.parent;if(!c(i.getColumns()[parseInt(e.toString(),10)])){var t=i.getColumnHeaderByUid(i.getColumnByIndex(e).uid),r=this.getselectedCols();if(i.selectionSettings.type==="Single"&&this.clearColDependency(),!!i.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var n={columnIndex:e,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:i.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,Vr),n.cancel){this.disableInteracted();return}this.updateColSelection(t,e),r=this.getselectedCols();var o={columnIndex:e,headerCell:r,column:i.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,Gr)}this.updateColProps(e)}}},s.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var i=this.parent;if(!c(e)&&this.selectedColumnsIndexes.indexOf(e)===-1)return;var t=c(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,r=i.getColumnByIndex(t),n=i.getColumnHeaderByUid(r.uid),o={columnIndex:t,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:r,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted},a=this.columnDeselect(o,Aa);if(a){this.disableInteracted();return}for(var l=c(e)?[].slice.call(i.getHeaderContent().getElementsByClassName("e-columnselection")):[n],h=this.getSelectedColumnCells(e),p=0,d=l.length;p<d;p++)zt([l[parseInt(p.toString(),10)]],!1,"e-columnselection");for(var p=0,d=h.length;p<d;p++)zt([h[parseInt(p.toString(),10)]],!1,"e-columnselection");c(e)?(this.columnDeselect(o,Ea),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(u){return u.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!1)}},s.prototype.getselectedCols=function(){var e=this.parent,i;if(this.selectedColumnsIndexes.length>1){i=[];for(var t=0;t<this.selectedColumnsIndexes.length;t++)i.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[parseInt(t.toString(),10)]).uid))}else i=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return i},s.prototype.getSelectedColumnCells=function(e){for(var i=this.parent,t=!c(this.parent.rowTemplate),r=t?i.getRows():i.getDataRows(),n=[],o=c(e)?".e-columnselection":'[aria-colindex="'+(e+1)+'"]',a=0,l=r.length;a<l;a++)n=n.concat([].slice.call(r[parseInt(a.toString(),10)].querySelectorAll(o)));return n},s.prototype.columnDeselect=function(e,i){return i==="columnDeselected"&&delete e.cancel,this.onActionComplete(e,i),e.cancel},s.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},s.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},s.prototype.updateColSelection=function(e,i){if(!c(this.parent.getColumns()[parseInt(i.toString(),10)])){var t=!c(this.parent.rowTemplate),r=t?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(i),this.parent.getColumns()[parseInt(i.toString(),10)].isSelected=!0,i=i+this.parent.getIndentCount(),zt([e],!0,"e-columnselection");for(var n=0,o=r.length;n<o;n++)if(r[parseInt(n.toString(),10)].classList.contains(Se))if((r[parseInt(n.toString(),10)].classList.contains(di)||r[parseInt(n.toString(),10)].classList.contains($t))&&this.parent.editSettings.mode==="Normal"&&!c(r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]))zt([r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection");else if(this.parent.isSpan&&this.parent.isFrozenGrid())for(var a=r[parseInt(n.toString(),10)].querySelectorAll(".e-rowcell"),l=0;l<a.length;l++)a[parseInt(l.toString(),10)].getAttribute("aria-colindex")===e.getAttribute("aria-colindex")&&zt([a[parseInt(l.toString(),10)]],!0,"e-columnselection");else c(r[parseInt(n.toString(),10)].childNodes[parseInt(i.toString(),10)])||zt([r[parseInt(n.toString(),10)].childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection")}},s.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(Ge(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},s.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(Si,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(xt,this.onDataBoundFunction),this.parent.on(Ns,this.onDataBoundFunction),this.parent.on(pe,this.checkBoxSelectionChanged,this),this.parent.on(un,this.initPerisistSelection,this),this.parent.on(ot,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Me,this.actionCompleteFunc),this.parent.on(ii,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(xs,this.resizeEndFn)},s.prototype.removeEventListener_checkbox=function(){this.parent.off(Si,this.dataReady),this.parent.removeEventListener(xt,this.onDataBoundFunction),this.parent.removeEventListener(Me,this.actionCompleteFunc),this.parent.off(Ns,this.onDataBoundFunction),this.parent.off(ot,this.setCheckAllForEmptyGrid),this.parent.off(ii,this.clickHandler),this.parent.removeEventListener(xs,this.resizeEndFn),this.parent.off(un,this.initPerisistSelection)},s.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var i=e.nextElementSibling;E([i],["e-check","e-stop","e-uncheck"]),T([i.parentElement],["e-checkbox-disabled"])}},s.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var i=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!i&&(this.disableUI=!this.parent.enableImmutableMode&&!(e.requestType==="save"&&e.action==="add"),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},s.prototype.actionCompleteHandler=function(e){e.requestType==="save"&&this.parent.isPersistSelection&&this.refreshPersistSelection()},s.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,c(this.parent.selectedRowIndex)||this.parent.selectedRowIndex===-1||!this.parent.enablePersistence?this.parent.selectedRowIndex=e:this.parent.selectedRowIndex=-1},s.prototype.disableInteracted=function(){this.isInteracted=!1},s.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},s}(),Uh=function(){function s(e){this.headerFocus=!1,this.parent=e,this.addEventListener()}return s.prototype.hasNonNumericCharacters=function(e){for(var i=!1,t=0,r=e;t<r.length;t++){var n=r[t];if((n<"0"||n>"9")&&n!==".")return!0;if(n==="."){if(i)return!0;i=!0}}return!1},s.prototype.search=function(e){var i=this.parent;if(e=c(e)?"":e,Do(i)){i.notify(nl,{instance:this,handler:this.search,arg1:e});return}if(e!==i.searchSettings.key){if(this.headerFocus=!1,e!==""&&!this.hasNonNumericCharacters(e)){var t=e.split(".");e==="."||e.indexOf(".")===-1||t[0].startsWith("0")&&t[0].length>1?i.searchSettings.key=e.toString():i.searchSettings.key=parseFloat(e).toString()}else i.searchSettings.key=e.toString();i.dataBind()}else this.refreshSearch?i.refresh():this.headerFocus=!1},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ne,this.onPropertyChanged,this),this.parent.on(ks,this.onSearchComplete,this),this.parent.on(St,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Me,this.actionCompleteFunc),this.parent.on(cn,this.cancelBeginEvent,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ne,this.onPropertyChanged),this.parent.off(ks,this.onSearchComplete),this.parent.off(St,this.destroy),this.parent.removeEventListener(Me,this.actionCompleteFunc),this.parent.off(cn,this.cancelBeginEvent))},s.prototype.destroy=function(){this.removeEventListener()},s.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(c(e.properties.key)?this.parent.notify(nr,{requestType:"searching",type:st}):this.parent.notify(nr,{requestType:"searching",type:st,searchString:this.parent.searchSettings.key}))},s.prototype.onSearchComplete=function(e){this.parent.trigger(Me,W(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Me}))},s.prototype.onActionComplete=function(e){this.refreshSearch&&e.requestType==="refresh"&&this.headerFocus&&(this.headerFocus=!1,this.parent.focusModule.focus(),T([this.parent.focusModule.currentInfo.element],["e-focused"])),this.refreshSearch=e.requestType!=="searching"},s.prototype.cancelBeginEvent=function(e){e.requestType==="searching"&&this.parent.setProperties({searchSettings:{key:""}},!0)},s.prototype.getModuleName=function(){return"search"},s}(),jh=function(){function s(e){this.colName=[],this.isShowHide=!1,this.parent=e,this.addEventListener(),this.widthService=new Pn(e)}return s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ao,handler:this.batchChanges},{event:ih,handler:this.resetColumnState}],Ft(this.parent,this.evtHandlers,!0,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||Ft(this.parent,this.evtHandlers,!1)},s.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},s.prototype.show=function(e,i){var t=this.getToggleFields(e),r=this.getColumns(t,i);this.parent.notify(ln,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!0;this.setVisible(r)},s.prototype.hide=function(e,i){var t=this.getToggleFields(e),r=this.getColumns(t,i);this.parent.notify(ln,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!1;this.setVisible(r)},s.prototype.getToggleFields=function(e){var i=[];return typeof e=="string"?i=[e]:i=e,i},s.prototype.getColumns=function(e,i){var t=this,r=Ht(e,function(n){return Ht(t.parent.columnModel,function(o){if(o[""+i]===n)return o})[0]});return r},s.prototype.batchActionPrevent=function(e,i){return i===void 0&&(i=[]),Do(this.parent)?(this.colName=e,this.changedCol=i,this.parent.closeEdit(),!1):!0},s.prototype.resetColumnState=function(){if(this.isShowHide)for(var e=0;e<this.colName.length;e++)this.colName[parseInt(e.toString(),10)].visible=!this.colName[parseInt(e.toString(),10)].visible},s.prototype.setVisible=function(e,i){var t=this;if(i===void 0&&(i=[]),this.isShowHide=!0,!!this.batchActionPrevent(e,i)){i=i.length>0?i:e;var r={requestType:"columnstate",cancel:!1,columns:i},n="cancel";if(this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(st,r,function(a){var l=t.parent.getColumns();if(e=c(e)?l:e,a[""+n]){t.parent.notify(Dl,{showHideArgs:a}),e.length>0&&(e[0].visible=!0);return}t.parent.notify(Co,r),nt(t.parent)&&t.parent.contentModule.emptyVcRows();var h=t.parent.element.querySelector(".e-addedrow");t.parent.editSettings.showAddNewRow&&h&&(q(h),(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&(t.parent.isAddNewRow=!0),t.parent.addNewRowFocus=!0,t.parent.isEdit=!1),t.parent.allowSelection&&t.parent.getSelectedRecords().length&&!t.parent.selectionSettings.persistSelection&&t.parent.clearSelection(),t.parent.enableColumnVirtualization?t.parent.notify(sr,{isModeChg:!0}):t.parent.isFrozenGrid()&&e.length?t.parent.notify(sr,{isModeChg:!0}):t.parent.notify(zn,e);var p={requestType:"columnstate",columns:i};t.parent.trigger(Me,p);var d=!t.parent.element.querySelector(".e-addedrow");t.parent.editSettings.showAddNewRow&&d&&(t.parent.isEdit=!1,t.parent.addRecord(),t.parent.enableVirtualization||t.parent.enableInfiniteScrolling||t.parent.notify(Jt,{})),t.parent.columnQueryMode!=="All"&&t.parent.refresh()}),!this.parent.groupSettings.columns.length){if(this.parent.autoFit)this.parent.preventAdjustColumns();else if(this.parent.allowResizing&&this.parent.resizeSettings.mode==="Normal"){var o=this.parent.getHeaderTable().style.width.indexOf("px")===-1;this.widthService.setWidthToTable(o)}}}},s}(),Qh=function(){function s(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Pn(e),this.addEventListener()}return s.prototype.getModuleName=function(){return"scroll"},s.prototype.setWidth=function(e){if(this.parent.element.style.width=Ie(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var i=this.parent.toolbarModule.toolbar.element,t=i.querySelector(".e-toolbar-left"),r=i.querySelector(".e-toolbar-center"),n=i.querySelector(".e-toolbar-right"),o=i.querySelector(".e-toolbar-items"),a=t?t.clientWidth:0,l=r?r.clientWidth:0,h=n?n.clientWidth:0,p=o?o.clientWidth:0,d=i?i.clientWidth:0;(!this.parent.enableAdaptiveUI||a>d||l>d||h>d||p>d)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},s.prototype.setHeight=function(){var e=0,i=this.parent.getContent().querySelector("."+ve),t=this.parent.height;if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&this.parent.height!=="auto"&&this.parent.height.toString().indexOf("%")<0&&(t=parseInt(t,10)-s.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&this.parent.height!=="auto"&&this.parent.height!=="100%"){var r=this.parent.getHeaderContent().querySelector(j+":not(.e-masked-tbody)");if(e=r?r.offsetHeight:0,r&&e){var n=r.getElementsByClassName($t).length,o=n*this.parent.getRowHeight();e-=o}else!this.parent.isInitialLoad&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(t=parseInt(t,10)-this.parent.frozenRows*this.parent.getRowHeight());i.style.height=Ie(parseInt(t,10)-e)}else i.style.height=Ie(t);this.ensureOverflow(i),this.parent.isFrozenGrid()&&this.refresh()},s.prototype.setPadding=function(){var e=this.parent.getHeaderContent(),i=s.getScrollBarWidth()-this.getThreshold(),t=this.getCssProperties();e.querySelector("."+me).style[t.border]=i>0?"1px":"0px",e.style[t.padding]=i>0?i+"px":"0px"},s.prototype.removePadding=function(e){var i=this.getCssProperties(e),t=this.parent.getHeaderContent().querySelector("."+me);t.style[i.border]="",t.parentElement.style[i.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},s.prototype.refresh=function(){if(this.parent.height==="100%"){var e=this.parent.getContent();this.parent.element.style.height="100%";var i=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+i+"px)"}},s.prototype.getThreshold=function(){var e=O.info.name;return e==="mozilla"?.5:1},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ot,this.wireEvents,this),this.parent.on(pe,this.wireEvents,this),this.parent.on(ue,this.onPropertyChanged,this),this.parent.on(Ls,this.wireEvents,this),this.parent.on(mt,this.setScrollLeft,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ot,this.wireEvents),this.parent.off(pe,this.wireEvents),this.parent.off(ue,this.onPropertyChanged),this.parent.off(Ls,this.wireEvents),this.parent.off(mt,this.setScrollLeft),this.unwireEvents())},s.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(I.remove(this.header,"touchstart pointerdown",this.setPageXY),I.remove(this.header,"touchmove pointermove",this.onTouchScroll));var e=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(e&&I.remove(e,"scroll",this.onCustomScrollbarScroll),this.content&&(I.remove(this.content,"scroll",this.onCustomScrollbarScroll),I.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(O.userAgent.toLowerCase())&&O.isDevice||I.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(I.remove(this.header,"scroll",this.onCustomScrollbarScroll),I.remove(this.header,"touchstart pointerdown",this.setPageXY),I.remove(this.header,"touchmove pointermove",this.onTouchScroll))),this.content&&I.remove(this.content,"scroll",this.contentScrollHandler),this.header&&I.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&I.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},s.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+me).scrollLeft=this.previousValues.left},s.prototype.onContentScroll=function(e){var i=this,t=e,r=t.classList.contains(me);return function(n){if(!(i.content.querySelector(j)===null||i.parent.isPreventScrollEvent)){var o=n.target;if(i.parent.frozenRows&&(i.content.scrollTop>0&&i.parent.frozenRows?T([i.parent.element],"e-top-shadow"):E([i.parent.element],"e-top-shadow")),i.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var a=i.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),l=i.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])'),h=i.parent.enableRtl?Math.abs(o.scrollLeft):o.scrollLeft,p=h<=1;!p&&i.parent.getVisibleFrozenLeftCount()?T([i.parent.element],"e-left-shadow"):E([i.parent.element],"e-left-shadow");var d=i.parent.enableRtl?Math.abs(o.scrollLeft):o.scrollLeft,u=Math.round(d+o.clientWidth)>=o.scrollWidth-1;u&&i.parent.getVisibleFrozenRightCount()?E([i.parent.element],"e-right-shadow"):T([i.parent.element],"e-right-shadow");var f=[].slice.call(i.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((f.length===1&&a.length||i.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||l.length)&&o.scrollLeft!==i.previousValues.left){o.scrollLeft=i.previousValues.left;return}if(f.length!==1&&(a.length||l.length)&&o.scrollTop!==i.previousValues.top){o.scrollTop=i.previousValues.top;return}}var g=o.scrollLeft;if(!c(i.parent.infiniteScrollModule)&&i.parent.enableInfiniteScrolling&&(!i.parent.isEdit||i.parent.editSettings.showAddNewRow&&!i.parent.element.querySelector(".e-editedrow"))&&i.parent.notify(xl,{target:n.target,isLeft:i.previousValues.left!==g}),i.parent.groupSettings.columns.length&&i.parent.groupSettings.enableLazyLoading){var m=i.previousValues.top<i.parent.getContent().firstElementChild.scrollTop;i.parent.notify(zl,{scrollDown:m})}i.parent.notify(Cl,{});var S=o.classList.contains("e-summarycontent");if(i.previousValues.left===g){i.previousValues.top=r?o.scrollTop:i.previousValues.top;return}i.parent.notify(El,n),t.scrollLeft=g,S&&(i.header.scrollLeft=g),i.previousValues.left=g,i.parent.notify(Ms,{left:g})}}},s.prototype.onCustomScrollbarScroll=function(e,i){var t=this,r=e,n=i;return function(o){if(t.content.querySelector(j)!==null){var a=o.target,l=a.scrollLeft;t.previousValues.left!==l&&(r.scrollLeft=l,n.scrollLeft=l,t.previousValues.left=l,t.parent.notify(Ms,{left:l}),t.parent.isDestroyed)}}},s.prototype.onTouchScroll=function(e){var i=this,t=e;return function(r){if(r.pointerType!=="mouse"){var n=i.parent.isFrozenGrid(),o=i.getPointXY(r),a=t.scrollLeft+(i.pageXY.x-o.x),l=i.parent.getHeaderContent().querySelector("."+me),h=i.parent.getContent().querySelector("."+ve);if(!(i.previousValues.left===a||a<0||l.scrollWidth-l.clientWidth<a)){if(r.preventDefault(),l.scrollLeft=a,h.scrollLeft=a,n&&i.parent.enableColumnVirtualization){var p=i.parent.getContent().querySelector(".e-movablescrollbar");p.scrollLeft=a}i.pageXY.x=o.x,i.previousValues.left=a}}}},s.prototype.setPageXY=function(){var e=this;return function(i){i.pointerType!=="mouse"&&(e.pageXY=e.getPointXY(i))}},s.prototype.getPointXY=function(e){var i={x:0,y:0};return e.touches&&e.touches.length?(i.x=e.touches[0].pageX,i.y=e.touches[0].pageY):(i.x=e.pageX,i.y=e.pageY),i},s.prototype.getScrollbleParent=function(e){if(e===null)return null;var i=c(e.tagName)?e.scrollingElement:e,t=document.defaultView.getComputedStyle(i,null).overflowY;return i.scrollHeight>i.clientHeight&&t!=="hidden"&&t!=="visible"||e.tagName==="HTML"||e.tagName==="BODY"?e:this.getScrollbleParent(e.parentNode)},s.prototype.addStickyListener=function(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e&&this.parentElement?(this.eventElement=this.parentElement.tagName==="HTML"||this.parentElement.tagName==="BODY"?document:this.parentElement,I.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(I.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},s.prototype.resizeFrozenRowBorder=function(){var e;this.parent.element.querySelector(".e-frozenrow-border")?e=this.parent.element.querySelector(".e-frozenrow-border"):(e=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-gridcontent")));var i=this.parent.height!=="auto"?s.getScrollBarWidth():0;e.style.width=this.parent.element.offsetWidth-i-.5+"px"},s.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var i=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+ve),this.header=this.parent.getHeaderContent().querySelector("."+me);var t=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&this.header&&this.content&&(I.add(this.header,"touchstart pointerdown",this.setPageXY(),this),I.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),i&&t&&this.parent.enableColumnVirtualization&&(I.add(t,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),I.add(this.content,"scroll",this.onCustomScrollbarScroll(t,this.header),this),I.add(this.header,"scroll",this.onCustomScrollbarScroll(t,this.content),this),I.add(this.header,"touchstart pointerdown",this.setPageXY(),this),I.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),I.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(O.userAgent.toLowerCase())&&O.isDevice||I.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),I.add(this.content,"scroll",this.contentScrollHandler,this),I.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&I.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var r=this.parent.getContentTable(),n,o,a;Eo(function(){n=e.header.scrollLeft,o=r.scrollHeight,a=e.parent.getContent().clientHeight},function(){var l={cancel:!1};e.parent.notify(Ol,l),o<a&&e.parent.height!=="auto"&&(e.setLastRowCell(),e.parent.notify(nh,l)),e.parent.frozenRows&&e.resizeFrozenRowBorder(),!e.parent.enableVirtualization&&!e.parent.enableInfiniteScrolling&&(l.cancel||(e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top)),e.parent.enableColumnVirtualization||(e.content.scrollLeft=n,e.parent.isFrozenGrid()&&(e.previousValues.left=n))}),this.parent.isPreventScrollEvent=!1},s.prototype.setLastRowCell=function(){var e=this.parent.getContentTable();E(e.querySelectorAll("td"),"e-lastrowcell"),e.querySelector("tr:nth-last-child(2)")&&this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Bottom"&&T(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),T(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isSpan&&T(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},s.prototype.getCssProperties=function(e){var i={},t=c(e)?this.parent.enableRtl:e;return i.border=t?"borderLeftWidth":"borderRightWidth",i.padding=t?"paddingLeft":"paddingRight",i},s.prototype.ensureOverflow=function(e){e.style.overflowY=this.parent.height==="auto"?"auto":"scroll"},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,this.parent.height==="auto"&&this.removePadding(),this.wireEvents(),this.setHeight();var i="width";this.setWidth(!c(e.properties[""+i]))}},s.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var e=this.parent.getContent().getClientRects()[0];if(e){var i=window.devicePixelRatio,t=this.parent.getHeaderContent(),r=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),o=t.offsetHeight+(r?r.offsetHeight:0)+(n?n.offsetHeight:0),a=this.parentElement.getClientRects()[0].top,l=e.top-(a<0?0:a),h=e.left,p=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(i!==1&&(l=Math.ceil(l)),l<o&&e.bottom>0){t.classList.add("e-sticky");var d=0;n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,d,e.width,h,!0),d+=n.getClientRects()[0].height),r&&(this.setSticky(r,d,e.width,h,!0),d+=r.getClientRects()[0].height),this.setSticky(t,d,e.width,h,!0),c(p)||(p.style.position="fixed",p.style.top=o+"px")}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1);var u=this.parent.element.querySelector(".e-ccdlg");if(u&&u.classList.remove("e-sticky"),!c(p)){p.style.position="absolute";var f=e.top-a;p.style.top=f+"px"}}this.parent.notify(Zl,{})}}},s.prototype.setSticky=function(e,i,t,r,n){n?e.classList.add("e-sticky"):e.classList.remove("e-sticky"),e.style.width=t!=null?t+"px":"",e.style.top=i!=null?i+"px":"",e.style.left=r!==null?parseInt(e.style.left,10)!==r?r+"px":e.style.left:""},s.prototype.destroy=function(){var e=this.parent.element;if(!(!e||!e.querySelector("."+Ke)&&!e.querySelector("."+vt))){this.removeEventListener();var i=this.parent.getContent().querySelector("."+ve);I.remove(i,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),E([this.parent.getHeaderContent().querySelector("."+me)],me),E([i],ve),i.style.height="",this.parent.element.style.width=""}},s.getScrollBarWidth=function(){return De()},s}(),Mo=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),ct=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},Xh=function(s){Mo(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.templateFn={},i}return e.prototype.setFormatter=function(i){this.formatFn=i},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setTemplate=function(i){i===void 0&&(i={}),this.footerTemplate!==void 0&&(this.templateFn[wt(A,A.Summary)]={fn:it(this.footerTemplate,i),property:"footerTemplate"}),this.groupFooterTemplate!==void 0&&(this.templateFn[wt(A,A.GroupSummary)]={fn:it(this.groupFooterTemplate,i),property:"groupFooterTemplate"}),this.groupCaptionTemplate!==void 0&&(this.templateFn[wt(A,A.CaptionSummary)]={fn:it(this.groupCaptionTemplate,i),property:"groupCaptionTemplate"})},e.prototype.getTemplate=function(i){return this.templateFn[wt(A,i)]},e.prototype.setPropertiesSilent=function(i){this.setProperties(i,!0)},ct([C()],e.prototype,"type",void 0),ct([C()],e.prototype,"field",void 0),ct([C()],e.prototype,"columnName",void 0),ct([C()],e.prototype,"format",void 0),ct([C()],e.prototype,"footerTemplate",void 0),ct([C()],e.prototype,"groupFooterTemplate",void 0),ct([C()],e.prototype,"groupCaptionTemplate",void 0),ct([C()],e.prototype,"customAggregate",void 0),e}(oe),Yh=function(s){Mo(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return ct([Ii([],Xh)],e.prototype,"columns",void 0),e}(oe),Jh=function(){function s(e,i){this.copyContent="",this.isSelect=!1,this.parent=e,this.serviceLocator=i,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(pe,this.initialEnd,this),this.parent.on(Yt,this.keyDownHandler,this),this.parent.on(ii,this.clickHandler,this),this.parent.on(ot,this.initialEnd,this),I.add(this.parent.element,"keydown",this.pasteHandler,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Yt,this.keyDownHandler),this.parent.off(pe,this.initialEnd),this.parent.off(ii,this.clickHandler),this.parent.off(ot,this.initialEnd),I.remove(this.parent.element,"keydown",this.pasteHandler))},s.prototype.clickHandler=function(e){var i=e.target;i=b(i,"e-rowcell")},s.prototype.pasteHandler=function(e){var i=this,t=this.parent,r=/(Mac)/i.test(navigator.platform),n=this.parent.getSelectedRowCellIndexes();if(!t.isEdit&&e.keyCode===67&&r&&e.metaKey&&this.copy(),n.length&&e.keyCode===86&&(!r&&e.ctrlKey||r&&e.metaKey)&&!t.isEdit){var o=M(document.activeElement,"."+U);if(!this.clipBoardTextArea||!o||!t.editSettings.allowEditing||t.editSettings.mode!=="Batch"||t.selectionSettings.mode!=="Cell"||t.selectionSettings.cellSelectionMode==="Flow")return;this.activeElement=document.activeElement;var a=window.scrollX,l=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){i.activeElement.focus(),window.scrollTo(a,l),i.paste(i.clipBoardTextArea.value,n[0].rowIndex,n[0].cellIndexes[0])},r?100:10)}},s.prototype.paste=function(e,i,t){for(var r=this.parent,n=t,o=i,a,l,h,p=e.split(`
`),d,u=0;u<p.length;u++){if(d=p[parseInt(u.toString(),10)].split("	"),n=t,u===p.length-1&&p[parseInt(u.toString(),10)]===""||Ge(r.getRowByIndex(o))){n++;break}for(var f=0;f<d.length;f++){if(h=r.getCellFromIndex(o,n),!h){n++;break}if(a=r.getColumnByIndex(n),l=a.getParser()?a.getParser()(d[parseInt(f.toString(),10)]):d[parseInt(f.toString(),10)],a.allowEditing&&!a.isPrimaryKey){var g={column:a,data:l,rowIndex:o};this.parent.trigger(_a,g),o=g.rowIndex,g.cancel||r.editModule&&(a.type==="number"?this.parent.editModule.updateCell(o,a.field,parseFloat(g.data)):r.editModule.updateCell(o,a.field,g.data))}n++}o++}r.selectionModule.selectCellsByRange({rowIndex:i,cellIndex:t},{rowIndex:o-1,cellIndex:n-1});var m=this.parent.getCellFromIndex(o-1,n-1);m&&Re(m,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},s.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(pe,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.clipBoardTextArea.style.opacity="0",this.parent.element.appendChild(this.clipBoardTextArea)},s.prototype.keyDownHandler=function(e){e.action==="ctrlPlusC"?this.copy():e.action==="ctrlShiftPlusH"&&this.copy(!0)},s.prototype.setCopyData=function(e){if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this.copyContent="";var i=this.parent.getDataRows();if(this.parent.selectionSettings&&this.parent.selectionSettings.allowColumnSelection&&this.parent.selectionModule&&this.parent.selectionModule.selectedColumnsIndexes.length){if(e){for(var t=this.parent.selectionModule.selectedColumnsIndexes,r=[],n=0;n<t.length;n++){var o=t[parseInt(n.toString(),10)],a=this.parent.getColumnHeaderByIndex(o);a&&!a.classList.contains("e-hide")&&r.push(a)}this.getCopyData(r,!1,"	",e),this.copyContent+=`
`}for(var l=0;l<i.length;l++){var h=[];l>0&&(this.copyContent+=`
`),h.push.apply(h,[].slice.call(i[parseInt(l.toString(),10)].querySelectorAll(".e-columnselection:not(.e-hide)"))),this.getCopyData(h,!1,"	",e)}}else if(this.parent.selectionSettings.mode!=="Cell"){var p=this.parent.getSelectedRowIndexes().sort(function(L,k){return L-k});if(e){for(var d=[],n=0;n<this.parent.getVisibleColumns().length;n++)d[parseInt(n.toString(),10)]=this.parent.getVisibleColumns()[parseInt(n.toString(),10)].headerText;this.getCopyData(d,!1,"	",e),this.copyContent+=`
`}if((this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&p.length>i.length){p=[];for(var n=0;n<i.length;n++){var u=i[parseInt(n.toString(),10)];u.getAttribute("aria-selected")==="true"&&p.push(parseInt(u.getAttribute("data-rowindex"),10))}}for(var n=0;n<p.length;n++){n>0&&(this.copyContent+=`
`);var f=[],g=p[parseInt(n.toString(),10)];!nt(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(g=i.map(function(k){return k.getAttribute("data-rowindex")}).indexOf(p[parseInt(n.toString(),10)].toString()));var m=i[parseInt(g.toString(),10)];c(m)||(f.push.apply(f,[].slice.call(m.querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(f,!1,"	",e))}}else if(this.parent.selectionModule&&this.parent.selectionModule.selectedRowCellIndexes.length){var S=this.checkBoxSelection();if(S.status){if(e){for(var y=[],n=0;n<S.colIndexes.length;n++){var R=this.parent.getColumnHeaderByIndex(S.colIndexes[parseInt(n.toString(),10)]);R.classList.contains("e-hide")||y.push(R)}this.getCopyData(y,!1,"	",e),this.copyContent+=`
`}for(var n=0;n<S.rowIndexes.length;n++){n>0&&(this.copyContent+=`
`);var w=[].slice.call(i[S.rowIndexes[parseInt(n.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(w,!1,"	",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,`
`,e)}var F={data:this.copyContent,cancel:!1};if(this.parent.trigger(Ga,F),F.cancel)return;this.clipBoardTextArea.value=this.copyContent=F.data,O.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},s.prototype.getCopyData=function(e,i,t,r){for(var n=typeof e[0]!="string",o=0;o<e.length;o++){if(r&&i){var a=parseInt(e[parseInt(o.toString(),10)].getAttribute(ne),10)-1;this.copyContent+=this.parent.getColumns()[parseInt(a.toString(),10)].headerText+`
`}n?e[parseInt(o.toString(),10)].classList.contains("e-hide")||(this.copyContent+=e[parseInt(o.toString(),10)].innerText):this.copyContent+=e[parseInt(o.toString(),10)],o<e.length-1&&(this.copyContent+=t)}},s.prototype.copy=function(e){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},s.prototype.getModuleName=function(){return"clipboard"},s.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(q(this.clipBoardTextArea),this.clipBoardTextArea=null)},s.prototype.checkBoxSelection=function(){var e=this.parent,i={status:!1};if(e.selectionSettings.mode==="Cell"){var t=e.getSelectedRowCellIndexes(),r=void 0,n=[],o=void 0;for(o=0;o<t.length&&(t[parseInt(o.toString(),10)].cellIndexes.length&&n.push(t[parseInt(o.toString(),10)].rowIndex),!(t[parseInt(o.toString(),10)].cellIndexes.length&&(r||(r=JSON.stringify(t[parseInt(o.toString(),10)].cellIndexes.sort())),r!==JSON.stringify(t[parseInt(o.toString(),10)].cellIndexes.sort()))));o++);n.sort(function(a,l){return a-l}),o===t.length&&(i={status:!0,rowIndexes:n,colIndexes:t[0].cellIndexes})}return i},s}(),lt="https://ej2.syncfusion.com/documentation/grid",ar="https://ej2.syncfusion.com/documentation/",ht="[EJ2Grid.Warning]",Lt="[EJ2Grid.Error]",Ni="[EJ2Grid.Info]",Zh=function(){function s(e){this.parent=e,this.parent.on("initial-end",this.patchadaptor,this)}return s.prototype.getModuleName=function(){return"logger"},s.prototype.log=function(e,i){e instanceof Array||(e=[e]);for(var t=e,r=0;r<t.length;r++){var n=$h[t[parseInt(r.toString(),10)]],o=n.check(i,this.parent);o.success&&console[n.logType](n.generateMessage(i,this.parent,o.options))}},s.prototype.patchadaptor=function(){var e=this.parent.getDataModule().dataManager.adaptor,i=e.beforeSend;i&&(e.beforeSend=function(t,r,n){i.call(e,t,r,n)})},s.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},s}(),$h={module_missing:{type:"module_missing",logType:"warn",check:function(s,e){var i=e.getInjectedModules().map(function(r){return r.prototype.getModuleName()}),t=e.requiredModules().map(function(r){return r.member}).filter(function(r){return i.indexOf(r)===-1});return{success:t.filter(function(r){return r!=="resize"}).length>0,options:t}},generateMessage:function(s,e,i){return i=i.filter(function(t){return t!=="resize"}).reduce(function(t,r){return t+("* "+r+`
`)},""),ht+`: MODULES MISSING
The following modules are not injected:.
`+(""+i)+("Refer to "+lt+"/module.html for documentation on importing feature modules.")}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:typeof Promise>"u"}},generateMessage:function(){return Lt+`: PROMISE UNDEFINED
Promise object is not present in the global environment,please use polyfil to support Promise object in your environment.
`+("Refer to "+ar+"/base/browser.html?#required-polyfills for more information.")}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(s,e){return{success:e.enableColumnVirtualization?e.getPrimaryKeyFieldNames().length===0:e.getColumns().filter(function(i){return i.isPrimaryKey}).length===0}},generateMessage:function(){return ht+`: PRIMARY KEY MISSING
Editing is enabled but primary key column is not specified.
`+("Refer to "+lt+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(s,e){return{success:e.selectionSettings.persistSelection&&e.getColumns().filter(function(i){return i.isPrimaryKey}).length===0}},generateMessage:function(){return ht+`: PRIMARY KEY MISSING
selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.
`+("Refer to "+lt+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(s,e){var i="",t=ep(s),r=tp(s);return r!==""?i=r:t!==""?i=t:i=s.error,ht+": "+i}},locale_missing:{type:"locale_missing",logType:"warn",check:function(s,e){var i=fe.getObject("locale."+e.locale+".grid",Rn);return{success:e.locale!=="en-US"&&c(i)}},generateMessage:function(s,e){return ht+`: LOCALE CONFIG MISSING
`+("Locale configuration for '"+e.locale+`' is not provided.
`)+("Refer to "+lt+`/globalization-and-localization.html?#localization 
             for documentation on setting locale configuration.`)}},limitation:{type:"limitation",logType:"warn",check:function(s,e){var i=s,t;switch(i){case"freeze":t={success:!Ge(e.detailTemplate)||!Ge(e.childGrid),options:{name:"freeze"}};break;case"virtualization":t={success:!Ge(e.detailTemplate)||!Ge(e.childGrid),options:{name:"virtualization"}};break;default:t={success:!1};break}return t},generateMessage:function(s,e,i){var t=i.name,r;switch(t){case"freeze":r=`Frozen rows and columns do not support the following features:
* Details Template
* Hierarchy Grid
`;break;case"virtualization":r=`Virtualization does not support the following features.
* Details Template.
* Hierarchy Grid.
`;break;default:r="";break}return ht+(": "+t.toUpperCase()+` LIMITATIONS
`)+r}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(s,e){return{success:!(e.columns.length||e.dataSource instanceof _||!c(e.dataSource)&&e.dataSource.length)}},generateMessage:function(){return ht+`: GRID CONFIG MISSING
dataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.
`+("Refer to "+lt+"/columns.html for documentation on configuring the grid data and columns.")}},virtual_height:{type:"virtual_height",logType:"error",check:function(s,e){return{success:c(e.height)||e.height==="auto"}},generateMessage:function(){return Lt+`: GRID HEIGHT MISSING 
height property is required to use virtualization.
`+("Refer to "+lt+"/virtual.html for documentation on configuring the virtual grid.")}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(s){return{success:Array.isArray(s)||Array.isArray(s.result)}},generateMessage:function(){return Lt+`: RETRUN VALUE MISSING  
Remote service returns invalid data. 
`+("Refer to "+lt+"/edit.html for documentation on configuring editing with remote data.")}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(s,e){return{success:e.getDataModule().isRemote()}},generateMessage:function(){return ht+`: SORT COMPARER NOT WORKING  
Sort comparer will not work with remote data.`+("Refer to "+lt+"/sorting/#custom-sort-comparer for documentation on using the sort comparer.")}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(s){return{success:s.column.minWidth&&s.column.minWidth>=s.width||s.column.maxWidth&&s.column.maxWidth<=s.width}},generateMessage:function(){return Ni+`: RESIZING COLUMN REACHED MIN OR MAX  
The column resizing width is at its min or max.`}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(s){var e=!0,i;switch(s.moduleName){case"reorder":c(s.destColumn)?i="reordering action is disabled for the "+s.column.headerText+" column":i="reordering action is disabled for the "+(s.column.allowReordering?s.destColumn.headerText:s.column.headerText)+" column";break;case"group":i="grouping action is disabled for the "+s.columnName+" column.";break;case"filter":i="filtering action is disabled for the "+s.columnName+" column.";break;case"sort":i="sorting action is disabled for the "+s.columnName+" column.";break}return{success:e,options:{fn:i}}},generateMessage:function(s,e,i){return Ni+(`: ACTION DISABLED 
 `+i.fn)}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(s){return{success:!0,options:{args:s}}},generateMessage:function(s,e,i){return Ni+(`: EXPORTING INPROGRESS 
 Grid `+i.args+"ing is in progress")}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(s){return{success:!0,options:{args:s}}},generateMessage:function(s,e,i){return Ni+(`: EXPORTING COMPLETED 
 Grid `+i.args+"ing is complete")}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return Lt+`: FOREIGNKEY CONFIG 
  Grid foreign key column needs a valid data source/service.`+("Refer to "+lt+"/columns/#foreign-key-column for documentation on configuring foreign key columns.")}},initial_action:{type:"initial_action",logType:"error",check:function(s){var e=!0,i;switch(s.moduleName){case"group":i="The "+s.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":i="The "+s.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":i="The "+s.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column.";break}return{success:e,options:{fn:i}}},generateMessage:function(s,e,i){return Lt+(`: INITIAL ACTION FAILURE 
 `+i.fn)}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(s,e){return{success:e.getColumns().length<=e.frozenColumns||e.currentViewData.length&&e.frozenRows>=e.currentViewData.length}},generateMessage:function(s,e){return Lt+(`: OUT OF RANGE ERROR-
 `+(e.getColumns().length<=e.frozenColumns?"FROZEN COLUMNS,":""))+((e.frozenRows>=e.currentViewData.length?"FROZEN ROWS":"")+" invalid")}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(s){return{success:c(s.column.type),options:s.column.headerText}},generateMessage:function(s,e,i){return Lt+(`: COLUMN TYPE MISSING-
  `+i+" column type was invalid or not defined.")+("Please go through below help link: "+ar+"/grid/columns/#column-type")}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(s){return{success:s.dataState.dataSource&&!(s.dataState.dataSource instanceof _||"result"in s.dataState.dataSource||s.dataState.dataSource instanceof Array)&&!c(s.dataState.dataStateChange)}},generateMessage:function(){return ht+`: DATASOURCE SYNTAX WARNING
DataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used`}}},ep=function(s){var e=s.error;return e.indexOf&&e.indexOf("Format options")!==0?"":`INVALID FORMAT
For more information, refer to the following documentation links:
`+("Number format: "+ar+`/common/internationalization#supported-format-string
`)+("Date format: "+ar+`/common/internationalization#manipulating-datetime
`)+("Message: "+e)},tp=function(s){var e=fe.getObject("error.error",s);if(c(e))return"";var i="";try{i=JSON.parse(e.responseText)}catch{i=""}return`XMLHTTPREQUEST FAILED
`+("Url: "+e.responseURL+`
`)+("Status: "+e.status+" - "+e.statusText+`
`)+(i!==""?"Message: "+i:"")},Te=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),v=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,i,n):o(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},ip=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C()],e.prototype,"field",void 0),v([C()],e.prototype,"direction",void 0),v([C(!1)],e.prototype,"isFromGroup",void 0),e}(oe),rp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([Ii([],ip)],e.prototype,"columns",void 0),v([C(!0)],e.prototype,"allowUnsort",void 0),e}(oe),np=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C()],e.prototype,"field",void 0),v([C()],e.prototype,"operator",void 0),v([C()],e.prototype,"value",void 0),v([C()],e.prototype,"matchCase",void 0),v([C(!1)],e.prototype,"ignoreAccent",void 0),v([C()],e.prototype,"predicate",void 0),v([C({})],e.prototype,"actualFilterValue",void 0),v([C({})],e.prototype,"actualOperator",void 0),v([C()],e.prototype,"type",void 0),v([C()],e.prototype,"ejpredicate",void 0),v([C()],e.prototype,"uid",void 0),v([C()],e.prototype,"isForeignKey",void 0),v([C()],e.prototype,"condition",void 0),e}(oe),sp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C(!1)],e.prototype,"enableCache",void 0),v([C(3)],e.prototype,"maxBlocks",void 0),v([C(3)],e.prototype,"initialBlocks",void 0),e}(oe),op=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([Ii([],np)],e.prototype,"columns",void 0),v([C("FilterBar")],e.prototype,"type",void 0),v([C("OnEnter")],e.prototype,"mode",void 0),v([C(!0)],e.prototype,"showFilterBarStatus",void 0),v([C(1500)],e.prototype,"immediateModeDelay",void 0),v([C()],e.prototype,"operators",void 0),v([C(!1)],e.prototype,"ignoreAccent",void 0),v([C(!1)],e.prototype,"enableInfiniteScrolling",void 0),v([C(50)],e.prototype,"itemsCount",void 0),v([C("Shimmer")],e.prototype,"loadingIndicator",void 0),v([C(!1)],e.prototype,"enableCaseSensitivity",void 0),v([C(!1)],e.prototype,"showFilterBarOperator",void 0),e}(oe),ap=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C("Row")],e.prototype,"mode",void 0),v([C("Flow")],e.prototype,"cellSelectionMode",void 0),v([C("Single")],e.prototype,"type",void 0),v([C(!1)],e.prototype,"checkboxOnly",void 0),v([C(!1)],e.prototype,"persistSelection",void 0),v([C("Default")],e.prototype,"checkboxMode",void 0),v([C(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),v([C(!0)],e.prototype,"enableToggle",void 0),v([C(!1)],e.prototype,"allowColumnSelection",void 0),e}(oe),lp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C([])],e.prototype,"fields",void 0),v([C("")],e.prototype,"key",void 0),v([C("contains")],e.prototype,"operator",void 0),v([C(!0)],e.prototype,"ignoreCase",void 0),v([C(!1)],e.prototype,"ignoreAccent",void 0),e}(oe),hp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C()],e.prototype,"targetID",void 0),e}(oe),pp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C("Both")],e.prototype,"wrapMode",void 0),e}(oe),cp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C("Normal")],e.prototype,"mode",void 0),e}(oe),dp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C(!0)],e.prototype,"showDropArea",void 0),v([C(!1)],e.prototype,"allowReordering",void 0),v([C(!1)],e.prototype,"showToggleButton",void 0),v([C(!1)],e.prototype,"showGroupedColumn",void 0),v([C(!0)],e.prototype,"showUngroupButton",void 0),v([C(!1)],e.prototype,"disablePageWiseAggregates",void 0),v([C([])],e.prototype,"columns",void 0),v([C()],e.prototype,"captionTemplate",void 0),v([C(!1)],e.prototype,"enableLazyLoading",void 0),e}(oe),up=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C(!1)],e.prototype,"allowAdding",void 0),v([C(!1)],e.prototype,"allowEditing",void 0),v([C(!1)],e.prototype,"allowDeleting",void 0),v([C("Normal")],e.prototype,"mode",void 0),v([C(!0)],e.prototype,"allowEditOnDblClick",void 0),v([C(!0)],e.prototype,"showConfirmDialog",void 0),v([C(!1)],e.prototype,"showDeleteConfirmDialog",void 0),v([C()],e.prototype,"template",void 0),v([C()],e.prototype,"headerTemplate",void 0),v([C()],e.prototype,"footerTemplate",void 0),v([C("Top")],e.prototype,"newRowPosition",void 0),v([C({})],e.prototype,"dialog",void 0),v([C(!1)],e.prototype,"allowNextRowEdit",void 0),v([C(!1)],e.prototype,"showAddNewRow",void 0),e}(oe),fp=function(s){Te(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([C("Spinner")],e.prototype,"indicatorType",void 0),e}(oe),gp=function(s){Te(e,s);function e(t,r){var n=s.call(this,t,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.keyA=!1,n.frozenRightCount=0,n.freezeColumnRefresh=!0,n.rightcount=0,n.frozenLeftCount=0,n.leftcount=0,n.tablesCount=1,n.movableCount=0,n.movablecount=0,n.fixedcount=0,n.fixedCount=0,n.visibleFrozenLeft=0,n.visibleFrozenFixed=0,n.isPreparedFrozenColumns=!1,n.visibleFrozenRight=0,n.visibleMovable=0,n.frozenLeftColumns=[],n.frozenRightColumns=[],n.movableColumns=[],n.fixedColumns=[],n.stackedLeft=[],n.stackedRight=[],n.stackedFixed=[],n.stackedMovable=[],n.stackedarrayLeft=[],n.stackedarrayRight=[],n.stackedarrayFixed=[],n.stackedarrayMovable=[],n.media={},n.autoFitColumnsResize=!1,n.tableIndex=0,n.componentRefresh=pi.prototype.refresh,n.isChangeDataSourceCall=!1,n.mergedColumns=!1,n.isVirtualAdaptive=!1,n.requireTemplateRef=!0,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.translateX=0,n.isManualRefresh=!1,n.isAutoFitColumns=!1,n.enableDeepCompare=!1,n.totalDataRecordsCount=0,n.disableSelectedRecords=[],n.partialSelectedRecords=[],n.isSpan=!1,n.islazyloadRequest=!1,n.isAddNewRow=!1,n.addNewRowFocus=!0,n.selectVirtualRowOnAdd=!1,n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.isAutoGenerateColumns=!1,n.pageRequireRefresh=!0,n.mediaBindInstance={},n.commandDelIndex=void 0,n.preventAutoFit=!1,n.asyncTimeOut=50,n.isExportGrid=!1,n.isWidgetsDestroyed=!1,n.enableLogger=!1,n.needsID=!0,i.Inject(Kh),gt("mergePersistData",n.mergePersistGridData,n),n}i=e,e.prototype.getPersistData=function(){for(var t=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],r={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},n=0;n<t.length;n++)for(var o=this[t[parseInt(n.toString(),10)]],a=0,l=r[t[parseInt(n.toString(),10)]];a<l.length;a++){var h=l[a];delete o[""+h]}var p=this.pageSettings.template,d=Object.assign({template:void 0},this.pageSettings);this.enableVirtualization&&this.enablePersistence&&this.contentModule&&this.contentModule.getPageFromTop&&!c(this.scrollPosition)&&!c(this.scrollPosition.top)&&(d.properties.currentPage=this.contentModule.getPageFromTop(this.scrollPosition.top,{block:1})),this.setProperties({pageSettings:d},!0);var u=this.groupSettings.captionTemplate,f=u&&this.isAngular;f&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!c(this.pagerTemplate);var g=this.addOnPersist(t);return d.template=p,this.setProperties({pageSettings:d},!0),f&&(this.groupSettings.captionTemplate=u),g},e.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var t=[];return this.isDestroyed||(this.allowFiltering&&t.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&t.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&t.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&t.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&t.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&t.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&t.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&t.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&t.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&t.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&t.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&t.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&t.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&t.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&t.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),!c(this.columns)&&this.isCommandColumn(this.columns)&&t.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&t.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(t)),t},e.prototype.extendRequiredModules=function(t){this.enableInfiniteScrolling&&t.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"}),this.groupSettings.enableLazyLoading&&t.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"}),this.contextMenuItems&&t.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"}),this.showColumnMenu&&t.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"}),this.showColumnChooser&&t.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"}),!c(this.columns)&&this.isForeignKeyEnabled(this.columns)&&t.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"}),this.enableLogger&&t.push({member:"logger",args:[this],name:"Logger"})},e.prototype.resizeCheck=function(){var t=!!this.getColumns().filter(function(o){return o.autoFit===!0}).length;!c(this.columnModel)&&this.columnModel.length&&!(this.columnModel[0]instanceof de)&&(this.columnModel=[]);var r=!!(this.showColumnMenu&&(!this.columnMenuItems||this.columnMenuItems.filter(function(o){return o==="AutoFit"||o==="AutoFitAll"}).length)),n=!!(this.contextMenuItems&&this.contextMenuItems.filter(function(o){return o==="AutoFit"||o==="AutoFitAll"}).length);return this.allowResizing||this.autoFitColumnsResize||t||r||n},e.prototype.preRender=function(){this.serviceLocator=new Ph,this.initProperties(),this.initializeServices()},e.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=pi.prototype.refresh,this.freezeColumnRefresh=!0,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",FilterTitle:"Filter",FilterIcon:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",In:"In",NotIn:"Not In",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",SortIcon:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},e.prototype.render=function(){if(this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Yr({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new Dh(this,this.serviceLocator),this.searchModule=new Uh(this),this.scrollModule=new Qh(this),this.notify(lo,{}),this.pageSettings.enableQueryString){var t=new URL(window.location.href).searchParams.get("page");if(!c(t)&&window.location.href.indexOf("?page=")>0){var r=parseInt(t,10);this.setProperties({pageSettings:{currentPage:r}},!0),this.pageSettings.currentPage=r}}if((this.getDataModule().dataManager.dataSource.offline===!0||this.getDataModule().dataManager.dataSource.url===void 0)&&!(!c(this.dataSource)&&this.dataSource.result)&&(this.isVirtualAdaptive=!0),this.aggregateModule&&this.aggregates.length)for(var n=0;n<this.aggregates.length;n++)for(var o=0;o<this.aggregates[parseInt(n.toString(),10)].columns.length;o++){var a=this.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)];a.types&&(a.type=a.types)}if(this.isReact){var l={requireTemplateRef:this.requireTemplateRef};this.trigger(Zr,l),l.requireTemplateRef||(this.requireTemplateRef=l.requireTemplateRef)}else this.trigger(Zr);lr(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(dn,{}),this.getMediaColumns(),Yi(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.loadingIndicator.indicatorType==="Spinner"&&this.showSpinner(),this.notify(Ln,{}),this.loadingIndicator.indicatorType==="Shimmer"&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},e.prototype.setInitialFrozenColumnIndex=function(t){for(var r=0;r<t.length;r++){var n=t[parseInt(r.toString(),10)];n[""+_s]=n.index,n.columns&&this.setInitialFrozenColumnIndex(n.columns)}},e.prototype.showSpinner=function(){this.isExportGrid||hi(this.element)},e.prototype.hideSpinner=function(){this.isExportGrid||Jr(this.element)},e.prototype.showMaskRow=function(t,r){if(!(c(this.headerModule)||c(this.contentModule))){var n=this.getHeaderContent().firstChild,o=this.getContent().firstChild,a=this.getFooterContent();if(r){var l=r.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),p='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var d=0;d<h;d++){l.innerHTML+=p,l.querySelector(".e-ftrchk.e-mask-ftrchk").style.width="100%",l.querySelector(".e-checkbox-wrapper").style.width="100%";var u=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));u[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent")}return}if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(o.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var f=o.getBoundingClientRect().height,g=f===0?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,m=Math.ceil(g/this.getRowHeight());this.rowRenderingMode!=="Vertical"&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),this.contentMaskTable=this.createEmptyMaskTable(o,m);return}if(this.maskRowContentScroll=!!((this.enableVirtualization||this.enableColumnVirtualization)&&t),!this.contentMaskTable){var S=o;(this.enableVirtualization||this.enableColumnVirtualization)&&(S=S.querySelector(".e-virtualtable")),c(S.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(S,this.getContentMaskColumns(),t))}if(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&t==="X")){var S=n;this.enableColumnVirtualization&&t==="X"&&(S=S.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(S,this.getContentMaskColumns(),t)}if(a&&a.querySelector(".e-summaryrow")){var y=a.firstChild;if(!this.footerContentMaskTable){var R=y;this.footerContentMaskTable=this.createMaskTable(R)}}this.enableVirtualization&&t||I.add(o,"scroll",this.translateMaskRow,this)}},e.prototype.getContentMaskColumns=function(){return this.getColumns()},e.prototype.createEmptyMaskTable=function(t,r){var n=this.createElement("table",{className:"e-table e-masked-table"}),o=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row"});a.style.height=this.getRowHeight()+"px";var l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),a.appendChild(l);for(var h=0;h<r;h++)o.appendChild(a.cloneNode(!0));return n.appendChild(o),t.appendChild(n),n},e.prototype.createMaskTable=function(t,r,n){var o=t,a=!!M(o,".e-gridheader"),l=!!M(o,".e-gridcontent"),h=!!M(o,".e-gridfooter"),p=this.getContent().firstChild,d=p.scrollHeight,u=o.querySelector("table"),f=u.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),Go(f,"position: absolute; z-index: 5; width: "+u.getBoundingClientRect().width+"px;"),a&&!(this.enableColumnVirtualization&&n==="X")&&(f.style.transform="translate(0px,"+u.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var g=u.querySelector("colgroup").cloneNode(!0);if(g.removeAttribute("id"),g.setAttribute("class","e-masked-colgroup"),f.appendChild(g),a&&this.enableColumnVirtualization&&n==="X"){var m=this.createMaskRow(g,r);if(this.isFrozenGrid())for(var S=[].slice.call(m.querySelectorAll(".e-rowcell")),y=0;y<S.length;y++)y<this.frozenLeftCount?(this.frozenLeftCount-1===y&&S[parseInt(y.toString(),10)].classList.add("e-freezeleftborder"),S[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),S[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),S[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):S.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(S.length-this.frozenRightCount===y&&S[parseInt(y.toString(),10)].classList.add("e-freezerightborder"),S[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),S[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),S[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");var R=u.querySelector("thead"),w=[].slice.call(R.querySelectorAll("tr")),F=R.cloneNode();F.removeAttribute("role"),F.setAttribute("class","e-masked-thead");for(var L=w.length,y=0;y<L;y++)F.appendChild(m.cloneNode(!0)),F.childNodes[parseInt(y.toString(),10)].style.height=w[parseInt(y.toString(),10)].getBoundingClientRect().height+"px";f.appendChild(F)}var k=u.querySelector("tbody").cloneNode();k.removeAttribute("role"),k.setAttribute("class","e-masked-tbody");var z=u.querySelector("tbody");if(l||a){var H=p,L=Math.ceil(H.getBoundingClientRect().height/this.getRowHeight());if(this.allowPaging&&this.pageSettings.pageSize!==this.currentViewData.length&&this.pagerModule.pagerObj.totalPages!==this.pageSettings.currentPage){var m=this.createMaskRow(g,r),B=m.cloneNode(!0);B.classList.add("e-altrow");for(var y=0;y<this.pageSettings.pageSize-this.currentViewData.length;y++)k.appendChild(y%2===1?B.cloneNode(!0):m.cloneNode(!0))}if(z.querySelector(".e-emptyrow")||!z.childNodes.length||l&&this.childGrid){var m=this.createMaskRow(g,r),B=m.cloneNode(!0);B.classList.add("e-altrow");for(var y=0;y<L;y++){var Q=1;k.appendChild((y+Q)%2===0?B.cloneNode(!0):m.cloneNode(!0))}}else{var D='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])',w=[].slice.call(z.querySelectorAll(D)),K=z.querySelector(".e-addedrow, .e-editedrow"),ie=void 0;if(K){if(ie=w.indexOf(K),this.isFrozenGrid()&&this.enableColumnVirtualization)for(var S=[].slice.call(w[ie+1].querySelectorAll(".e-rowcell")),y=0;y<S.length;y++)y<this.frozenLeftCount?(S[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),S[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),S[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):S.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(S[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),S[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),S[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");K.classList.contains("e-addedrow")?w.splice(ie,2):w.splice(ie,1)}L=(this.enableVirtualization||this.enableColumnVirtualization)&&n?w.length:L<=w.length?L:w.length;for(var y=0;y<L;y++)k.appendChild(this.applyMaskRow(w[parseInt(y.toString(),10)].cloneNode(!0),w[parseInt(y.toString(),10)].getBoundingClientRect().height));if(K&&K.classList.contains("e-editedrow")&&ie<L){var ae=k.childNodes[parseInt(ie.toString(),10)];ae.style.height=this.getRowHeight()+"px",ae.classList.add("e-row"),K.classList.contains("e-altrow")&&ae.classList.add("e-altrow")}}}if(f.appendChild(k),h){var xe=u.querySelector("tfoot"),ce=xe.cloneNode();ce.setAttribute("class","e-masked-tfoot");for(var w=[].slice.call(xe.querySelectorAll("tr")),y=0;y<w.length;y++)ce.appendChild(this.applyMaskRow(w[parseInt(y.toString(),10)].cloneNode(!0),w[parseInt(y.toString(),10)].getBoundingClientRect().height));f.appendChild(ce)}if(a&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+me).style.position="relative"),o.insertBefore(f,o.firstChild),l&&!(this.enableVirtualization&&n)){var ke=d-f.getBoundingClientRect().height;ke=ke<0?0:ke;var Be=p.scrollTop<=ke?p.scrollTop:ke;this.enableVirtualization&&(Be-=bn(M(o,".e-virtualtable")).height),f.style.transform="translate(0px,"+Be+"px)"}return f},e.prototype.applyMaskRow=function(t,r){var n=t;n.removeAttribute("role"),n.removeAttribute("aria-rowindex"),n.removeAttribute("data-uid"),n.classList.add("e-masked-row"),n.style.height=r+"px";for(var o=[].slice.call(n.childNodes),a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),this.enableColumnVirtualization&&l.classList.contains("e-fixedfreeze")&&(E([l],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),T([l],["e-unfreeze"])),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return n},e.prototype.createMaskRow=function(t,r){var n=t,o=r,a=this.createElement("tr",{className:"e-masked-row e-row"});this.rowRenderingMode!=="Vertical"&&(a.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,p=0;h<n.childNodes.length;h++){var d=n.childNodes[parseInt(h.toString(),10)],u=l.cloneNode();u.innerHTML=this.getShimmerTemplate(),d.classList.contains("e-group-intent")||d.classList.contains("e-detail-intent")||d.classList.contains("e-drag-intent")?d.classList.contains("e-group-intent")?u.firstChild.classList.add("e-mask-group-intent"):d.classList.contains("e-detail-intent")?u.firstChild.classList.add("e-mask-detail-intent"):d.classList.contains("e-drag-intent")&&u.firstChild.classList.add("e-mask-drag-intent"):(this.rowRenderingMode==="Vertical"&&o[parseInt(p.toString(),10)]&&u.setAttribute("data-cell",o[parseInt(p.toString(),10)].headerText?o[parseInt(p.toString(),10)].headerText:o[parseInt(p.toString(),10)].field),d.style.display==="none"?u.classList.add("e-hide"):(u.style.textAlign=o[parseInt(p.toString(),10)]&&o[parseInt(p.toString(),10)].textAlign?o[parseInt(p.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",o[parseInt(p.toString(),10)]&&(o[parseInt(p.toString(),10)].type==="checkbox"||o[parseInt(p.toString(),10)].displayAsCheckBox)&&u.firstChild.classList.add("e-mask-checkbox-intent")),p++),a.appendChild(u)}return a},e.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},e.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var t=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),r=0;r<t.length;r++)t[parseInt(r.toString(),10)]&&t[parseInt(r.toString(),10)].classList.add("e-shimmer-wave")},e.prototype.translateMaskRow=function(t){for(var r=t.target,n=r.querySelectorAll(".e-masked-table"),o=0;o<n.length;o++){var a=n[parseInt(o.toString(),10)];if(a){var l=r.scrollHeight-a.getBoundingClientRect().height;l=l<0?0:l;var h=r.scrollTop<=l?r.scrollTop:l;this.enableVirtualization&&(h-=bn(M(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+h+"px)"}}},e.prototype.removeMaskRow=function(){if(!c(this.contentModule)){var t=this.getContent().firstChild;I.remove(t,"scroll",this.translateMaskRow)}this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+me).style.position="");for(var r=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],n=0;n<r.length;n++){var o=r[parseInt(n.toString(),10)];o&&q(o)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},e.prototype.refreshMaskRow=function(){var t=this.getContent().firstChild;if(!(!this.isInitialLoad&&!this.getColumns().length)&&this.contentMaskTable&&t.querySelector(".e-masked-table")){var r=t;this.enableVirtualization&&(r=r.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(r)}},e.prototype.refreshMaskRowColgroupWidth=function(t){var r=t.querySelector("table:not(.e-masked-table)"),n=r.querySelector(_e).cloneNode(!0),o=t.querySelector(".e-masked-table");n.removeAttribute("id"),n.setAttribute("class","e-masked-colgroup");for(var a=0;a<n.childNodes.length;a++)n.childNodes[parseInt(a.toString(),10)].removeAttribute("class");q(o.querySelector(".e-masked-colgroup")),o.insertBefore(n,o.firstChild),o.style.width=r.getBoundingClientRect().width+"px"},e.prototype.updateStackedFilter=function(){this.allowFiltering&&this.filterSettings.type==="FilterBar"&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},e.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var t=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!c(t))for(var r=0;r<t.length;r++)!c(t[parseInt(r.toString(),10)].hideAtMedia)&&(c(t[parseInt(r.toString(),10)].visible)||t[parseInt(r.toString(),10)].visible)&&this.pushMediaColumn(t[parseInt(r.toString(),10)],r)}this.updateFrozenColumnsWidth()},e.prototype.pushMediaColumn=function(t,r){this.mediaCol.push(t),this.media[t.uid]=window.matchMedia(t.hideAtMedia),this.mediaQueryUpdate(r,this.media[t.uid]),this.mediaBindInstance[parseInt(r.toString(),10)]=this.mediaQueryUpdate.bind(this,r),this.media[t.uid].addListener(this.mediaBindInstance[parseInt(r.toString(),10)])},e.prototype.updateMediaColumns=function(t){if(!this.enableColumnVirtualization){for(var r=this.getColumnIndexByUid(t.uid),n=0;n<this.mediaCol.length;n++)if(t.uid===this.mediaCol[parseInt(n.toString(),10)].uid){this.mediaCol.splice(n,1);return}this.pushMediaColumn(t,r)}},e.prototype.mediaQueryUpdate=function(t,r){var n=this.getColumns()[parseInt(t.toString(),10)];this.mediaCol.some(function(o){return o.uid===n.uid})&&(n.visible=r.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText")))},e.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var t=this.element.querySelector("."+Xi);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&t&&T([t],["e-footerpadding"]);var r=this.getColumns().filter(function(n){return n.type==="checkbox"});(r.length===0||r.length&&this.selectionSettings.checkboxMode==="ResetOnRowClick")&&(this.isCheckBoxSelection=!1),this.rowRenderingMode==="Vertical"&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),E([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},e.prototype.removeMediaListener=function(){for(var t=0;t<this.mediaCol.length;t++)this.media[this.mediaCol[parseInt(t.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(t.toString(),10)].index])},e.prototype.eventInitializer=function(){},e.prototype.destroy=function(){var t=this.element;if(t){var r=!!(t.querySelector("."+Ke)&&t.querySelector("."+vt));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(St,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),r&&s.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!O.isIE&&(this.element.innerHTML="");for(var n=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],o=0;o<n.length;o++)this[n[parseInt(o.toString(),10)]]&&(this[n[parseInt(o.toString(),10)]]=null);this.element.innerHTML="",Re(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},e.prototype.destroyDependentModules=function(){var t=this.element;!t||!t.querySelector("."+Ke)&&!t.querySelector("."+vt)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},e.prototype.getModuleName=function(){return"grid"},e.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(rn,{}))},e.prototype.setCSSClass=function(t){this.cssClass&&T([this.element],this.cssClass.split(" ")),t&&E([this.element],t.split(" "))},e.prototype.onPropertyChanged=function(t,r){var n=!1,o=!1,a=!1,l,h={requestType:"refresh"},p=null,d=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var u=Object.keys(t);u.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),o=!0);for(var f=0,g=u;f<g.length;f++){var m=g[f];switch(m){case"allowPaging":this.notify(ue,{module:"pager",enable:this.allowPaging}),n=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Ne,{module:"pager",properties:t.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel){this.pagerModule.isCancel=!1;return}this.notify(Ne,{module:"pager",properties:t.pageSettings}),(c(t.pageSettings.currentPage)&&c(t.pageSettings.pageSize)&&c(t.pageSettings.totalRecordsCount)||!c(r.pageSettings)&&t.pageSettings.currentPage!==r.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageRequireRefresh&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0),this.pageRequireRefresh||(this.pageRequireRefresh=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(ue,{module:"sort",enable:this.allowSorting}),n=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(ue,{module:"filter",enable:this.allowFiltering}),n=!0,this.filterSettings.type!=="FilterBar"||this.editSettings.showAddNewRow&&this.filterSettings.type==="FilterBar"?this.refreshHeader():this.height==="100%"&&this.scrollModule.refresh();break;case"height":case"width":this.notify(ue,{module:"scroll",properties:{width:t.width,height:t.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(ue,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(ue,{module:"selection",enable:this.allowSelection}),this.renderModule.refresh();break;case"cssClass":this.setCSSClass(r.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=te(this.rowTemplate),n=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=te(this.emptyRecordTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=te(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(ue,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),n=!0,l=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(n=!0,p=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null,d=p?p.ej2_instances[0]:null,this.childGrid&&d&&c(d.childGrid.childGrid)){var S=Object.assign({},d.childGrid,{childGrid:t.childGrid});for(d.setProperties({childGrid:S},!0);!c(d.parentDetails);){var y=document.querySelector("#"+d.parentDetails.parentID),R=y?y.ej2_instances[0]:null;if(R){var w=Object.assign({},R.childGrid);w.childGrid=d.childGrid,R.setProperties({childGrid:w},!0)}d=R}}this.headerModule.refreshUI();break;case"toolbar":this.notify(ue,{module:"toolbar"}),this.height==="100%"&&this.scrollModule.refresh();break;case"groupSettings":this.notify(Ne,{module:"group",properties:t.groupSettings,oldProperties:r.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(ue,{module:"aggregate",properties:t}),this.height==="100%"&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns"),a=!0,o=!0,this.addNewRowFocus=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(m,t,o)}}l&&this.updateDefaultCursor(),o?a||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():n&&(this.notify(nr,h),n=!1,this.maintainSelection(t.selectedRowIndex))}},e.prototype.extendedPropertyChange=function(t,r,n){switch(t){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=r.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),this.height!=="auto"&&(this.scrollModule.removePadding(!r.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=r.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=r.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=r.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(pl,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.resizeModule&&this.resizeModule.render(),this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?T([this.element],"e-grid-min-height"):E([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(ue,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(ue,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(ue,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.toolbarModule&&this.toolbarModule.refreshToolbarItems(),this.notify(ue,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Ne,{module:"filter",properties:r.filterSettings});break;case"searchSettings":this.notify(Ne,{module:"search",properties:r.searchSettings});break;case"sortSettings":this.notify(Ne,{module:"sort"});break;case"selectionSettings":this.notify(Ne,{module:"selection",properties:r.selectionSettings});break;case"editSettings":this.notify(Ne,{module:"edit",properties:r.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Ui,{case:"textwrap",isModeChg:t==="textWrapSettings"}),this.refreshHeader(),this.height==="100%"&&this.scrollModule.refresh();break;case"dataSource":var o=this.getDataModule().getState();if(this.allowPaging&&this.pageSettings.pageSizes&&!this.getDataModule().isRemote()&&!(o&&o.isPending)&&this.pagerModule.pagerObj.isAllPage){var a=this.dataSource instanceof _?this.dataSource.dataSource.json.length:"result"in this.dataSource?this.dataSource.count:this.dataSource.length,l=Array.isArray(this.pageSettings.pageSizes)&&this.pageSettings.pageSizes.indexOf("All")>-1?!0:this.pageSettings.pageSizes;!l&&this.pageSettings.pageSize!==a?this.pagerModule.pagerObj.isAllPage=!1:(this.setProperties({pageSettings:{pageSize:a}},!0),this.pagerModule.pagerObj.setProperties({pageSize:a},!0))}if(this.allowSelection&&this.isPersistSelection&&!(o&&o.isPending)&&this.clearSelection(),!c(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(r).deepWatch)for(var h=this.getPrimaryKeyFieldNames()[0],p=0,d=Object.keys(r.dataSource);p<d.length;p++)this.setRowData(Z(h,this.dataSource[d[parseInt(p.toString(),10)]]),this.dataSource[d[parseInt(p.toString(),10)]]);else if(o.isPending){var u=c(this.dataSource)?[]:this.dataSource.result,f=o.group||[];if(f.length&&!this.groupSettings.enableLazyLoading&&!(u.length&&u[0].field))for(var p=0;p<f.length;p++)u=fe.group(u,f[parseInt(p.toString(),10)],o.aggregates||[]);this.dataSource={result:u,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),o.resolver(this.dataSource)}else{if(!c(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){var u=this.dataSource.result,f=this.groupSettings.columns;if(f.length&&!(u.length&&u[0].field))for(var p=0;p<f.length;p++)u=fe.group(u,f[parseInt(p.toString(),10)]);this.dataSource={result:u,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1}),this.notify(an,{}),n||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(un,{}))}this.scrollRefresh();break;case"enableHover":var g=r.enableHover?T:E;g([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(r.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(Kl,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Ul,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(r.enableStickyHeader);break;case"allowPdfExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break;case"allowExcelExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break}},e.prototype.maintainSelection=function(t){var r=this;if(t!==-1){var n=function(){r.selectRow(t),r.off(pe,n)};this.on(pe,n,this)}},e.prototype.setProperties=function(t,r){s.prototype.setProperties.call(this,t,r);var n="filterSettings";t[""+n]&&this.filterModule&&r&&this.filterModule.refreshFilter()},e.prototype.getTablesCount=function(){return this.tablesCount},e.prototype.updateDefaultCursor=function(){for(var t=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),r=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),n=this.getColumns(),o=0;o<t.length;o++){var a=t[parseInt(o.toString(),10)];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(!n[parseInt(o.toString(),10)].allowReordering||!n[parseInt(o.toString(),10)].allowSorting||!n[parseInt(o.toString(),10)].allowGrouping?a.classList.add("e-defaultcursor"):a.classList.add("e-mousepointer"))}for(var l=0;l<r.length;l++)this.allowReordering&&r[parseInt(l.toString(),10)].classList.add("e-mousepointer")},e.prototype.updateColumnModel=function(t,r){for(var n=0,o=c(t)?0:t.length;n<o;n++)t[parseInt(n.toString(),10)].columns?this.updateColumnModel(t[parseInt(n.toString(),10)].columns,!0):this.columnModel.push(t[parseInt(n.toString(),10)]);(c(r)||!r)&&this.updateLockableColumns()},e.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},e.prototype.isFrozenGrid=function(){return this.getFrozenColumns()!==0||this.frozenLeftColumns.length!==0||this.frozenRightColumns.length!==0||this.fixedColumns.length!==0},e.prototype.getFrozenMode=function(){return this.frozenName},e.prototype.updateLockableColumns=function(){for(var t=this.columnModel,r=0,n=0,o=this.getFrozenColumns(),a=0;a<t.length;a++)t[parseInt(a.toString(),10)].lockColumn&&(a<o?(t.splice(r,0,t.splice(a,1)[0]),r++):(t.splice(o+n,0,t.splice(a,1)[0]),n++))},e.prototype.checkLockColumns=function(t){for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].columns?this.checkLockColumns(t[parseInt(r.toString(),10)].columns):t[parseInt(r.toString(),10)].lockColumn&&this.lockcolPositionCount++},e.prototype.leftrightColumnWidth=function(t){var r=t==="left"?this.getFrozenLeftColumns():t==="right"?this.getFrozenRightColumns():[],n=0;return r.filter(function(o){o.visible&&(n+=parseInt(o.width.toString(),10))}),n},e.prototype.getColumns=function(t){var r=this,n=this.inViewIndexes.map(function(f){return f-r.groupSettings.columns.length}).filter(function(f){return f>-1}),o=n.length;(!this.enableColumnVirtualization||c(this.columnModel)||this.columnModel.length===0||t)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=o===0?this.columnModel:this.getVisibleColumns().slice(n[0],n[o-1]+1),l=[],h=[],p=[],d=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&o===0;d&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var u=0;u<a.length;u++)a[parseInt(u.toString(),10)].freeze==="Left"||a[parseInt(u.toString(),10)].isFrozen?(l.push(a[parseInt(u.toString(),10)]),d&&this.frozenLeftColumns.push(a[parseInt(u.toString(),10)])):a[parseInt(u.toString(),10)].freeze==="Right"?(h.push(a[parseInt(u.toString(),10)]),d&&this.frozenRightColumns.push(a[parseInt(u.toString(),10)])):p.push(a[parseInt(u.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(l=this.frozenLeftColumns),this.frozenRightColumns.length&&(h=this.frozenRightColumns)),l.concat(p).concat(h)},e.prototype.getStackedHeaderColumnByHeaderText=function(t,r){for(var n=0;n<r.length;n++){var o=r[parseInt(n.toString(),10)];if(o.field===t||o.headerText===t){this.stackedColumn=o;break}else o.columns&&this.getStackedHeaderColumnByHeaderText(t,o.columns)}return this.stackedColumn},e.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},e.prototype.getQuery=function(){return this.query},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setColumnIndexesInView=function(t){this.inViewIndexes=t},e.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},e.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},e.prototype.setGridHeaderContent=function(t){this.headerModule.setPanel(t)},e.prototype.getContentTable=function(){return this.contentModule.getTable()},e.prototype.setGridContentTable=function(t){this.contentModule.setTable(t)},e.prototype.getContent=function(){return this.contentModule.getPanel()},e.prototype.setGridContent=function(t){this.contentModule.setPanel(t)},e.prototype.getHeaderTable=function(){return this.headerModule.getTable()},e.prototype.setGridHeaderTable=function(t){this.headerModule.setTable(t)},e.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(Xi)[0],this.footerElement},e.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(Xi)[0],this.footerElement.firstChild.firstChild},e.prototype.getPager=function(){return this.gridPager},e.prototype.setGridPager=function(t){this.gridPager=t},e.prototype.getRowByIndex=function(t){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(t):this.contentModule.getRowByIndex(t)},e.prototype.getMovableRowByIndex=function(t){return this.contentModule.getRowByIndex(t)},e.prototype.getFrozenRowByIndex=function(t){return this.contentModule.getRowByIndex(t)},e.prototype.getRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRowByIndex=function(t){return this.contentModule.getRowByIndex(t)},e.prototype.getRowInfo=function(t){var r=t,n={target:t};if(!c(t)&&c(b(r,"e-detailrowcollapse")&&c(b(r,"e-recordplusexpand")))){var o=M(r,"."+U);if(!o){var a=M(r,"."+Se);if(!c(a)&&!a.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid")),h=parseInt(a.getAttribute(ee),10)-1;n={row:a,rowData:l.data,rowIndex:h}}return n}var p=parseInt(o.getAttribute(ne),10)-1,d=M(o,"."+Se);if(!c(o)&&!isNaN(p)&&!c(d)){var h=parseInt(d.getAttribute(ee),10)-1,u=this.contentModule.getRows(),f=p+this.getIndentCount(),g=u.filter(function(R){return R.uid===d.getAttribute("data-uid")}),m={},S=void 0;Object.keys(g).length&&(m=g[0].data,S=g[0].cells[parseInt(f.toString(),10)].column),n={cell:o,cellIndex:p,row:d,rowIndex:h,rowData:m,column:S,target:t}}}return n},e.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},e.prototype.getDataRows=function(){return this.getAllDataRows()},e.prototype.getAllDataRows=function(t){if(c(this.getContentTable().querySelector(j)))return[];var r=this.getContentTable().querySelector(j),n=[].slice.call(r.children);if(this.editSettings.showAddNewRow&&(n[0].classList.contains("e-addedrow")?n.shift():n[n.length-1].classList.contains("e-addedrow")&&n.pop()),this.frozenRows){var o=this.getHeaderTable().querySelector(j),a=[].slice.call(o.children);n=this.addMovableRows(a,n),this.editSettings.showAddNewRow&&a[0].classList.contains("e-addedrow")&&a.shift()}var l=this.generateDataRows(n,t);return l},e.prototype.addMovableRows=function(t,r){for(var n=0,o=r.length;n<o;n++)t.push(r[parseInt(n.toString(),10)]);return t},e.prototype.generateDataRows=function(t,r){for(var n=[],o=0,a=t.length;o<a;o++)t[parseInt(o.toString(),10)].classList.contains(Se)&&(!t[parseInt(o.toString(),10)].classList.contains("e-hiddenrow")||r)&&(this.isCollapseStateEnabled()?n[parseInt(t[parseInt(o.toString(),10)].getAttribute("aria-rowindex"),10)-1]=t[parseInt(o.toString(),10)]:n.push(t[parseInt(o.toString(),10)]));return n},e.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},e.prototype.getAllMovableDataRows=function(t){return this.getAllDataRows(t)},e.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},e.prototype.getAllFrozenDataRows=function(t){return this.getAllDataRows(t)},e.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},e.prototype.getAllFrozenRightDataRows=function(t){return this.getAllDataRows(t)},e.prototype.setCellValue=function(t,r,n){var o="cells",a="data",l="index",h="uid",p=this.getPrimaryKeyFieldNames()[0],d=new Pe(this,this.serviceLocator),u=this.getColumnIndexByField(r),f=this.getColumnByField(r),g=this.contentModule.getRows(),m=g.filter(function(F){return Z(p,F.data)===t})[0],S=m?this.element.querySelector("[data-uid="+m[""+h]+"]"):null;if(!c(S)){typeof n=="string"&&(n=this.sanitize(n)),gt(r,n,m[""+a]);var y=this.enableVirtualization?S.children[parseInt(u.toString(),10)]:this.getCellFromIndex(m[""+l],u);if(!c(y)){var R=0;this.groupSettings.columns.length&&(u=u+this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&u++,this.isRowDragable()&&u++;var w=m[""+o][u-R];d.refreshTD(y,w,m[""+a],{index:m[""+l]}),this.isReact&&(y=this.enableVirtualization?S.children[parseInt(u.toString(),10)]:this.getCellFromIndex(m[""+l],u)),this.aggregates.length>0&&(this.notify(tn,{}),this.groupSettings.columns.length>0&&this.notify(Fs,{})),!c(m)&&!c(m.changes)&&(m.changes[""+r]=n),this.trigger($r,{cell:y,column:f,data:m[""+a]}),this.isReact&&y.getAttribute("tabindex")==="0"&&y.classList.contains("e-focused")&&y.focus()}}},e.prototype.refreshReactColumnTemplateByUid=function(t,r){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var o=!!(n.childGrid&&n.element.querySelectorAll(".e-childgrid").length),a=o?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows();n.refreshReactTemplateTD(a,o),r&&n.renderTemplates()})},e.prototype.refreshReactTemplateTD=function(t,r,n){for(var o="cells",a="index",l=this.getIndentCount(),h=0,p=!1,d=0;d<t.length;d++){var u=this.getRowObjectFromUID(t[parseInt(d.toString(),10)].getAttribute("data-uid"));if(r&&!u&&b(t[parseInt(d.toString(),10)],"e-childgrid")){var f=b(t[parseInt(d.toString(),10)],"e-childgrid").ej2_instances[0];u=f.getRowObjectFromUID(t[parseInt(d.toString(),10)].getAttribute("data-uid")),h=f.getIndentCount(),p=!0}if(u&&u.isDataRow&&!c(u.index)&&!t[parseInt(d.toString(),10)].classList.contains("e-editedrow"))for(var g=0;g<u[""+o].length;g++){var m=u[""+o][parseInt(g.toString(),10)];if(m.isTemplate){var S=new Pe(this,this.serviceLocator),y=r?t[parseInt(d.toString(),10)].children[m.index+(p?h:l)]:this.getCellFromIndex(d,n?m.index:g-l);S.refreshTD(y,m,u.data,{index:u[""+a]})}}p=!1}},e.prototype.refreshGroupCaptionFooterTemplate=function(){for(var t=!!(this.childGrid&&this.element.querySelectorAll(".e-childgrid").length),r=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),n=0;n<r.length;n++){var o=this,a=this.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"));if(t&&!a&&b(r[parseInt(n.toString(),10)],"e-childgrid")&&(o=b(r[parseInt(n.toString(),10)],"e-childgrid").ej2_instances[0],a=o.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"))),a){var l=a.cells.filter(function(p){return p.isDataCell}),h={cells:l,data:a.data,dataUid:a.uid};o.notify(Xa,h)}}},e.prototype.refreshReactHeaderTemplateByUid=function(t){if(this.isReact)for(var r="cells",n=this.headerModule.rows,o=this.getNormalizedColumnIndex(t),a=function(p){var d=n[parseInt(p.toString(),10)][""+r][parseInt(o.toString(),10)];if(d&&d.column.uid===t){var u=new xo(l,l.serviceLocator),f=b(l.element.querySelectorAll("[e-mappinguid="+t+"]")[0],"e-templatecell");u.refresh(d,f);var g=l.sortSettings.columns,m=g.findIndex(function(R){return R.field===d.column.field});if(m!==-1){var S=l.getColumnHeaderByField(d.column.field);l.ariaService.setSort(S,g[parseInt(m.toString(),10)].direction.toLowerCase()),g.length>1&&S.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(m+1).toString()}),S.querySelector(".e-headertext"));var y=S.querySelector(".e-sortfilterdiv");g[parseInt(m.toString(),10)].direction==="Ascending"?Re(y,["e-ascending","e-icon-ascending"],[]):Re(y,["e-descending","e-icon-descending"],[])}}},l=this,h=0;h<n.length;h++)a(h)},e.prototype.setRowData=function(t,r){var n="uid",o=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(o=o.filter(function(d){return d.isDataRow}));var l=o.filter(function(d){return Z(a,d.data)===t})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l[""+n]+"]")):void 0;if(!c(l)&&h.length){if(l.changes=r,this.frozenRows){var p=this.getRowsObject()[l.index];this.setFrozenRowData(p,r)}else this.setFrozenRowData(l,r);this.aggregates.length>0&&(this.notify(tn,{}),this.groupSettings.columns.length>0&&this.notify(Fs,{}))}else return},e.prototype.setFrozenRowData=function(t,r){var n=new wi(this.serviceLocator,null,this);t.changes=r,kp(t,this.getForeignKeyColumns(),t.changes),n.refresh(t,this.getColumns(),!0)},e.prototype.getCellFromIndex=function(t,r){var n=this.getColumnByIndex(r);return qp(this,n,t,r)},e.prototype.getMovableCellFromIndex=function(t,r){return this.getCellFromIndex(t,r)},e.prototype.getFrozenRightCellFromIndex=function(t,r){return this.getCellFromIndex(t,r)},e.prototype.getColumnHeaderByIndex=function(t){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(t.toString(),10)]},e.prototype.getMovableColumnHeaderByIndex=function(t){return this.getColumnHeaderByIndex(t)},e.prototype.getFrozenRightColumnHeaderByIndex=function(t){return this.getColumnHeaderByIndex(t)},e.prototype.getFrozenLeftColumnHeaderByIndex=function(t){return this.getColumnHeaderByIndex(t)},e.prototype.getRowObjectFromUID=function(t){var r=this.contentModule.getRows(),n=this.rowObject(r,t);return c(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(n=this.rowObject(this.vRows,t)),n},e.prototype.rowObject=function(t,r){if(t)for(var n=0,o=t;n<o.length;n++){var a=o[n];if(a.uid===r)return a}return null},e.prototype.getRowsObject=function(){return this.contentModule.getRows()},e.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},e.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},e.prototype.getColumnHeaderByField=function(t){var r=this.getColumnByField(t);return r?this.getColumnHeaderByUid(r.uid):void 0},e.prototype.getColumnHeaderByUid=function(t){var r=this.getHeaderContent().querySelector("[e-mappinguid="+t+"]");return r?r.parentElement:void 0},e.prototype.getColumnByIndex=function(t){var r;return this.getColumns().some(function(n,o){return r=n,o===t}),r},e.prototype.getColumnByField=function(t){return Ht(this.getColumns(),function(r){if(r.field===t)return r})[0]},e.prototype.getColumnIndexByField=function(t){for(var r=this.getColumns(),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].field===t)return n;return-1},e.prototype.getColumnByUid=function(t,r){var n=r?this.columns:this.getColumns();return Ht(n.concat(this.getStackedColumns(this.columns)),function(o){if(o.uid===t)return o})[0]},e.prototype.getStackedColumns=function(t,r){r===void 0&&(r=[]);for(var n=0,o=t;n<o.length;n++){var a=o[n];a.columns&&(r.push(a),this.getStackedColumns(a.columns,r))}return r},e.prototype.getColumnIndexByUid=function(t){var r=Ht(this.getColumns(),function(n,o){if(n.uid===t)return o})[0];return c(r)?-1:r},e.prototype.getUidByColumnField=function(t){return Ht(this.getColumns(),function(r){if(r.field===t)return r.uid})[0]},e.prototype.getNormalizedColumnIndex=function(t){var r=this.getColumnIndexByUid(t);return r+this.getIndentCount()},e.prototype.getIndentCount=function(){var t=0;return this.allowGrouping&&(t+=this.groupSettings.columns.length),this.isDetail()&&t++,this.isRowDragable()&&c(this.rowDropSettings.targetID)&&t++,t},e.prototype.getColumnFieldNames=function(){for(var t=[],r,n=0,o=this.getColumns().length;n<o;n++)r=this.getColumns()[parseInt(n.toString(),10)],r.visible&&t.push(r.field);return t},e.prototype.getRowTemplate=function(){return this.rowTemplateFn},e.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},e.prototype.getDetailTemplate=function(){return this.detailTemplateFn},e.prototype.getEditTemplate=function(){return this.editTemplateFn},e.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},e.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},e.prototype.getColumnChooserTemplate=function(){return this.columnChooserTemplateFn},e.prototype.getColumnChooserHeaderTemplate=function(){return this.columnChooserHeaderTemplateFn},e.prototype.getColumnChooserFooterTemplate=function(){return this.columnChooserFooterTemplateFn},e.prototype.getPrimaryKeyFieldNames=function(){for(var t=[],r=0;r<this.columnModel.length;r++)this.columnModel[parseInt(r.toString(),10)].isPrimaryKey&&t.push(this.columnModel[parseInt(r.toString(),10)].field);return t},e.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},e.prototype.refreshHeader=function(){this.headerModule.refreshUI()},e.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},e.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},e.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},e.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},e.prototype.getSelectedColumnsUid=function(){var t=this,r=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(n){return r.push(t.getColumns()[parseInt(n.toString(),10)].uid)}),r},e.prototype.getDataModule=function(){return this.renderModule.data},e.prototype.showColumns=function(t,r){r=r||"headerText",this.showHider.show(t,r)},e.prototype.hideColumns=function(t,r){r=r||"headerText",this.showHider.hide(t,r)},e.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},e.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},e.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},e.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},e.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var t=this.getColumns(),r=!0,n=0,o=0,a=0,l=t.some(function(u){return(u.freeze==="Left"||u.freeze==="Right"||u.freeze==="Fixed"||u.isFrozen)&&u.width==="auto"}),h=function(u){var f=t[parseInt(u.toString(),10)];if(c(f.width)&&(f.freeze==="Left"||f.freeze==="Right"||f.freeze==="Fixed"||f.isFrozen)&&(f.width=Math.max(200,f.minWidth?parseFloat(f.minWidth.toString()):0),!c(f.maxWidth)&&parseFloat(f.maxWidth.toString())<f.width&&(f.width=f.maxWidth)),f.width==="auto"&&l){var g=0;if(r){t.filter(function(S){if(S.visible&&(S.width==="auto"&&n++,S.width!=="auto")){var y=c(S.width)?Math.max(200,S.minWidth?parseFloat(S.minWidth.toString()):0):parseFloat(S.width.toString());g+=y}});var m=p.isPercentageWidthGrid()||p.width==="auto"?p.element.getBoundingClientRect().width:parseFloat(p.width.toString());o=p.height==="auto"?m-g:m-g-De(),o<0&&(o=0),a=parseFloat((o/n).toString()),t.filter(function(S){S.visible&&S.minWidth&&parseFloat(S.minWidth.toString())>a&&(o=o-parseFloat(S.minWidth.toString()),n--)}),r=!1}f.minWidth&&parseFloat(f.minWidth.toString())>a?f.width=parseFloat(f.minWidth.toString()):f.width=o/n}},p=this,d=0;d<t.length;d++)h(d)},e.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},e.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},e.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},e.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},e.prototype.getVisibleMovableCount=function(){return this.visibleMovable},e.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},e.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},e.prototype.getMovableColumns=function(){return this.movableColumns},e.prototype.splitStackedColumns=function(t){for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].columns?this.splitStackedColumns(t[parseInt(r.toString(),10)].columns):t[parseInt(r.toString(),10)].freeze==="Left"||t[parseInt(r.toString(),10)].isFrozen?(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.leftcount++):t[parseInt(r.toString(),10)].freeze==="Right"?(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.rightcount++):t[parseInt(r.toString(),10)].freeze==="Fixed"?(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenFixed++,this.fixedcount++):(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleMovable++,this.movablecount++)},e.prototype.pushStackedColumns=function(t,r,n,o,a){n[parseInt(r.toString(),10)]={headerText:o.headerText},o.textAlign&&(n[parseInt(r.toString(),10)].textAlign=o.textAlign),o.customAttributes&&(n[parseInt(r.toString(),10)].customAttributes=o.customAttributes);for(var l=0;l<t.length;l++)if(t[parseInt(l.toString(),10)].columns)r=r+1,this.pushStackedColumns(t[parseInt(l.toString(),10)].columns,r,n,t[parseInt(l.toString(),10)],a),r=r-1;else{var h=[];h=n.slice().slice(0,r+1),t[parseInt(l.toString(),10)].freeze==="Left"||t[parseInt(l.toString(),10)].isFrozen?(this.stackedLeft.push(h),this.stackedarrayLeft.push(t[parseInt(l.toString(),10)])):t[parseInt(l.toString(),10)].freeze==="Right"?(this.stackedRight.push(h),this.stackedarrayRight.push(t[parseInt(l.toString(),10)])):t[parseInt(l.toString(),10)].freeze==="Fixed"?(this.stackedFixed.push(h),this.stackedarrayFixed.push(t[parseInt(l.toString(),10)])):(this.stackedMovable.push(h),this.stackedarrayMovable.push(t[parseInt(l.toString(),10)]))}},e.prototype.pushallcol=function(t,r,n,o,a){if(n.headerText===r.headerText)if(a)n.columns.push(o);else{var l={headerText:t.headerText,columns:[]};t.textAlign&&(l.textAlign=t.textAlign),t.customAttributes&&(l.customAttributes=t.customAttributes),n.columns.push(l)}else if(n.columns&&n.columns.length)for(var h=0;h<n.columns.length;h++)this.pushallcol(t,r,n.columns[parseInt(h.toString(),10)],o,a)},e.prototype.resetStackedColumns=function(t,r,n){for(var o={},a=[],l=1;l<=t.length;l++)for(var h=t[l-1],p=0;p<h.length;p++)if(!o.columns&&l===1?(o={headerText:h[parseInt(p.toString(),10)].headerText,textAlign:h[parseInt(p.toString(),10)].textAlign,customAttributes:h[parseInt(p.toString(),10)].customAttributes,columns:[]},a.push(h[parseInt(p.toString(),10)])):a.indexOf(h[parseInt(p.toString(),10)])===-1&&(this.pushallcol(h[parseInt(p.toString(),10)],h[p-1],o),a.push(h[parseInt(p.toString(),10)])),p===h.length-1){this.pushallcol(null,h[parseInt(p.toString(),10)],o,r[l-1],!0);for(var d=0;d!==t.length-1&&l!==t.length;){var u=h.map(function(g){return g.headerText}).join(", "),f=t[parseInt(l.toString(),10)].map(function(g){return g.headerText}).join(", ");u===f&&(l++,this.pushallcol(null,h[parseInt(p.toString(),10)],o,r[l-1],!0)),d++}}n==="Left"?this.frozenLeftColumns.push(o):n==="Right"?this.frozenRightColumns.push(o):this.movableColumns.push(o)},e.prototype.splitFrozenCount=function(t){if(this.frozenColumns||this.changedProperties&&this.changedProperties.frozenColumns===0){var r=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var n=0;n<r.length;n++)this.frozenColumns>n?r[parseInt(n.toString(),10)].freeze="Left":r[parseInt(n.toString(),10)].freeze==="Right"||r[parseInt(n.toString(),10)].freeze==="Fixed"?r[parseInt(n.toString(),10)].freeze=r[parseInt(n.toString(),10)].freeze:r[parseInt(n.toString(),10)].freeze=void 0}for(var n=0;n<(c(t)?0:t.length);n++)if(t[parseInt(n.toString(),10)].columns){this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0;var o=[];this.splitStackedColumns(t[parseInt(n.toString(),10)].columns),this.leftcount&&!this.rightcount&&!this.movablecount&&!this.fixedcount?(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(t[parseInt(n.toString(),10)])):this.rightcount&&!this.leftcount&&!this.movablecount&&!this.fixedcount?(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(t[parseInt(n.toString(),10)])):this.movablecount&&!this.leftcount&&!this.rightcount&&!this.fixedcount?(this.movableCount+=this.movablecount,this.movableColumns.push(t[parseInt(n.toString(),10)])):this.fixedcount&&!this.leftcount&&!this.rightcount&&!this.movablecount?(this.fixedCount+=this.fixedcount,this.fixedColumns.push(t[parseInt(n.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(t[parseInt(n.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(t[parseInt(n.toString(),10)].columns,0,o,t[parseInt(n.toString(),10)],{headerText:t[parseInt(n.toString(),10)].headerText,textAlign:t[parseInt(n.toString(),10)].textAlign,customAttributes:t[parseInt(n.toString(),10)].customAttributes,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[])}else t[parseInt(n.toString(),10)].freeze==="Right"?(t[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.frozenRightColumns.push(t[parseInt(n.toString(),10)]),this.frozenRightCount++):t[parseInt(n.toString(),10)].freeze==="Left"||t[parseInt(n.toString(),10)].isFrozen?(t[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(t[parseInt(n.toString(),10)]),this.frozenLeftCount++):t[parseInt(n.toString(),10)].freeze==="Fixed"?(this.fixedColumns.push(t[parseInt(n.toString(),10)]),this.fixedCount++,this.movableColumns.push(t[parseInt(n.toString(),10)]),this.movableCount++):(t[parseInt(n.toString(),10)].visible!==!1&&this.visibleMovable++,this.movableColumns.push(t[parseInt(n.toString(),10)]),this.movableCount++);if(this.frozenLeftColumns.length){var r=this.frozenLeftColumns[this.frozenLeftColumns.length-1];this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(r instanceof de?this.lastVisibleLeftCol(this.frozenLeftColumns):r)}if(this.frozenRightColumns.length){var r=this.frozenRightColumns[0];this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(r instanceof de?this.firstVisibleRightCol(this.frozenRightColumns):r)}if((this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh){var r=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);this.setProperties({columns:r},!0),this.freezeColumnRefresh=!1}},e.prototype.removeBorder=function(t){for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].columns&&t[parseInt(r.toString(),10)].columns.length?((t[parseInt(r.toString(),10)].border==="Right"||t[parseInt(r.toString(),10)].border==="Left")&&(t[parseInt(r.toString(),10)].border=void 0),this.removeBorder(t[parseInt(r.toString(),10)].columns)):(t[parseInt(r.toString(),10)].border==="Right"||t[parseInt(r.toString(),10)].border==="Left")&&(t[parseInt(r.toString(),10)].border=void 0)},e.prototype.isVisibleColumns=function(t,r){if(t.columns&&t.columns.length)for(var n=0;n<t.columns.length;n++)this.isVisibleColumns(t.columns[parseInt(n.toString(),10)],r),t.columns[parseInt(n.toString(),10)].visible&&c(t.columns[parseInt(n.toString(),10)].columns)&&(!c(t.columns[parseInt(n.toString(),10)].freeze)||t.columns[parseInt(n.toString(),10)].isFrozen)&&r.push("true");else t.visible&&(!c(t.freeze)||t.isFrozen)&&r.push("true")},e.prototype.lastVisibleLeftCol=function(t){for(var r,n=t.length-1;n>=0;n--){var o=[];if(this.isVisibleColumns(t[parseInt(n.toString(),10)],o),t[parseInt(n.toString(),10)].visible&&o.indexOf("true")!==-1){r=t[parseInt(n.toString(),10)];break}}return r},e.prototype.firstVisibleRightCol=function(t){for(var r,n=0;n<t.length;n++){var o=[];if(this.isVisibleColumns(t[parseInt(n.toString(),10)],o),t[parseInt(n.toString(),10)].visible&&o.indexOf("true")!==-1){r=t[parseInt(n.toString(),10)];break}}return r},e.prototype.frozenLeftBorderColumns=function(t){if(!c(t))if(t.columns&&t.columns.length){t.border="Left";var r=t.columns[t.columns.length-1];this.frozenLeftBorderColumns(r instanceof de&&r.columns?this.lastVisibleLeftCol(t.columns):r)}else t.border="Left"},e.prototype.frozenRightBorderColumns=function(t){if(!c(t))if(t.columns&&t.columns.length){t.border="Right";var r=t.columns[0];this.frozenRightBorderColumns(r instanceof de&&r.columns?this.firstVisibleRightCol(t.columns):r)}else t.border="Right"},e.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},e.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},e.prototype.getVisibleFrozenColumnsCount=function(){for(var t=0,r=this.columnModel,n=0;n<this.frozenColumns;n++)r[parseInt(n.toString(),10)].visible&&t++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible&&(r[parseInt(n.toString(),10)].freeze==="Left"||r[parseInt(n.toString(),10)].freeze==="Right")&&t++;return t},e.prototype.getVisibleFrozenCount=function(t,r){if(!this.frozenLeftCount&&!this.leftcount&&(!this.frozenRightCount||!this.rightcount))for(var n=0,o=t.length;n<o;n++)t[parseInt(n.toString(),10)].columns?r=this.getVisibleFrozenCount(t[parseInt(n.toString(),10)].columns,r):t[parseInt(n.toString(),10)].isFrozen&&t[parseInt(n.toString(),10)].visible&&r++;return r},e.prototype.getFrozenCount=function(t,r,n){for(var o=0,a=c(t)?0:t.length;o<a;o++)t[parseInt(o.toString(),10)].columns?r=this.getFrozenCount(t[parseInt(o.toString(),10)].columns,r,n):(t[parseInt(o.toString(),10)].isFrozen&&n>this.frozenColumns-1&&r++,n++);return r},e.prototype.goToPage=function(t){this.pagerModule&&this.pagerModule.goToPage(t)},e.prototype.updateExternalMessage=function(t){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(t)},e.prototype.sortColumn=function(t,r,n){this.sortModule&&this.sortModule.sortColumn(t,r,n)},e.prototype.changeDataSource=function(t,r){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),r&&r.length&&this.setProperties({columns:r},!0),t&&(c(r)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:t},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},e.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},e.prototype.removeSortColumn=function(t){this.sortModule&&this.sortModule.removeSortColumn(t)},e.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},e.prototype.filterByColumn=function(t,r,n,o,a,l,h,p){this.filterModule&&this.filterModule.filterByColumn(t,r,n,o,a,l,h,p)},e.prototype.clearFiltering=function(t){this.filterModule&&this.filterModule.clearFiltering(t)},e.prototype.removeFilteredColsByField=function(t,r){this.filterModule&&this.filterModule.removeFilteredColsByField(t,r)},e.prototype.selectRow=function(t,r){this.selectionModule&&this.selectionModule.selectRow(t,r)},e.prototype.selectRows=function(t){this.selectionModule&&this.selectionModule.selectRows(t)},e.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},e.prototype.selectCell=function(t,r){this.selectionModule&&this.selectionModule.selectCell(t,r)},e.prototype.selectCellsByRange=function(t,r){this.selectionModule.selectCellsByRange(t,r)},e.prototype.search=function(t){this.searchModule&&this.searchModule.search(t)},e.prototype.print=function(){this.printModule&&this.printModule.print()},e.prototype.deleteRecord=function(t,r){this.editModule&&this.editModule.deleteRecord(t,r)},e.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},e.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},e.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},e.prototype.addRecord=function(t,r){this.editModule&&this.editModule.addRecord(t,r)},e.prototype.deleteRow=function(t){this.editModule&&this.editModule.deleteRow(t)},e.prototype.editCell=function(t,r){this.editModule&&this.editModule.editCell(t,r)},e.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},e.prototype.updateCell=function(t,r,n){this.editModule&&this.editModule.updateCell(t,r,n)},e.prototype.updateRow=function(t,r){this.editModule&&this.editModule.updateRow(t,r)},e.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},e.prototype.enableToolbarItems=function(t,r){this.toolbarModule&&this.toolbarModule.enableItems(t,r)},e.prototype.copy=function(t){this.clipboardModule&&this.clipboardModule.copy(t)},e.prototype.recalcIndentWidth=function(){var t=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&!(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell.e-indentRefreshed")||!this.getContentTable())){var r=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,n=[].slice.call(this.getHeaderTable().querySelector(_e).childNodes),o=[].slice.call(this.getContentTable().querySelector(_e).childNodes),a=r/30,l=this.getFrozenMode()==="Right"?this.groupSettings.columns.length+this.getColumns().length:0,h=this.element.offsetWidth,p=function(d,u){if(wn(t)){var f=(u/h*100).toFixed(1)+"%";n[parseInt(d.toString(),10)].style.width=f,o[parseInt(d.toString(),10)].style.width=f}else n[parseInt(d.toString(),10)].style.width=u+"px",o[parseInt(d.toString(),10)].style.width=u+"px";t.notify(po,{index:d,width:u})};for(a>=1&&(r=30/a),r<1&&(r=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(r=30);l<this.groupSettings.columns.length;)p(l,r),l++;this.isDetail()&&(p(l,r),l++),this.isRowDragable()&&p(l,r),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").classList.add("e-indentRefreshed")}},e.prototype.resetIndentWidth=function(){if(!this.isDestroyed){if(wn(this)&&(this.getHeaderTable().querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),(this.width==="auto"||typeof this.width=="string"&&this.width.indexOf("%")!==-1)&&this.getColumns().filter(function(r){return(!r.width||r.width==="auto")&&r.minWidth}).length>0){var t=this.widthService.getTableWidth(this.getColumns(),!0);this.widthService.setMinwidthBycalculation(t)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&this.textWrapSettings.wrapMode!=="Content"&&this.notify(Wr,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder(),this.enableStickyHeader&&this.scrollModule.makeStickyHeader(),this.enableAutoFill&&this.selectionSettings.type==="Multiple"&&this.selectionSettings.mode==="Cell"&&this.selectionModule.selectedRowCellIndexes.length&&(this.selectionModule.updateAutoFillPosition(),this.selectionModule.drawBorders())}},e.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},e.prototype.reorderColumns=function(t,r){this.reorderModule&&this.reorderModule.reorderColumns(t,r)},e.prototype.reorderColumnByIndex=function(t,r){this.reorderModule&&this.reorderModule.reorderColumnByIndex(t,r)},e.prototype.reorderColumnByTargetIndex=function(t,r){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(t,r)},e.prototype.reorderRows=function(t,r){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(t,r)},e.prototype.refreshDataSource=function(t){this.notify("refreshdataSource",t)},e.prototype.disableRowDD=function(t){var r=this.getHeaderTable(),n=this.getContentTable(),o=r.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),l=t?"none":"";$e(r.querySelector(_e).childNodes[0],{display:l}),$e(n.querySelector(_e).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var p=a[parseInt(h.toString(),10)].firstElementChild;t?T([p],"e-hide"):E([p],["e-hide"])}for(var d=0;d<r.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;d++){var p=o[parseInt(d.toString(),10)];t?T([p],"e-hide"):E([p],["e-hide"])}},e.prototype.autoFitColumns=function(t,r,n){var o=this.getInjectedModules(),a=o.find(function(l){return typeof l=="function"&&!c(l.prototype)?l.prototype.getModuleName()==="resize":l.name==="Resize"});!this.resizeModule&&a&&(this.autoFitColumnsResize=!0,this.injectModules()),this.resizeModule&&this.resizeModule.autoFitColumns(t,r,n)},e.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){for(var t=this.getColumns(),r=this.getHeaderTable(),n=0,o=0;o<t.length;o++)if(t[parseInt(o.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(t[parseInt(o.toString(),10)].field)>-1){var a=[].slice.call(r.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));if(a[parseInt(o.toString(),10)].style.display==="none")continue}if(t[parseInt(o.toString(),10)].width)n+=parseFloat(t[parseInt(o.toString(),10)].width.toString());else{n=0;break}}if(n){var l=this.isPercentageWidthGrid(),h=this.widthUnit(l),p=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var d=this.defaultIndentWidth(l),u=d.toString()+h,f=[].slice.call(r.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),g=[].slice.call(p.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),o=0;o<f.length;o++)f[parseInt(o.toString(),10)].style.setProperty("width",u),g[parseInt(o.toString(),10)].style.setProperty("width",u),n+=d;(l&&n<100||!l&&n<p.parentElement.clientWidth)&&(c(p.querySelector(".e-emptyrow"))?T([r,p],["e-tableborder"]):(T([r],["e-tableborder"]),E([p],["e-tableborder"])));var m=n.toString()+h;r.style.setProperty("width",m),p.style.setProperty("width",m)}else this.restoreAdjustColumns()}},e.prototype.restoreAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){var t=this.getHeaderTable(),r=this.getContentTable();if(E([t,r],["e-tableborder"]),t.style.removeProperty("width"),r.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var n=this.isPercentageWidthGrid(),o=this.defaultIndentWidth(n).toString()+this.widthUnit(n),a=[].slice.call(t.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));a.forEach(function(l){l.style.setProperty("width",o)}),t.querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.recalcIndentWidth()}}},e.prototype.widthUnit=function(t){return t?"%":"px"},e.prototype.defaultIndentWidth=function(t){return t?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},e.prototype.isPercentageWidthGrid=function(){var t=this.getColumns().find(function(r){return!c(r.width)});return t?t.width.toString().indexOf("%")>-1:!1},e.prototype.createColumnchooser=function(t,r,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(t,r,n)},e.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Pn(this)),this.serviceLocator.register("cellRendererFactory",new Lh),this.serviceLocator.register("rendererFactory",new Bh),this.serviceLocator.register("localization",this.localeObj=new Rn(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new xi(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new jh(this)),this.serviceLocator.register("ariaService",this.ariaService=new Ro),this.serviceLocator.register("focus",this.focusModule=new Oh(this))},e.prototype.processModel=function(){var t=this.groupSettings.columns,r=this.sortSettings.columns,n,o;if(this.allowGrouping)for(var a=function(u,f){n=!1,o=0;for(var g=r.length;o<g;o++)if(r[parseInt(o.toString(),10)].field===t[parseInt(u.toString(),10)]){n=!0;break}if(n?l.allowSorting?l.sortedColumns.push(r[parseInt(o.toString(),10)].field):r[parseInt(o.toString(),10)].direction="Ascending":r.push({field:t[parseInt(u.toString(),10)],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var m=l.enableColumnVirtualization?l.columns.filter(function(S){return S.field===t[parseInt(u.toString(),10)]})[0]:l.getColumnByField(t[parseInt(u.toString(),10)]);m?m.visible=!1:l.log("initial_action",{moduleName:"group",columnName:t[parseInt(u.toString(),10)]})}},l=this,h=0,p=t.length;h<p;h++)a(h,p);if(!t.length)for(var h=0;h<r.length;h++)this.sortedColumns.push(r[parseInt(h.toString(),10)].field);if(this.rowTemplateFn=te(this.rowTemplate),this.emptyRecordTemplateFn=te(this.emptyRecordTemplate),this.detailTemplateFn=te(this.detailTemplate),this.editTemplateFn=te(this.editSettings.template),this.editHeaderTemplateFn=te(this.editSettings.headerTemplate),this.editFooterTemplateFn=te(this.editSettings.footerTemplate),this.columnChooserTemplateFn=te(this.columnChooserSettings.template),this.columnChooserHeaderTemplateFn=te(this.columnChooserSettings.headerTemplate),this.columnChooserFooterTemplateFn=te(this.columnChooserSettings.footerTemplate),!c(this.parentDetails)){var d=c(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",d,!0)}this.initForeignColumn()},e.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(hl,this.getForeignKeyColumns())},e.prototype.enableVerticalRendering=function(){this.rowRenderingMode==="Vertical"?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},e.prototype.gridRender=function(){var t;this.updateRTL(),this.rowRenderingMode==="Vertical"&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||O.isSafari())&&this.element.classList.add("e-mac-safari"),O.isDevice&&(this.element.classList.add("e-device"),this.adaptiveUIMode==="Desktop"&&(this.enableAdaptiveUI=!1)),this.adaptiveUIMode==="Mobile"&&!(O.isDevice||this.rowRenderingMode==="Vertical")&&(this.enableAdaptiveUI=!1),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?(t=this.element.classList).add.apply(t,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&O.info.name==="mozilla"&&this.element.classList.add("e-disableuserselect"),this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top"),Re(this.element,["e-responsive","e-default"],[]);var r=this.serviceLocator.getService("rendererFactory");this.headerModule=r.getRenderer(ze.Header),this.contentModule=r.getRenderer(ze.Content),this.printModule=new To(this,this.scrollModule),this.clipboardModule=new Jh(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},e.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.height!=="auto"&&this.scrollModule.setPadding()},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.createGridPopUpElement=function(){var t=this.createElement("div",{className:"e-gridpopup"});t.style.display="none";var r=this.createElement("div",{className:ve,attrs:{tabIndex:"-1"}});ui([r,this.createElement("div",{className:"e-uptail e-tail"})],t),r.appendChild(this.createElement("span")),ui([r,this.createElement("div",{className:"e-downtail e-tail"})],t),this.element.appendChild(t)},e.prototype.updateGridLines=function(){switch(Re(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines");break}this.updateResizeLines()},e.prototype.updateResizeLines=function(){this.allowResizing&&!(this.gridLines==="Vertical"||this.gridLines==="Both")?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},e.prototype.applyTextWrap=function(){if(this.allowTextWrap){var t=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":Ee(this.element,!1),Ee(this.getContent(),!1),Ee(t,!0);break;case"Content":Ee(this.getContent(),!0),Ee(this.element,!1),Ee(t,!1);break;default:Ee(this.element,!0),Ee(this.getContent(),!1),Ee(t,!1)}this.textWrapSettings.wrapMode!=="Content"&&this.notify(Wr,{})}},e.prototype.removeTextWrap=function(){Ee(this.element,!1);var t=[].slice.call(this.element.getElementsByClassName("e-columnheader"));Ee(t,!1),Ee(this.getContent(),!1),this.textWrapSettings.wrapMode!=="Content"&&this.notify(Wr,{})},e.prototype.createTooltip=function(){this.toolTipObj=new Fa({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},e.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},e.prototype.getTooltipStatus=function(t){var r=this.getHeaderTable(),n=this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"?"e-gridcontent":"e-gridheader",o=this.createTable(r,n,"header"),a=this.createTable(r,n,"content"),l=t.classList.contains("e-headercell")?o:a,h=t.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=t.className;var p=l.querySelector(h);p.innerHTML="",Array.from(t.childNodes).forEach(function(u){p.appendChild(u.cloneNode(!0))});var d=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(o),document.body.removeChild(a),!!(d>t.getBoundingClientRect().width&&!t.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"&&d>t.getBoundingClientRect().width*.55-(this.height!=="auto"?16:0))},e.prototype.mouseMoveHandler=function(t){if(this.isEllipsisTooltip()){var r=b(t.target,"e-ellipsistooltip");t.type==="mouseout"&&(this.prevElement!==r||r!==b(t.relatedTarget,"e-ellipsistooltip"))&&(this.toolTipObj.close(),this.prevElement=null);var n=t.target.tagName,o=["A","BUTTON","INPUT"];if(r&&t.type!=="mouseout"&&!(O.isDevice&&o.indexOf(n)!==-1)&&this.getTooltipStatus(r)){var a=this.getColumns()[parseInt(r.getAttribute(ne),10)-1],l=a&&a.disableHtmlEncode?"innerText":"innerHTML",h=this.createElement("div");if(r.getElementsByClassName("e-headertext").length){var p=r.getElementsByClassName("e-headertext")[0];h[""+l]=this.sanitize(p.innerText),this.toolTipObj.content=h}else h[""+l]=this.sanitize(r.innerText),this.toolTipObj.content=h;this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),a&&a.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),r!==this.prevElement&&this.toolTipObj.open(r),this.prevElement=r}}},e.prototype.isEllipsisTooltip=function(){var t=this.getColumns();if(this.clipMode==="EllipsisWithTooltip")return!0;for(var r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)].clipMode==="EllipsisWithTooltip")return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},e.prototype.createTable=function(t,r,n){var o=this.createElement("div");o.className=this.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=r;var l=this.createElement("table");l.className=t.className,l.style.cssText="table-layout: auto;width: auto";var h=n==="header"?"th":"td",p=this.createElement("tr",{attrs:{role:"row"}}),d=this.createElement(h);return p.appendChild(d),l.appendChild(p),a.appendChild(l),o.appendChild(a),document.body.appendChild(o),o},e.prototype.onKeyPressed=function(t){(t.action==="tab"||t.action==="shiftTab")&&this.toolTipObj.close()},e.prototype.wireEvents=function(){I.add(this.element,"click",this.mouseClickHandler,this),I.add(this.element,"touchend",this.mouseClickHandler,this),I.add(this.element,"focusout",this.focusOutHandler,this),I.add(this.element,"dblclick",this.dblClickHandler,this),I.add(this.element,"keydown",this.keyPressHandler,this),I.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex),this.keyboardModule=new _o(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),I.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),I.add(this.element,"mouseover",this.mouseMoveHandler,this),I.add(this.element,"mouseout",this.mouseMoveHandler,this),I.add(this.getContent(),"touchstart",this.tapEvent,this),I.add(document.body,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){I.remove(this.element,"click",this.mouseClickHandler),I.remove(this.element,"touchend",this.mouseClickHandler),I.remove(this.element,"focusout",this.focusOutHandler),I.remove(this.element,"dblclick",this.dblClickHandler),I.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),I.remove(this.element,"mouseover",this.mouseMoveHandler),I.remove(this.element,"mouseout",this.mouseMoveHandler),I.remove(this.element,"keydown",this.keyPressHandler),I.remove(this.getContent(),"touchstart",this.tapEvent),I.remove(document.body,"keydown",this.keyDownHandler),I.remove(window,"resize",this.resetIndentWidth)},e.prototype.addListener=function(){this.isDestroyed||(this.on(Si,this.dataReady,this),this.on(pe,this.recalcIndentWidth,this),this.on(mt,this.recalcIndentWidth,this),this.on(sr,this.refreshFrozenPosition,this),this.on(gn,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(xt,this.dataBoundFunction),this.on(Yt,this.onKeyPressed,this))},e.prototype.removeListener=function(){this.isDestroyed||(this.off(Si,this.dataReady),this.off(pe,this.recalcIndentWidth),this.off(mt,this.recalcIndentWidth),this.on(sr,this.refreshFrozenPosition,this),this.on(gn,this.refreshSplitFrozenColumn,this),this.removeEventListener(xt,this.dataBoundFunction),this.off(Yt,this.onKeyPressed))},e.prototype.getCurrentViewRecords=function(){return nt(this)?c(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},e.prototype.mouseClickHandler=function(t){if(!(this.isChildGrid(t)||b(t.target,"e-gridpopup")&&t.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(t))&&!((!this.allowRowDragAndDrop&&(b(t.target,vt)||t.target.tagName==="TD")||b(t.target,"e-headercell")&&b(t.target,"e-headercell").querySelector(".e-checkselectall")||!(this.allowGrouping||this.allowReordering)&&b(t.target,"e-gridheader"))&&t.touches)){b(t.target,"e-gridheader")&&this.allowRowDragAndDrop&&!b(t.target,"e-filterbarcell")&&t.target&&["A","BUTTON","INPUT"].indexOf(t.target.tagName)===-1&&t.preventDefault();var r=this.getRowInfo(t.target),n="cancel";r[""+n]=!1;var o=!1,a=M(t.target,"tr");if(a&&a.getAttribute("data-uid")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid"));o=l?l.isDataRow:!1}o&&this.trigger(qa,r),this.notify(ii,t)}},e.prototype.checkEdit=function(t){var r=b(t.target,Se),n=this.editSettings.mode!=="Batch"&&this.isEdit&&r&&(r.classList.contains(di)||r.classList.contains($t)&&!this.editSettings.showAddNewRow);return!b(t.target,"e-unboundcelldiv")&&(n||b(t.target,U)&&b(t.target,U).classList.contains("e-editedbatchcell"))},e.prototype.dblClickHandler=function(t){var r=b(t.target,"e-grid");if(!(c(r)||r.id!==this.element.id||M(t.target,".e-unboundcelldiv"))){var n=!1,o=M(t.target,"tr");if(o&&o.getAttribute("data-uid")){var a=this.getRowObjectFromUID(o.getAttribute("data-uid"));n=a?a.isDataRow:!1}var l=this.getRowInfo(t.target);l.target=t.target,n&&this.trigger(Oa,l),this.notify(tl,t)}},e.prototype.focusOutHandler=function(t){if(!this.isChildGrid(t)){b(t.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var r=this.element.querySelector(".e-cancel:not(.e-hide)");r&&!r.parentElement.classList.contains("e-tbar-btn")&&r.classList.add("e-hide");var n=t.relatedTarget,o=n?n.getAttribute("aria-owns"):null;(!n||!b(n,"e-grid")&&(!c(o)&&o)!==t.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!O.isDevice&&(this.editSettings.mode==="Batch"&&!((b(n,"e-ddl")||b(n,"e-ddt"))&&(b(n,"e-multi-select-list-wrapper")||b(n,"e-input-filter"))&&b(n,"e-input-group"))&&(b(n,"e-uploader")||!(n&&c(b(n,"e-input-group")))&&!b(t.target,"edit-custom-template"))&&(this.editModule.saveCell(),this.notify(cl,{})),this.editSettings.mode==="Normal"&&!this.isWidgetsDestroyed&&this.editModule.editFormValidate()),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1}},e.prototype.isChildGrid=function(t){var r=b(t.target,"e-grid");return!!(r&&r.id!==this.element.id||b(t.target,"e-unboundcelldiv")&&c(r))},e.prototype.mergePersistGridData=function(t){var r=this.getLocalData();if(!(c(r)||r==="")||!c(t)){var n=c(t)?JSON.parse(r):t,o=Object.keys(n);this.isProtectedOnChange=!0;for(var a=0,l=o;a<l.length;a++){var h=l[a];typeof this[""+h]=="object"&&!c(this[""+h])?Array.isArray(this[""+h])&&h==="columns"?(this.setFrozenCount(),Yi(this[""+h]),this.mergeColumns(n[""+h],this[""+h]),this.mergedColumns=!0,this[""+h]=n[""+h]):W(this[""+h],n[""+h]):this[""+h]=n[""+h]}this.isProtectedOnChange=!1}},e.prototype.mergeColumns=function(t,r){for(var n=t,o=this.isFrozenGrid(),a=function(p){var d=r.filter(function(u){return o?u.index===n[parseInt(p.toString(),10)][""+_s]:u.index===n[parseInt(p.toString(),10)].index})[0];c(d)||(o&&(d=W({},d,{},!0),d.freeze=n[parseInt(p.toString(),10)].freeze),d.columns&&d.columns.length?(l.mergeColumns(n[parseInt(p.toString(),10)].columns,d.columns),n[parseInt(p.toString(),10)]=W(d,n[parseInt(p.toString(),10)],{},!0)):n[parseInt(p.toString(),10)]=W(d,n[parseInt(p.toString(),10)],{},!0))},l=this,h=0;h<n.length;h++)a(h)},e.prototype.isDetail=function(){return!c(this.detailTemplate)||!c(this.childGrid)},e.prototype.isCommandColumn=function(t){var r=this;return t.some(function(n){return n.columns?r.isCommandColumn(n.columns):!!(n.commands||n.commandsTemplate)})},e.prototype.isForeignKeyEnabled=function(t){var r=this;return t.some(function(n){return n.columns?r.isForeignKeyEnabled(n.columns):!!(n.dataSource&&n.foreignKeyValue)})},e.prototype.keyPressHandler=function(t){var r=W(t,{cancel:!1});this.trigger("keyPressed",r),(r.cancel===!0||this.isEdit&&t&&b(t.target,"e-gridform")&&b(t.target,"e-ddl")&&t.action==="open"&&t.altKey===!0&&t.code==="ArrowDown")&&t.stopImmediatePropagation()},e.prototype.keyDownHandler=function(t){if(t.altKey){if(t.keyCode===74&&(this.keyA?(this.notify(qs,{target:t.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(E([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),t.keyCode===87){var r=this.focusModule;if(r){if(!this.currentViewData.length)return;r.focusContent(),r.addOutline()}}t.keyCode===65&&(this.keyA=!0),t.keyCode===72&&this.keyA&&(this.notify(qs,{target:t.target,collapse:!0}),this.keyA=!1)}t.keyCode===13&&this.notify(Qi,t)},e.prototype.keyActionHandler=function(t){this.isChildGrid(t)||this.editModule&&(this.editModule.alertDObj&&this.editModule.alertDObj.visible||this.editModule.dialogObj&&this.editModule.dialogObj.visible)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(di))&&t.action!=="escape"&&t.action!=="enter"&&t.action!=="shiftEnter"&&t.action!=="tab"&&t.action!=="shiftTab"||(this.keyPress=!0,this.allowKeyboard&&(t.action==="ctrlPlusP"&&(t.preventDefault(),this.print()),this.notify(Yt,t)))},e.prototype.setInjectedModules=function(t){this.injectedModules=t},e.prototype.updateColumnObject=function(){lr(this.columns,this.enableColumnVirtualization,this),Yi(this.columns),this.initForeignColumn(),this.notify(Ci,{})},e.prototype.refreshFrozenPosition=function(t){t&&t.isModeChg?(this.refreshColumns(),this.notify(rh,{})):this.refreshColumns()},e.prototype.getForeignKeyColumns=function(){var t=this.enableColumnVirtualization?this.columns:this.getColumns();return t.filter(function(r){return r.isForeignColumn()})},e.prototype.getRowHeight=function(t){return this.rowHeight?this.rowHeight:Ip(this.element,t)},e.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var t=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+me).scrollLeft=t,this.getContent().querySelector("."+ve).scrollLeft=t}},e.prototype.excelExport=function(t,r,n,o){if(this.exportGrids&&this.exportGrids.length){var a=this.exportGrids.slice();return this.exportMultipleExcelGrids(a,t,r,n,o)}else return this.excelExportModule?this.excelExportModule.Map(this,t,r,n,!1,o):null},e.prototype.csvExport=function(t,r,n,o){return this.excelExportModule?this.excelExportModule.Map(this,t,r,n,!0,o):null},e.prototype.pdfExport=function(t,r,n,o){if(this.exportGrids&&this.exportGrids.length){var a=this.exportGrids.slice();return this.exportMultiplePdfGrids(a,t,r,n,o)}else return this.pdfExportModule?this.pdfExportModule.Map(this,t,r,n,o):null},e.prototype.exportMultiplePdfGrids=function(t,r,n,o,a){var l=this;if(t.length!==0){var h=t.shift(),p=document.getElementById(h).ej2_instances[0],d=p.pdfExportModule?p.pdfExportModule.Map(p,r,n,o,a):Promise.resolve();return d.then(function(u){return n=t.length!==1,l.exportMultiplePdfGrids(t,r,n,u,a)})}return null},e.prototype.exportMultipleExcelGrids=function(t,r,n,o,a){var l=this;if(t.length!==0){var h=t.shift(),p=document.getElementById(h).ej2_instances[0],d=p.excelExportModule?p.excelExportModule.Map(p,r,n,o,!1,a):null;return d.then(function(u){return n=t.length!==1,l.exportMultipleExcelGrids(t,r,n,u,a)})}return null},e.prototype.groupColumn=function(t){this.groupModule&&this.groupModule.groupColumn(t)},e.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},e.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},e.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},e.prototype.ungroupColumn=function(t){this.groupModule&&this.groupModule.ungroupColumn(t)},e.prototype.openColumnChooser=function(t,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(t,r)},e.prototype.scrollRefresh=function(){var t=this,r=function(){t.scrollModule.refresh(),t.off(pe,r)};this.on(pe,r,this)},e.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},e.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},e.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},e.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},e.prototype.selectCells=function(t){this.selectionModule&&this.selectionModule.selectCells(t)},e.prototype.selectRowsByRange=function(t,r){this.selectionModule&&this.selectionModule.selectRowsByRange(t,r)},e.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},e.prototype.ensureModuleInjected=function(t){return this.getInjectedModules().indexOf(t)>=0},e.prototype.destroyTemplate=function(t,r){this.clearTemplate(t,r)},e.prototype.log=function(t,r){var n=this.getInjectedModules(),o=n.find(function(a){return a.name==="Logger"});o||(i.Inject(Zh),this.enableLogger=!0,this.injectModules()),this.loggerModule&&this.loggerModule.log(t,r)},e.prototype.applyBiggerTheme=function(t){this.element.classList.contains("e-bigger")&&t.classList.add("e-bigger")},e.prototype.getPreviousRowData=function(){var t=this.getRowsObject()[this.getRows().length-1].data;return t},e.prototype.hideScroll=function(){var t=this.getContent().querySelector("."+ve);t.scrollHeight<=t.clientHeight&&(this.scrollModule.removePadding(),t.style.overflowY="auto")},e.prototype.getRowIndexByPrimaryKey=function(t){var r=this.getPrimaryKeyFieldNames()[0];t=typeof t=="object"?t[""+r]:t;for(var n=this.getRowsObject(),o=0;o<n.length;o++)if(!(n[parseInt(o.toString(),10)].isDetailRow||n[parseInt(o.toString(),10)].isCaptionRow)){var a=n[parseInt(o.toString(),10)].data[""+r];if(r.split(".").length>1&&(a=Gp(r,n[parseInt(o.toString(),10)].data)),a===t)return n[parseInt(o.toString(),10)].index}return-1},e.prototype.grabColumnByFieldFromAllCols=function(t,r){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var o=this.columnModel,a=0;a<o.length;a++)if(!r&&t===o[parseInt(a.toString(),10)].field||r&&o[parseInt(a.toString(),10)].isForeignColumn()&&t===o[parseInt(a.toString(),10)].foreignKeyValue){n=o[parseInt(a.toString(),10)];break}return n},e.prototype.grabColumnByUidFromAllCols=function(t){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,o=0;o<n.length;o++)t===n[parseInt(o.toString(),10)].uid&&(r=n[parseInt(o.toString(),10)]);return r},e.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var t=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof _?this.renderModule.data.getData(this.dataSource,t):this.dataSource instanceof _?this.dataSource.executeLocal(t):new _(this.dataSource,t).executeLocal(t)}return[]},e.prototype.getUserAgent=function(){var t=O.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(t)},e.prototype.tapEvent=function(t){this.getUserAgent()&&(Ze.timer?(clearTimeout(Ze.timer),Ze.timer=null,this.dblClickHandler(t),this.notify(ol,t)):Ze.timer=setTimeout(function(){Ze.timer=null},300))},e.prototype.getRowUid=function(t){return""+t+this.rowUid++},e.prototype.getRowElementByUID=function(t){var r,n=[],o=[].slice.call(this.getContent().querySelector(j).children);this.frozenRows?(n=[].slice.call(this.getHeaderContent().querySelector(j).children),n=n.concat(o)):n=o;for(var a=0,l=n;a<l.length;a++){var h=l[a];if(h.getAttribute("data-uid")===t){r=h;break}}return r},e.prototype.getHiddenColumns=function(){for(var t=[],r=0,n=this.columnModel;r<n.length;r++){var o=n[r];o.visible===!1&&t.push(o)}return t},e.prototype.calculatePageSizeByParentHeight=function(t){if(this.allowPaging&&(this.allowTextWrap&&this.textWrapSettings.wrapMode==="Header"||!this.allowTextWrap)){var r=0;t.indexOf("%")!==-1&&(t=parseInt(t,10)/100*this.element.clientHeight);var n=this.getNoncontentHeight()+this.getRowHeight();if(t>n){var o=0;o=t-this.getNoncontentHeight(),r=o/this.getRowHeight()}if(r>0)return Math.floor(r)}return 0},e.prototype.getNoncontentHeight=function(){var t=0;if(this.getHeaderContent()&&!c(this.getHeaderContent().clientHeight)&&(t+=this.getHeaderContent().clientHeight),this.toolbar&&!c(this.element.querySelector(".e-toolbar").clientHeight)&&(t+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!c(this.element.querySelector(".e-gridpager").clientHeight)&&(t+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!c(this.element.querySelector(".e-columnheader").clientHeight)&&(t+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!c(this.element.querySelector(".e-groupdroparea").clientHeight)&&(t+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!c(this.element.querySelector(".e-summaryrow").clientHeight))for(var r=0;r<this.element.getElementsByClassName("e-summaryrow").length;r++)t+=this.element.getElementsByClassName("e-summaryrow")[parseInt(r.toString(),10)].clientHeight;return t},e.prototype.getSummaryValues=function(t,r){return fe.aggregates[t.type.toLowerCase()](r,t.field)},e.prototype.serverExcelExport=function(t,r){this.isExcel=!0,this.exportGrid(t,r)},e.prototype.serverPdfExport=function(t,r){this.isExcel=!1,this.exportGrid(t,r)},e.prototype.serverCsvExport=function(t,r){this.isExcel=!0,this.exportGrid(t,r)},e.prototype.exportGrid=function(t,r){var n=this,o=this,a=o.getDataModule().generateQuery(!0),l=new gi().processQuery(new _({url:""}),a),h=JSON.parse(l.data),p=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),d=["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"];p.filterSettings.columns=h.where,p.searchSettings.fields=h.search&&h.search[0].fields||[],p.sortSettings.columns=h.sorted,p.columns=this.setHeaderText(p.columns,d);var u=this.createElement("form",{id:"ExportForm"});u.style.display="none";var f=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});f.value=JSON.stringify(p),u.method="POST",u.action=t,u.appendChild(f),r&&r.headers&&Array.isArray(r.headers)&&r.headers.forEach(function(g){Object.keys(g).forEach(function(m){var S=typeof g[""+m]=="string"?g[""+m]:JSON.stringify(g[""+m]),y=n.createElement("input",{attrs:{name:m,value:S,type:"hidden"}});u.appendChild(y)})}),document.body.appendChild(u),u.submit(),u.remove()},e.prototype.setHeaderText=function(t,r){for(var n=0;n<t.length;n++){var o=this.getColumnByUid(t[parseInt(n.toString(),10)].uid);t[parseInt(n.toString(),10)].headerText=o.headerText,c(o.template)||(t[parseInt(n.toString(),10)].template="true"),t[parseInt(n.toString(),10)].format&&(t[parseInt(n.toString(),10)].format=Np(this.getFormat(t[parseInt(n.toString(),10)].format),t[parseInt(n.toString(),10)].type,!1,Wo),(o.type==="datetime"||o.type==="date"||o.type==="time")&&(t[parseInt(n.toString(),10)].format=t[parseInt(n.toString(),10)].format.toString().replace("AM/PM","tt"))),t[parseInt(n.toString(),10)].columns&&this.setHeaderText(t[parseInt(n.toString(),10)].columns,r);for(var a=Object.keys(t[parseInt(n.toString(),10)]),l=0;l<a.length;l++)r.indexOf(a[parseInt(l.toString(),10)])<0&&delete t[parseInt(n.toString(),10)][a[parseInt(l.toString(),10)]]}return t},e.prototype.getFormat=function(t){return typeof t=="object"?c(t.format)?t.skeleton:t.format:t},e.prototype.isCollapseStateEnabled=function(){var t="isExpanded";return this[""+t]===!1},e.prototype.updateRowValue=function(t,r){var n={requestType:"save",data:r};this.showSpinner(),this.notify(hn,n),this.refresh()},e.prototype.setForeignKeyData=function(){this.dataBind();var t=this.getDataModule().getForeignKeyDataState();t.isPending?(this.getDataModule().setForeignKeyDataState({}),t.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},e.prototype.resetFilterDlgPosition=function(t){var r=this.getColumnHeaderByField(t);if(r){var n=r.querySelector(".e-filtermenudiv"),o=this.element.querySelector(".e-filter-popup");if(n){var a=this.element.getBoundingClientRect(),l=n.getBoundingClientRect();o&&(o.offsetWidth+l.right>a.right?o.style.left=(l.right-o.offsetWidth-a.left).toString()+"px":o.style.left=(l.right-a.left).toString()+"px")}}},e.prototype.renderTemplates=function(t){var r=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact,n=this.printGridParent&&this.printGridParent.isReact;if((r||n)&&this.portals){var o=n?this.printGridParent:this.parentDetails.parentInstObj;o.portals=o.portals.concat(this.portals),o.renderTemplates(t),this.portals=void 0}else{var a="portals";this.notify("reactTemplateRender",this[""+a]),this.renderReactTemplates(t)}},e.prototype.batchUpdate=function(t){this.processRowChanges(t)},e.prototype.batchAsyncUpdate=function(t){this.processBulkRowChanges(t)},e.prototype.processBulkRowChanges=function(t){var r=this;if(!this.dataToBeUpdated)this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},t),setTimeout(function(){r.processRowChanges(r.dataToBeUpdated),r.dataToBeUpdated=null},this.asyncTimeOut);else for(var n=[or,ah,bo],o=this.getPrimaryKeyFieldNames()[0],a=0;a<n.length;a++)t[n[parseInt(a.toString(),10)]]&&Pp(this,t,n[parseInt(a.toString(),10)],o)},e.prototype.processRowChanges=function(t){var r=this,n=this.getPrimaryKeyFieldNames()[0];t=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},t);var o=this.getDataModule().saveChanges(t,n,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?o.then(function(){r.setNewData()}):this.setNewData()},e.prototype.setNewData=function(){var t=this,r=JSON.parse(JSON.stringify(this.getCurrentViewRecords())),n=this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount());n.then(function(o){t.bulkRefresh(o.result,r,o.count)})},e.prototype.deleteRowElement=function(t){var r=this.getRowElementByUID(t.uid);q(r)},e.prototype.bulkRefresh=function(t,r,n){for(var o=this,a=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(S){t.filter(function(y){return y[""+l]===a[parseInt(S.toString(),10)].data[""+l]}).length||(p.deleteRowElement(a[parseInt(S.toString(),10)]),a.splice(S,1),S--),d=S},p=this,d,u=0;u<a.length;u++)h(u),u=d;for(var f=function(S){var y;r.filter(function(R){R[""+l]===t[parseInt(S.toString(),10)][""+l]&&(R!==t[parseInt(S.toString(),10)]&&o.setRowData(t[parseInt(S.toString(),10)][""+l],t[parseInt(S.toString(),10)]),y=!0)}),y||g.renderRowElement(t[parseInt(S.toString(),10)],S)},g=this,u=0;u<t.length;u++)f(u);this.currentViewData=t;var m=[].slice.call(this.getContentTable().getElementsByClassName(Se));zp(this,this.getRowsObject(),m),Bp(this),this.allowPaging&&this.notify(Ne,{module:"pager",properties:{totalRecordsCount:n}})},e.prototype.renderRowElement=function(t,r){var n=new wi(this.serviceLocator,null,this),o=new cr(this),a=o.generateRows([t]),l=n.render(a[0],this.getColumns());this.addRowObject(a[0],r);var h=this.getContentTable().querySelector(j);if(h.querySelector(".e-emptyrow")){var p=h.querySelector(".e-emptyrow");p.parentNode.removeChild(p),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.frozenRows&&r<this.frozenRows?h=this.getHeaderContent().querySelector(j):h=this.getContent().querySelector(j),h=this.getContent().querySelector(j),h.appendChild(l)},e.prototype.addRowObject=function(t,r){this.getRowsObject().splice(r,1,t)},e.prototype.updateVisibleExpandCollapseRows=function(){for(var t=this.getRowsObject(),r=0,n=t.length;r<n;r++)(t[parseInt(r.toString(),10)].isDataRow||t[parseInt(r.toString(),10)].isAggregateRow)&&this.getRowElementByUID(t[parseInt(r.toString(),10)].uid)&&this.getRowElementByUID(t[parseInt(r.toString(),10)].uid).style.display==="none"?t[parseInt(r.toString(),10)].visible=!1:t[parseInt(r.toString(),10)].visible=!0},e.prototype.sanitize=function(t){return this.enableHtmlSanitizer?ei.sanitize(t):t},e.prototype.getHeight=function(t){return!Number.isInteger(t)&&t.indexOf("%")!==-1?t=parseInt(t,10)/100*this.element.clientHeight:!Number.isInteger(t)&&this.height!=="auto"?t=parseInt(t,10):t=this.height,t},e.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},e.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},e.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(j)},e.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(j)},e.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(j)},e.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(j)},e.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(j)},e.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(j)},e.prototype.showResponsiveCustomFilter=function(t){this.filterModule&&this.filterModule.showCustomFilter(t||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomSort=function(t){this.sortModule&&this.sortModule.showCustomSort(t||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomColumnChooser=function(t){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(t||this.rowRenderingMode==="Vertical")},e.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},e.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},e.prototype.getCurrentVisibleColumns=function(t){for(var r=[],n=t?this.getColumns():this.columnModel,o=0,a=n;o<a.length;o++){var l=a[o];l.visible&&r.push(l)}return r},e.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)};var i;return v([C([])],e.prototype,"currentViewData",void 0),v([C()],e.prototype,"parentDetails",void 0),v([C()],e.prototype,"showHider",void 0),v([C([])],e.prototype,"columns",void 0),v([C(!0)],e.prototype,"enableAltRow",void 0),v([C(!0)],e.prototype,"enableHover",void 0),v([C(!1)],e.prototype,"enableAutoFill",void 0),v([C(!0)],e.prototype,"allowKeyboard",void 0),v([C(!1)],e.prototype,"enableStickyHeader",void 0),v([C(!1)],e.prototype,"enableHtmlSanitizer",void 0),v([C(!1)],e.prototype,"allowTextWrap",void 0),v([ye({},pp)],e.prototype,"textWrapSettings",void 0),v([ye({},cp)],e.prototype,"resizeSettings",void 0),v([C(!1)],e.prototype,"allowPaging",void 0),v([ye({},Gh)],e.prototype,"pageSettings",void 0),v([ye({},fp)],e.prototype,"loadingIndicator",void 0),v([C(!0)],e.prototype,"enableVirtualMaskRow",void 0),v([C(!1)],e.prototype,"enableVirtualization",void 0),v([C(!1)],e.prototype,"enableColumnVirtualization",void 0),v([C(!1)],e.prototype,"enableInfiniteScrolling",void 0),v([ye({},lp)],e.prototype,"searchSettings",void 0),v([C(!1)],e.prototype,"allowSorting",void 0),v([C("Ellipsis")],e.prototype,"clipMode",void 0),v([C(!0)],e.prototype,"allowMultiSorting",void 0),v([C(!1)],e.prototype,"allowExcelExport",void 0),v([C(!1)],e.prototype,"allowPdfExport",void 0),v([ye({},rp)],e.prototype,"sortSettings",void 0),v([ye({},sp)],e.prototype,"infiniteScrollSettings",void 0),v([C(!0)],e.prototype,"allowSelection",void 0),v([C(-1)],e.prototype,"selectedRowIndex",void 0),v([ye({},ap)],e.prototype,"selectionSettings",void 0),v([C(!1)],e.prototype,"allowFiltering",void 0),v([C("Horizontal")],e.prototype,"rowRenderingMode",void 0),v([C(!1)],e.prototype,"enableAdaptiveUI",void 0),v([C("Both")],e.prototype,"adaptiveUIMode",void 0),v([C(!1)],e.prototype,"allowReordering",void 0),v([C(!1)],e.prototype,"allowResizing",void 0),v([C(!1)],e.prototype,"allowRowDragAndDrop",void 0),v([ye({},hp)],e.prototype,"rowDropSettings",void 0),v([ye({},op)],e.prototype,"filterSettings",void 0),v([C(!1)],e.prototype,"allowGrouping",void 0),v([C(!1)],e.prototype,"enableImmutableMode",void 0),v([C(!1)],e.prototype,"showColumnMenu",void 0),v([C(!1)],e.prototype,"autoFit",void 0),v([ye({},dp)],e.prototype,"groupSettings",void 0),v([ye({},up)],e.prototype,"editSettings",void 0),v([Ii([],Yh)],e.prototype,"aggregates",void 0),v([C(!1)],e.prototype,"showColumnChooser",void 0),v([ye({},Wh)],e.prototype,"columnChooserSettings",void 0),v([C(!1)],e.prototype,"enableHeaderFocus",void 0),v([C("auto")],e.prototype,"height",void 0),v([C("auto")],e.prototype,"width",void 0),v([C("Default")],e.prototype,"gridLines",void 0),v([C()],e.prototype,"rowTemplate",void 0),v([C()],e.prototype,"emptyRecordTemplate",void 0),v([C()],e.prototype,"detailTemplate",void 0),v([C()],e.prototype,"childGrid",void 0),v([C()],e.prototype,"queryString",void 0),v([C("AllPages")],e.prototype,"printMode",void 0),v([C("Expanded")],e.prototype,"hierarchyPrintMode",void 0),v([C([])],e.prototype,"dataSource",void 0),v([C(null)],e.prototype,"rowHeight",void 0),v([C()],e.prototype,"query",void 0),v([C("USD")],e.prototype,"currencyCode",void 0),v([C()],e.prototype,"exportGrids",void 0),v([C()],e.prototype,"toolbar",void 0),v([C()],e.prototype,"contextMenuItems",void 0),v([C()],e.prototype,"columnMenuItems",void 0),v([C()],e.prototype,"toolbarTemplate",void 0),v([C()],e.prototype,"pagerTemplate",void 0),v([C(0)],e.prototype,"frozenRows",void 0),v([C(0)],e.prototype,"frozenColumns",void 0),v([C("")],e.prototype,"cssClass",void 0),v([C("All")],e.prototype,"columnQueryMode",void 0),v([C({})],e.prototype,"currentAction",void 0),v([C("")],e.prototype,"ej2StatePersistenceVersion",void 0),v([x()],e.prototype,"created",void 0),v([x()],e.prototype,"destroyed",void 0),v([x()],e.prototype,"load",void 0),v([x()],e.prototype,"rowDataBound",void 0),v([x()],e.prototype,"queryCellInfo",void 0),v([x()],e.prototype,"headerCellInfo",void 0),v([x()],e.prototype,"actionBegin",void 0),v([x()],e.prototype,"actionComplete",void 0),v([x()],e.prototype,"actionFailure",void 0),v([x()],e.prototype,"dataBound",void 0),v([x()],e.prototype,"recordDoubleClick",void 0),v([x()],e.prototype,"recordClick",void 0),v([x()],e.prototype,"rowSelecting",void 0),v([x()],e.prototype,"rowSelected",void 0),v([x()],e.prototype,"rowDeselecting",void 0),v([x()],e.prototype,"rowDeselected",void 0),v([x()],e.prototype,"cellSelecting",void 0),v([x()],e.prototype,"cellSelected",void 0),v([x()],e.prototype,"cellDeselecting",void 0),v([x()],e.prototype,"cellDeselected",void 0),v([x()],e.prototype,"columnSelecting",void 0),v([x()],e.prototype,"columnSelected",void 0),v([x()],e.prototype,"columnDeselecting",void 0),v([x()],e.prototype,"columnDeselected",void 0),v([x()],e.prototype,"columnDragStart",void 0),v([x()],e.prototype,"columnDrag",void 0),v([x()],e.prototype,"columnDrop",void 0),v([x()],e.prototype,"printComplete",void 0),v([x()],e.prototype,"beforePrint",void 0),v([x()],e.prototype,"pdfQueryCellInfo",void 0),v([x()],e.prototype,"pdfHeaderQueryCellInfo",void 0),v([x()],e.prototype,"pdfAggregateQueryCellInfo",void 0),v([x()],e.prototype,"excelAggregateQueryCellInfo",void 0),v([x()],e.prototype,"exportDetailDataBound",void 0),v([x()],e.prototype,"exportDetailTemplate",void 0),v([x()],e.prototype,"excelQueryCellInfo",void 0),v([x()],e.prototype,"excelHeaderQueryCellInfo",void 0),v([x()],e.prototype,"beforeExcelExport",void 0),v([x()],e.prototype,"excelExportComplete",void 0),v([x()],e.prototype,"beforePdfExport",void 0),v([x()],e.prototype,"pdfExportComplete",void 0),v([x()],e.prototype,"rowDragStartHelper",void 0),v([x()],e.prototype,"detailDataBound",void 0),v([x()],e.prototype,"rowDragStart",void 0),v([x()],e.prototype,"rowDrag",void 0),v([x()],e.prototype,"rowDrop",void 0),v([x()],e.prototype,"toolbarClick",void 0),v([x()],e.prototype,"beforeOpenColumnChooser",void 0),v([x()],e.prototype,"beforeOpenAdaptiveDialog",void 0),v([x()],e.prototype,"batchAdd",void 0),v([x()],e.prototype,"batchDelete",void 0),v([x()],e.prototype,"batchCancel",void 0),v([x()],e.prototype,"beforeBatchAdd",void 0),v([x()],e.prototype,"beforeBatchDelete",void 0),v([x()],e.prototype,"beforeBatchSave",void 0),v([x()],e.prototype,"beginEdit",void 0),v([x()],e.prototype,"commandClick",void 0),v([x()],e.prototype,"cellEdit",void 0),v([x()],e.prototype,"cellSave",void 0),v([x()],e.prototype,"cellSaved",void 0),v([x()],e.prototype,"resizeStart",void 0),v([x()],e.prototype,"resizing",void 0),v([x()],e.prototype,"resizeStop",void 0),v([x()],e.prototype,"keyPressed",void 0),v([x()],e.prototype,"beforeDataBound",void 0),v([x()],e.prototype,"contextMenuOpen",void 0),v([x()],e.prototype,"contextMenuClick",void 0),v([x()],e.prototype,"columnMenuOpen",void 0),v([x()],e.prototype,"columnMenuClick",void 0),v([x()],e.prototype,"checkBoxChange",void 0),v([x()],e.prototype,"beforeCopy",void 0),v([x()],e.prototype,"beforePaste",void 0),v([x()],e.prototype,"beforeAutoFill",void 0),v([x()],e.prototype,"columnDataStateChange",void 0),v([x()],e.prototype,"dataStateChange",void 0),v([x()],e.prototype,"dataSourceChanged",void 0),v([x()],e.prototype,"exportGroupCaption",void 0),v([x()],e.prototype,"lazyLoadGroupExpand",void 0),v([x()],e.prototype,"lazyLoadGroupCollapse",void 0),v([x()],e.prototype,"beforeDetailTemplateDetach",void 0),e=i=v([xn],e),e}(pi);function mp(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound","enableHtmlSanitizer"]}var To=function(){function s(e,i){this.isAsyncPrint=!1,this.defered=new rt,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(pe,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(st,this.actionBeginFunction),this.parent.on(ot,this.onEmpty.bind(this)),this.parent.on(Ps,this.hierarchyPrint,this),this.scrollModule=i)}return s.prototype.isContentReady=function(){var e=this;return this.isPrintGrid()&&(this.parent.hierarchyPrintMode==="None"||!this.parent.childGrid)?this.contentReady:function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}},s.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},s.prototype.print=function(){this.renderPrintGrid()},s.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},s.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},s.prototype.renderPrintGrid=function(){var e=this.parent,i=le("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});i.classList.remove("e-gridhover"),document.body.appendChild(i);for(var t=new gp(Lo(e,e.hierarchyPrintMode)),r=0;r<t.columns.length;r++)t.columns[parseInt(r.toString(),10)]=W({},t.columns[parseInt(r.toString(),10)]),!e.getFrozenColumns()&&e.isFrozenGrid()&&(t.columns[parseInt(r.toString(),10)].freeze=void 0);this.parent.isAngular&&(t.viewContainerRef=this.parent.viewContainerRef),t.load=function(){},t.query=e.getQuery().clone(),window.printGridObj=t,t.isPrinting=!0;var n=t.getInjectedModules(),o=e.getInjectedModules();(!n||n.length!==o.length)&&t.setInjectedModules(o),e.notify(ul,{element:i,printgrid:t}),this.parent.log("exporting_begin",this.getModuleName()),t.registeredTemplate=this.parent.registeredTemplate,t.isVue=this.parent.isVue,this.parent.isVue&&(t.vueInstance=this.parent.vueInstance),t.printGridParent=e,t.appendTo(i),e.isVue3||(t.trigger=e.trigger)},s.prototype.contentReady=function(){var e=this;if(this.isPrintGrid()){var i=this.parent;if(this.isAsyncPrint){this.printGrid();return}var t={requestType:"print",element:i.element,selectedRows:i.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:i.hierarchyPrintMode};if(this.isAsyncPrint||i.trigger(ws,t),t.cancel){we(i.element);return}this.isAsyncPrint||(this.parent.printGridParent&&this.parent.printGridParent.isReact?this.parent.printGridParent.renderTemplates(function(){e.printGrid()}):this.printGrid())}},s.prototype.printGrid=function(){var e=this.parent;if(e.height!=="auto"){var i=this.scrollModule.getCssProperties(),t=e.element.querySelector("."+ve),r=e.element.querySelector("."+Ke);t.style.height="auto",t.style.overflowY="auto",r.style[i.padding]="",r.firstElementChild.style[i.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,o=[].slice.call(e.element.getElementsByClassName(ve));n<o.length;n++){var a=o[n];a.style.overflowX="hidden"}for(var l=[].slice.call(e.element.getElementsByClassName("e-spin-show")),h=0,p=[].slice.call(l);h<p.length;h++){var a=p[h];Re(a,["e-spin-hide"],["e-spin-show"])}this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj;var d={element:e.element};e.trigger(Is,d),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())},s.prototype.printGridElement=function(e){Re(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&we(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),c(this.printWind)||(this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=Ko(e.element,this.printWind))},s.prototype.removeColGroup=function(e){var i=e.groupSettings.columns.length,t=e.element,r="#"+e.element.id;if(i){for(var n=Ve(".e-groupcaption",t),o=e.groupSettings.enableLazyLoading?(parseInt(n[0].getAttribute("colspan"),10)-(e.groupSettings.columns.length-1)).toString():n[i-1].getAttribute("colspan"),a=0;a<n.length;a++)n[parseInt(a.toString(),10)].setAttribute("colspan",o);var l=Ve("colgroup"+r+"colgroup",t),h=Ve(".e-content colgroup",t),p=Ve(".e-summarycontent colgroup",t);this.hideColGroup(l,i),this.hideColGroup(h,i),this.hideColGroup(p,i)}},s.prototype.hideColGroup=function(e,i){for(var t=0;t<e.length;t++)for(var r=0;r<i;r++)e[parseInt(t.toString(),10)].children[parseInt(r.toString(),10)].style.display="none"},s.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},s.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(pe,this.contentReady.bind(this)),this.parent.removeEventListener(st,this.actionBeginFunction),this.parent.off(ot,this.onEmpty.bind(this)),this.parent.off(Ps,this.hierarchyPrint))},s.prototype.getModuleName=function(){return"print"},s.printGridProp=mp().concat([ws,Is,Zr]),s}();function vp(s,e){return s.prototype&&e in s.prototype}function Ao(s,e,i){return c(s)||s===""?"":fe.getObject(s,e)}function Eo(s,e){requestAnimationFrame(function(){try{e(null,s())}catch(i){e(i)}})}function Ht(s,e){for(var i=[],t=0,r=s.length;t<r;t++){var n=e(s[parseInt(t.toString(),10)],t);c(n)||i.push(n)}return i}function Ur(s){for(var e=[],i=0;i<s.length;i++)e.push(W({},hr(s[parseInt(i.toString(),10)]),{},!0));return e}function te(s){if(s)try{var e=s[0]!=="<";return typeof s=="function"?it(s):e&&document.querySelectorAll(s).length?it(document.querySelector(s).innerHTML.trim()):it(s)}catch{return it(s)}}function tt(s,e){var i={},t=["style","class"];W(i,e,{}),"style"in i&&($e(s,i[t[0]]),delete i[t[0]]),"class"in i&&(T([s],i[t[1]]),delete i[t[1]]),Le(s,i)}function Yi(s,e){e===void 0&&(e=0);for(var i=0,t=c(s)?0:s.length;i<t;i++)s[parseInt(i.toString(),10)].columns?(s[parseInt(i.toString(),10)].index=c(s[parseInt(i.toString(),10)].index)?e:s[parseInt(i.toString(),10)].index,e++,e=Yi(s[parseInt(i.toString(),10)].columns,e)):(s[parseInt(i.toString(),10)].index=c(s[parseInt(i.toString(),10)].index)?e:s[parseInt(i.toString(),10)].index,e++);return e}function lr(s,e,i){for(var t=0,r=c(s)?0:s.length;t<r;t++){var n=void 0;typeof s[parseInt(t.toString(),10)]=="string"?n=new de({field:s[parseInt(t.toString(),10)]},i):!(s[parseInt(t.toString(),10)]instanceof de)||s[parseInt(t.toString(),10)].columns?s[parseInt(t.toString(),10)].columns?(s[parseInt(t.toString(),10)].columns=lr(s[parseInt(t.toString(),10)].columns,null,i),n=new de(s[parseInt(t.toString(),10)],i)):n=new de(s[parseInt(t.toString(),10)],i):n=s[parseInt(t.toString(),10)],n.type&&n.type.toLowerCase()==="checkbox"&&(n.allowReordering=!1),n.headerText=c(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=(typeof n.valueAccessor=="string"?Z(n.valueAccessor,window):n.valueAccessor)||Ao,n.headerValueAccessor=typeof n.headerValueAccessor=="string"?Z(n.headerValueAccessor,window):n.headerValueAccessor,n.width=e&&c(n.width)?200:n.width,c(n.visible)&&(n.visible=!0),s[parseInt(t.toString(),10)]=n}return s}function yp(s,e,i){var t=s.querySelector("span"),r=s.parentElement.getBoundingClientRect(),n=e.target.getBoundingClientRect();t.className=i,s.style.display="";var o=(c(e.clientY)?e.changedTouches[0].clientY:e.clientY)>s.offsetHeight+10;s.style.top=n.top-r.top+(o?-(s.offsetHeight+10):s.offsetHeight+10)+"px",s.style.left=Sp(s,e,n,r.left)+"px",o?(s.querySelector(".e-downtail").style.display="",s.querySelector(".e-uptail").style.display="none"):(s.querySelector(".e-downtail").style.display="none",s.querySelector(".e-uptail").style.display="")}function Sp(s,e,i,t){var r=s.offsetWidth/2,n=Sn(e).x;return n-i.left<r?i.left-t:i.right-n<r?i.right-t-r*2:n-t-r}function hr(s){return s instanceof oe?Z("properties",s):s}function b(s,e,i){for(var t=s;t&&!t.classList.contains(e);)t=t.parentElement;return t}function Cp(s){for(var e=[],i=0,t=s.length;i<t;i++)s[parseInt(i.toString(),10)].hasOwnProperty("properties")?e.push(s[parseInt(i.toString(),10)].properties):e.push(s[parseInt(i.toString(),10)]);return e}function Sn(s){var e={};return e.x=c(s.clientX)?s.changedTouches[0].clientX:s.clientX,e.y=c(s.clientY)?s.changedTouches[0].clientY:s.clientY,e}var bp=0;function It(s){return s+bp++}function We(s,e){for(var i=0,t=e.length;i<t;i++)t===e.length?s.appendChild(e[parseInt(i.toString(),10)]):s.appendChild(e[0]);return s}function wp(s,e,i,t){if(s==="Custom"){var r=i.customAggregate;return typeof r=="string"&&(r=Z(r,window)),r?r.call(t,e,i):""}return i.field in e||e instanceof Array?fe.aggregates[s.toLowerCase()](e,i.field):null}var jr=null;function De(){if(jr!==null)return jr;var s=document.createElement("div"),e=0;return s.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(s),e=s.offsetWidth-s.clientWidth|0,document.body.removeChild(s),jr=e}var Vi,Gi;function Ip(s,e){if(e&&Gi!==void 0)return Gi;if(Vi!==void 0)return Vi;var i=le("table",{className:ft,attrs:{role:"grid"}});i.style.visibility="hidden",i.innerHTML='<tr><td class="e-rowcell">A<td></tr>',s.appendChild(i);var t=i.querySelector("td").getBoundingClientRect();return s.removeChild(i),Gi=t.height,Vi=Math.ceil(t.height),e?Gi:Vi}function Rp(s){return s.split(".").length>1}function Do(s){var e=Fe("#"+s.element.id+"EditConfirm",s.element);return s.editSettings.mode==="Batch"&&(Ve(".e-updatedtd",s.element).length||Ve(".e-gridform.e-formvalidator",s.element).length)&&s.editSettings.showConfirmDialog&&(e?e.classList.contains("e-popup-close"):!0)}function Ee(s,e){var i="e-wrap";s=s instanceof Array?s:[s];for(var t=0;t<s.length;t++)e?s[parseInt(t.toString(),10)].classList.add(i):s[parseInt(t.toString(),10)].classList.remove(i)}function Cn(s,e){var i=s.getService("valueFormatter"),t="format",r;switch((e.type==="date"||e.type==="datetime"||e.type==="dateonly")&&(r={type:e.type==="dateonly"?"date":e.type,skeleton:e.format},typeof e.format=="string"&&e.format!=="yMd"&&(r[""+t]=e.format)),e.type){case"date":e.setFormatter(i.getFormatFunction(r)),e.setParser(i.getParserFunction(r));break;case"dateonly":e.setFormatter(i.getFormatFunction(r)),e.setParser(i.getParserFunction(r));break;case"datetime":e.setFormatter(i.getFormatFunction(r)),e.setParser(i.getParserFunction(r));break;case"number":e.setFormatter(i.getFormatFunction({format:e.format})),e.setParser(i.getParserFunction({format:e.format}));break}}function zt(s,e){for(var i=[],t=2;t<arguments.length;t++)i[t-2]=arguments[t];for(var r=0,n=s.length;r<n;r++)e?(Re(s[parseInt(r.toString(),10)],i.slice(),[]),s[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(Re(s[parseInt(r.toString(),10)],[],i.slice()),s[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function xp(s,e,i){var t=e.element.style.display;e.element.style.display="block";var r=e.width,n=Zs(s,e.element);e.element.style.display=t,e.element.style.top=n.top+s.getBoundingClientRect().height-5+"px";var o=n.left-r+s.clientWidth;if(i&&i.enableRtl){var a=i.element?i.element.clientWidth:0,l=s.getBoundingClientRect().right+r-a;l>1?e.element.style.left=o-4+"px":e.element.style.left=r+o-16+"px"}else o<1?e.element.style.left=r+o-16+"px":e.element.style.left=o-4+"px"}function li(s){var e=s.querySelector(".e-frame"),i=e.previousSibling;e.classList.contains("e-check")?(i.checked=!1,Re(e,["e-uncheck"],["e-check"])):(i.checked=!0,Re(e,["e-check"],["e-uncheck"]))}function Ot(s,e){s.checked=e}function Qr(s,e,i){var t=le("div",{className:i});return t.appendChild(e),t.setAttribute("uid",s),t}function Ji(s,e){E([s],["e-check","e-stop","e-uncheck"]),e?s.classList.add("e-check"):s.classList.add("e-uncheck")}function kp(s,e,i){for(var t=0;t<(c(e)?0:e.length);t++)gt(e[parseInt(t.toString(),10)].field,qt(e[parseInt(t.toString(),10)],i),s.foreignKeyData);for(var r=s.cells,t=0;t<r.length;t++)r[parseInt(t.toString(),10)].isForeignKey&&gt("foreignKeyData",Z(r[parseInt(t.toString(),10)].column.field,s.foreignKeyData),r[parseInt(t.toString(),10)])}function qt(s,e,i,t){var r=s.foreignKeyField,n=c(i)?Ao(s.field,e):i;n=c(n)?"":n;var o=new he,a=t||(s.dataSource instanceof _&&s.dataSource.dataSource.json.length?s.dataSource.dataSource.json:s.columnData);return n.getDay?o.where(Pt({field:r,operator:"equal",value:n,matchCase:!1})):o.where(r,"==",n,!1),new _(a).executeLocal(o)}function Bn(s,e){var i;return e.some(function(t){return i=t,t.foreignKeyValue===s})&&i}function pr(s){return s<10?"0"+s:String(s)}function Pt(s,e,i){var t,r,n,o=W({},hr(s)),a=W({},hr(s));if(c(s.value)||s.value==="")return t=new se(o.field,o.operator,o.value,!1),t;var l=new Date(s.value);if(e==="dateonly"&&!i){typeof o.value=="string"&&(o.value=new Date(o.value));var h=o.value.getFullYear()+"-"+pr(o.value.getMonth()+1)+"-"+pr(o.value.getDate()),p=new se(o.field,o.operator,h,!1);t=p}else if(s.operator=s.operator.toLowerCase(),s.operator==="equal"||s.operator==="notequal"){e==="datetime"?(r=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),s.value=new Date(l.setSeconds(n.getSeconds()-1))):(r=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),o.value=r,a.value=n,s.operator==="equal"?(o.operator="greaterthan",a.operator="lessthan"):s.operator==="notequal"&&(o.operator="lessthanorequal",a.operator="greaterthanorequal");var d=new se(o.field,o.operator,o.value,!1),u=new se(a.field,a.operator,a.value,!1);t=s.operator==="equal"?d.and(u):d.or(u)}else{e==="date"&&(s.operator==="lessthanorequal"||s.operator==="greaterthan")&&(o.value=new Date(l.setHours(24)-1)),typeof o.value=="string"&&(o.value=new Date(o.value));var p=new se(o.field,o.operator,o.value,!1);t=p}return s.setProperties?s.setProperties({ejpredicate:t},!0):s.ejpredicate=t,t}function nt(s){return s.enableVirtualization&&s.groupSettings.columns.length>0&&s.isVirtualAdaptive&&!s.groupSettings.enableLazyLoading}function yt(s,e){if(s===void 0&&(s=""),s){for(var i=e,t=s.split("."),r=0;r<t.length&&!c(i);r++)if(i=i[t[parseInt(r.toString(),10)]],Ge(i)){var n=t[parseInt(r.toString(),10)].charAt(0).toUpperCase()+t[parseInt(r.toString(),10)].slice(1);i=e[""+n]||e[(""+n).charAt(0).toLowerCase()+(""+n).slice(1)]}return i}}function Fp(s,e){for(var i=s.getRowsObject(),t={},r=0,n=i;r<n.length;r++){var o=n[r];if(o.isExpand&&!o.isDetailRow){var a=s.allowPaging&&s.printMode==="AllPages"?o.index+s.pageSettings.currentPage*s.pageSettings.pageSize-s.pageSettings.pageSize:o.index;c(a)||(t[parseInt(a.toString(),10)]={},t[parseInt(a.toString(),10)].isExpand=!0,s.childGrid&&(t[parseInt(a.toString(),10)].gridModel=Lo(o.childGrid,e),t[parseInt(a.toString(),10)].gridModel.query=s.childGrid.query))}}return t}function Lo(s,e){e===void 0&&(e="Expanded");var i={};if(!s)return i;for(var t=0,r=To.printGridProp;t<r.length;t++){var n=r[t];n==="columns"?i[""+n]=Cp(s[""+n]):n==="allowPaging"?i[""+n]=s.printMode==="CurrentPage":i[""+n]=hr(s[""+n])}return i.enableHover=!1,(s.childGrid||s.detailTemplate)&&e!=="None"&&(i.expandedRows=Fp(s,e)),i}function Hn(s,e,i,t){for(var r=s||{},n=arguments.length,o=1;o<n;o++)if(arguments[parseInt(o.toString(),10)])for(var a=arguments[parseInt(o.toString(),10)],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(Mp(a)):Object.keys(a),h=0;h<l.length;h++){r[l[parseInt(h.toString(),10)]];var p=a[l[parseInt(h.toString(),10)]];r[l[parseInt(h.toString(),10)]]=p}return r}function Mp(s){for(var e=[];Object.getPrototypeOf(s)&&Object.keys(Object.getPrototypeOf(s)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(s))),s=Object.getPrototypeOf(s);return e}function Tp(s){for(var e=0,i=0;i<(c(s)?0:s.length);i++){var t=zo(s[parseInt(i.toString(),10)],0);e<t&&(e=t)}return e+1}function zo(s,e){var i=e,t=[];if(s.columns){e++;for(var r=0;r<s.columns.length;r++)t[parseInt(r.toString(),10)]=zo(s.columns[parseInt(r.toString(),10)],e);for(var n=0;n<t.length;n++)i<t[parseInt(n.toString(),10)]&&(i=t[parseInt(n.toString(),10)]);e=i}return e}function Ap(s,e){for(var i=0;i<e.length;i++)e[parseInt(i.toString(),10)].uid=e[parseInt(i.toString(),10)].isForeignKey?Bn(e[parseInt(i.toString(),10)].field,s.getForeignKeyColumns()).uid:s.enableColumnVirtualization?Wp(s,e[parseInt(i.toString(),10)].field).uid:s.getColumnByField(e[parseInt(i.toString(),10)].field).uid}var Ze;(function(s){s.timer=null})(Ze||(Ze={}));function bn(s){var e=document.defaultView.getComputedStyle(s,null),i=e.getPropertyValue("transform"),t=i.replace(/,/g,""),r=parseFloat(t.split(" ")[4]),n=parseFloat(t.split(" ")[5]);return{width:r,height:n}}function On(s){var e=s.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?De():0}function Po(s,e){var i=0,t=s.getColumns(),r=e*30;s.isRowDragable()&&(i++,r+=30),i+=s.groupSettings.columns.length-e,r+=30*(s.groupSettings.columns.length-e);for(var n=(s.width==="auto"?s.element.offsetWidth:s.width.toString().indexOf("%")!==-1?s.element.getBoundingClientRect().width:parseInt(s.width.toString(),10))-On(s),o=0;o<t.length;o++)if(t[parseInt(o.toString(),10)].visible&&(r+=parseInt(t[parseInt(o.toString(),10)].width.toString(),10),i++),r>n){i--;break}return i}function Ep(s,e){for(var i=0,t=0,r=e.getVisibleFrozenLeftCount(),n=0;n<s.childNodes.length;n++){var o=s.childNodes[parseInt(n.toString(),10)];if(r===t)break;if((o.classList.contains("e-groupcaption")||o.classList.contains("e-summarycell"))&&(t+=parseInt(o.getAttribute("colspan"),10)),o.classList.add("e-leftfreeze"),o.classList.contains("e-groupcaption")&&parseInt(o.getAttribute("colspan"),10)===1&&o.classList.add("e-freezeleftborder"),Ce(o,i,e.enableRtl,"Left"),(o.classList.contains("e-indentcell")||o.classList.contains("e-recordplusexpand")||o.classList.contains("e-recordpluscollapse"))&&(i+=30),o.classList.contains("e-groupcaption")){var a=parseInt(o.getAttribute("colspan"),10);e.isRowDragable()&&(a--,i+=30),a=a-(e.groupSettings.columns.length-n),i=i+30*(e.groupSettings.columns.length-n);for(var l=e.getColumns(),h=0;h<l.length;h++){if(parseInt(o.getAttribute("colspan"),10)>1&&parseInt(l[parseInt(h.toString(),10)].width.toString(),10)+i>parseInt(e.width.toString(),10)-On(e)){var p=Po(e,n);o.setAttribute("colspan",p.toString());break}if(l[parseInt(h.toString(),10)].visible&&(i+=parseInt(l[parseInt(h.toString(),10)].width.toString(),10),a--),a===0)break}}if(o.classList.contains("e-summarycell")){var d=o.getAttribute("e-mappinguid"),u=e.getColumnByUid(d);i+=parseInt(u.width.toString(),10)}}}function Dp(s,e){var i=Lp(e),t=new rt;return i.dataSource=t.resolve,i.action=s,{state:i,deffered:t}}function Lp(s){var e=new gi,i=new _({url:"",adaptor:new gi}),t=e.processQuery(i,s),r=JSON.parse(t.data);return r}function wn(s){for(var e=s.getVisibleColumns(),i=0,t=0,r=0;r<e.length;r++)Ge(e[parseInt(r.toString(),10)].width)?t++:e[parseInt(r.toString(),10)].width.toString().indexOf("%")!==-1&&i++;return(s.width==="auto"||typeof s.width=="string"&&s.width.indexOf("%")!==-1)&&!s.groupSettings.showGroupedColumn&&s.groupSettings.columns.length&&i&&!t}function zp(s,e,i,t,r){for(var n=0,o=0;o<e.length;o++)if(e[parseInt(o.toString(),10)]&&e[parseInt(o.toString(),10)].isDataRow){e[parseInt(o.toString(),10)].index=n,e[parseInt(o.toString(),10)].isAltRow=s.enableAltRow?n%2!==0:!1,i[parseInt(o.toString(),10)].setAttribute(ee,(n+1).toString()),e[parseInt(o.toString(),10)].isAltRow?i[parseInt(o.toString(),10)].classList.add("e-altrow"):i[parseInt(o.toString(),10)].classList.remove("e-altrow");for(var a=0;a<i[parseInt(o.toString(),10)].cells.length;a++)i[parseInt(o.toString(),10)].cells[parseInt(a.toString(),10)].setAttribute("index",n.toString());n++}e.length||s.renderModule.emptyRow(!0)}function Pp(s,e,i,t){var r=s.dataToBeUpdated[""+i].concat(e[""+i]).reduce(function(n,o){return n[o[""+t]]=n[o[""+t]]===void 0?o:Object.assign(n[o[""+t]],o),n},{});s.dataToBeUpdated[""+i]=Object.keys(r).map(function(n){return r[""+n]})}function Bp(s){if(s.enableInfiniteScrolling&&(s.childGrid||s.detailTemplate)){s.contentModule.rowElements=[].slice.call(s.getContentTable().rows).filter(function(e){return(e.classList.contains("e-row")||e.classList.contains("e-detailrow"))&&!e.classList.contains("e-addedrow")});return}s.contentModule.rowElements=[].slice.call(s.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function Hp(s,e){var i=s.createElement("div",{className:"e-grid-popup",id:s.element.id+"_e-popup"}),t=Xr(s.element,"left","Top");document.getElementById(s.element.id+"_e-popup")&&(i=document.getElementById(s.element.id+"_e-popup")),i.style.top=t.top+"px",i.style.left=t.left+"px",i.style.zIndex=e.zIndex.toString(),i.style.width=e.element.offsetWidth+"px",i.appendChild(e.element);var r=b(s.element,"sb-demo-section")||b(s.element,"e-grid-dialog-fixed");if(r){var n=Zs(s.element,r);i.style.top=n.top+"px",i.style.left=n.left+"px",r.insertBefore(i,r.firstChild)}else document.body.insertBefore(i,document.body.firstChild)}function Ks(s,e){var i=[];return i.push(s.uid),Bo(s,i),i.indexOf(e)>-1}function Bo(s,e){for(var i=0;i<s.columns.length;i++)s.columns[parseInt(i.toString(),10)].uid&&e.push(s.columns[parseInt(i.toString(),10)].uid),s.columns[parseInt(i.toString(),10)].columns&&s.columns[parseInt(i.toString(),10)].columns.length&&Bo(s.columns[parseInt(i.toString(),10)],e)}function Zi(s){return s.columns[0].freeze||s.columns[0].isFrozen?s.columns[0].freeze==="Left"||s.columns[0].isFrozen?"Left":s.columns[0].freeze==="Right"?"Right":s.columns[0].freeze==="Fixed"?"Fixed":"None":s.columns[0].columns&&s.columns[0].columns.length?Zi(s.columns[0]):"None"}function In(s){if(s.querySelector(".e-fixedfreeze"))for(var e=[].slice.call(s.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[i-1]||e[i-1]&&!e[i-1].classList.contains("e-fixedfreeze"))&&e[parseInt(i.toString(),10)].classList.add("e-freezeleftborder"),e[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[i+1]||e[i+1]&&!e[i+1].classList.contains("e-fixedfreeze"))&&e[parseInt(i.toString(),10)].classList.add("e-freezerightborder")}function Ce(s,e,i,t){t==="Left"&&(i?s.style.right=e+"px":s.style.left=e+"px"),t==="Right"&&(i?s.style.left=e+"px":s.style.right=e+"px")}function Op(s,e,i,t){var r=s.getColumns(),n=e.index;if(e.freeze==="Left"&&e.border!=="Left"){for(var o=n+(t-1);r[parseInt(o.toString(),10)].visible===!1;)o++;r[parseInt(o.toString(),10)].border==="Left"&&i.classList.add("e-freezeleftborder")}else if(e.freeze==="Right"||e.freeze==="Fixed"){for(var a=0,l=n+1;l<n+t&&l!==r.length;l++)r[parseInt(l.toString(),10)].visible?a+=parseInt(r[parseInt(l.toString(),10)].width.toString(),10):t++;s.enableRtl?i.style.left=parseInt(i.style.left,10)-a+"px":i.style.right=parseInt(i.style.right,10)-a+"px"}}function Us(s,e,i){for(var t=s.getRowByIndex(e),r=0;r<t.cells.length;r++)if(parseInt(t.cells[parseInt(r.toString(),10)].getAttribute("aria-colindex").toString(),10)-1===i)return t.cells[parseInt(r.toString(),10)];return null}function Ho(s,e,i){if(e.freeze==="Left"||e.isFrozen)if(i.classList.add("e-leftfreeze"),e.border==="Left"&&i.classList.add("e-freezeleftborder"),e.index===0)Ce(i,s.getIndentCount()*30,s.enableRtl,"Left"),s.enableColumnVirtualization&&(e.valueX=s.getIndentCount()*30);else{for(var t=s.getColumns(),r=s.getIndentCount()*30,n=0;n<t.length&&e.uid!==t[parseInt(n.toString(),10)].uid;n++)t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));Ce(i,r,s.enableRtl,"Left"),s.enableColumnVirtualization&&(e.valueX=r)}else if(e.freeze==="Right"){i.classList.add("e-rightfreeze");var t=s.getColumns();if(e.border==="Right"&&i.classList.add("e-freezerightborder"),e.index===t[t.length-1].index){var r=s.getFrozenMode()==="Right"&&s.isRowDragable()?30:0;Ce(i,r,s.enableRtl,"Right"),s.enableColumnVirtualization&&(e.valueX=r)}else{for(var r=s.getFrozenMode()==="Right"&&s.isRowDragable()?30:0,n=t.length-1;n>=0&&e.uid!==t[parseInt(n.toString(),10)].uid;n--)t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));Ce(i,r,s.enableRtl,"Right"),s.enableColumnVirtualization&&(e.valueX=r)}}else if(e.freeze==="Fixed"){i.classList.add("e-fixedfreeze");var t=s.getColumns(),r=0;s.getVisibleFrozenLeftCount()?r=s.getIndentCount()*30:s.getFrozenMode()==="Right"&&(r=s.groupSettings.columns.length*30);for(var n=0;n<t.length&&e.uid!==t[parseInt(n.toString(),10)].uid;n++)(t[parseInt(n.toString(),10)].freeze==="Left"||t[parseInt(n.toString(),10)].isFrozen||t[parseInt(n.toString(),10)].freeze==="Fixed")&&t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));Ce(i,r-1,s.enableRtl,"Left"),r=s.getFrozenMode()==="Right"&&s.isRowDragable()?30:0;for(var n=t.length-1;n>=0&&e.uid!==t[parseInt(n.toString(),10)].uid;n--)(t[parseInt(n.toString(),10)].freeze==="Right"||t[parseInt(n.toString(),10)].freeze==="Fixed")&&t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));Ce(i,r-1,s.enableRtl,"Right")}else i.classList.add("e-unfreeze")}function Oo(s,e,i){return[].slice.call(s.getDataRows()[parseInt(i.toString(),10)].getElementsByClassName(U))}function qp(s,e,i,t){return Oo(s,e,i)[parseInt(t.toString(),10)]}function Np(s,e,i,t){var r,n=new kn;if(e==="number")try{r=n.getNumberPattern({format:s,currency:t,useGrouping:!0},!0)}catch{r=s}else if(e==="date"||e==="time"||e==="datetime")try{if(r=n.getDatePattern({skeleton:s,type:e},i),c(r))throw"error"}catch{try{r=n.getDatePattern({format:s,type:e},i)}catch{r=s}}else r=s;if(e!=="number"){var o=/G|H|c|'| a|yy|y|EEEE|E/g,a={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r=r.replace(o,function(l){return a[""+l]})}return r}function Vp(s){if(s.enableAdaptiveUI)for(var e=document.getElementsByClassName("e-responsive-dialog"),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].classList.add("e-bigger")}function Gp(s,e){for(var i,t=s.split(".").length,r=s.split("."),n=e,o=0;o<t;o++)i=n[r[parseInt(o.toString(),10)]],n=i;return i}function _p(s,e,i,t,r,n){for(var o=Object.keys(s),a=e,l=0;l<o.length;l++){var h=s[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)];if(r&&!r.isFrozenGrid()&&!r.isRowDragable()){if(h=!c(h)&&(parseInt(h.getAttribute("aria-colindex"),10)-1===e||b(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(e.toString(),10)]===h)?h:s[parseInt(l.toString(),10)].querySelector('td[aria-colindex="'+(e+1)+'"]'),c(h))continue;e=r.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}if(s[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h){if($e(s[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)],{display:i}),s[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.contains("e-hide")&&E([s[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)]],["e-hide"]),n&&r.isRowDragable()||r&&r.isDetail()){var p=e+1;t[o[parseInt(l.toString(),10)]].cells[parseInt(p.toString(),10)].visible=i===""}else c(t[o[parseInt(l.toString(),10)]])||(t[o[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible=i==="",t[o[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible===!1&&s[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.add("e-hide"));e=a}}}function Ft(s,e,i,t){for(var r=0,n=e;r<n.length;r++){var o=n[r];i?s.on(o.event,o.handler,t):s.off(o.event,o.handler)}}function Wp(s,e){var i;s.columnModel||s.getColumns();for(var t=0,r=s.columnModel;t<r.length;t++){var n=r[t];if(n.field===e){i=n;break}}return i}function dr(s,e){s.destroyTemplate(e),s.isReact&&s.renderTemplates()}function _i(s){for(var e=0;e<s.length;e++)q(s[e])}function js(s,e){for(var i=0;i<s.length;i++)e.insertBefore(s[i],e.children[i])}function Wi(s,e){var i=le("div",{className:"e-ftrchk"});i.style.visibility="hidden",i.innerHTML='<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"></span><span class="e-label e-checkboxfiltertext">A</div></span>',s.appendChild(i);var t=i.getBoundingClientRect();s.removeChild(i);var r=Math.round(t.height);return r}function Ye(s,e,i){var t=s,r=e,n=!1;if(i)for(var o=r[0];o<t.length;o++)for(var a=t[parseInt(o.toString(),10)],l=0;l<a.length;l++){if(n&&t[parseInt(o.toString(),10)][parseInt(l.toString(),10)]===1)return r=[o,l],r;!n&&r.toString()===[o,l].toString()&&(n=!0)}else for(var o=r[0];o>=0;o--)for(var a=t[parseInt(o.toString(),10)],l=a.length-1;l>=0;l--){if(n&&t[parseInt(o.toString(),10)][parseInt(l.toString(),10)]===1)return r=[o,l],r;!n&&r.toString()===[o,l].toString()&&(n=!0)}return r}var Qs=function(){function s(e){this.searchInputArgs=null,this.isExecuteLocal=!1,this.queryFilteredColumn=[],this.existingPredicate={},this.foreignKeyQuery=new he,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new xi(this.parent.locale),this.cBoxTrue=mi(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=mi(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&T([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?T([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):T([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return s.prototype.destroy=function(){this.closeDialog()},s.prototype.wireEvents=function(){I.add(this.dlg,"click",this.clickHandler,this),I.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Uo(this.searchBoxKeyUp,200);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(I.add(e,"keyup",this.searchHandler,this),I.add(e,"input",this.searchHandler,this))},s.prototype.unWireEvents=function(){I.remove(this.dlg,"click",this.clickHandler),I.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(I.remove(e,"keyup",this.searchHandler),I.remove(e,"input",this.searchHandler))},s.prototype.foreignKeyFilter=function(e,i,t){var r=this,n={},o=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(t)).then(function(l){r.options.column.columnData=l.result,r.parent.notify(ji,{predicate:n,column:r.options.column}),e.ejpredicate=n.predicate.predicates;for(var h=n.predicate.predicates,p=0;p<h.length;p++)o.push({field:h[parseInt(p.toString(),10)].field,predicate:"or",matchCase:h[parseInt(p.toString(),10)].ignoreCase,ignoreAccent:h[parseInt(p.toString(),10)].ignoreAccent,operator:h[parseInt(p.toString(),10)].operator,value:h[parseInt(p.toString(),10)].value,type:r.options.type});e.filterCollection=o.length?o:i.filter(function(d){return d.field=r.options.field}),r.options.handler(e)})},s.prototype.searchBoxClick=function(e){var i=e.target;i.classList.contains("e-searchclear")&&(this.sInput.value=i.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},s.prototype.searchBoxKeyUp=function(e){c(this.sInput)||(c(e)||e.key!=="ArrowUp"&&e.key!=="ArrowDown"&&e.key!=="Tab"&&!(e.key==="Tab"&&e.shiftKey))&&(!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon())},s.prototype.updateSearchIcon=function(){this.sInput.value.length?(Re(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),c(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(Re(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),c(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},s.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},s.prototype.updateDataSource=function(){var e=this.options.dataSource,i="object";if(!(e instanceof _)){for(var t=0;t<e.length;t++)if(typeof e!==i){var r={};r[this.options.field]=e[parseInt(t.toString(),10)],e[parseInt(t.toString(),10)]=r}}},s.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new he,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.options.disableHtmlEncode=e.column.disableHtmlEncode||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length,this.infiniteRenderMod=!!(this.parent.filterSettings&&this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},s.prototype.getAndSetChkElem=function(e){return this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),e.hideSearchbox||(this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox),this.searchInputArgs={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}},Qn.createInput(this.searchInputArgs,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)),this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},s.prototype.showDialog=function(e){var i={requestType:Ua,columnName:this.options.field,columnType:this.options.type,cancel:!1},t="filterModel";if(i[""+t]=this,this.parent.notify(ml,i),i.cancel){e.cancel=i.cancel;return}this.dialogObj=new Dn({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!c(b(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""});var r="isStringTemplate";this.dialogObj[""+r]=!0,this.renderResponsiveFilter(e);var n=this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",n),e.isResponsiveFilter){var o=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");o.appendChild(this.dlg)}else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.parent&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.options.column&&this.options.column.filter&&this.options.column.filter.type==="CheckBox")&&this.parent.getContent().firstElementChild.offsetHeight<this.dialogObj.element.offsetHeight&&!b(this.parent.element,"e-gantt-dialog")&&Hp(this.parent,this.dialogObj);var a=this.dialogObj.element.querySelector(".e-dlg-content");if(a.appendChild(this.sBox),this.wireEvents(),!this.parent.enableAdaptiveUI)!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&!this.infiniteRenderMod&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.showMask();else{if(this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"){this.getAllData();return}this.infiniteRenderMod&&(this.cBox.style.marginTop=Wi(this.cBox)+"px")}this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"||(Yr({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),hi(this.spinner)),this.getAllData()},s.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},s.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":O.isDevice?this.dialogObj.position={X:"center",Y:"center"}:xp(this.options.target,this.dialogObj,this.parent),this.options.column.showColumnMenu&&this.parent.notify(al,e)},s.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},s.prototype.closeDialog=function(){if(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var e=this.options.columns.filter(function(r){return r.getFilterItemTemplate()}),i=this.parent.registeredTemplate;if(e.length&&!c(i)&&i.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&dr(this.parent,["filterItemTemplate"]),this.parent.notify(ll,{field:this.options.field}),this.unWireEvents(),this.searchInputArgs&&this.searchInputArgs.element&&this.searchInputArgs.element.parentElement&&(Qn.destroy(this.searchInputArgs),q(this.searchInputArgs.element)),this.searchInputArgs=null,this.sInput=null,this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&(this.options.column.filter.type==="CheckBox"||this.options.column.filter.type==="Excel")&&(this.dialogObj.element.querySelector(".e-dlg-content").innerHTML=""),this.dialogObj.destroy(),this.dialogObj.dlgClosedBy==="escape"&&(this.parent.isColumnMenuFilterClosing=!0),this.dlg&&this.dlg.parentElement){q(this.dlg);var t=document.getElementById(this.parent.element.id+"_e-popup");c(t)||(q(t),t=null)}this.dlg=null,this.parent.notify(yo,{})}},s.prototype.clearFilter=function(e){var i={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(Hs,i),!i.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})},s.prototype.btnClick=function(e){if(this.filterState){if(e.target.tagName.toLowerCase()==="input"&&e.target.classList.contains("e-searchinput")||e.keyCode===13)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var i=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===i?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===i&&this.clearFilter()}this.closeDialog()}else e.target&&e.target.firstChild&&e.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():e.target.tagName.toLowerCase()!=="input"&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify($l,{}),c(this.parent.focusModule)||this.parent.focusModule.filterfocus()},s.prototype.fltrBtnHandler=function(){var e=this;this.infiniteRenderMod&&(this.cBox.innerHTML="",We(this.cBox,this.infiniteLoadedElem.slice()));var i=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),t=i,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual=this.options.operator==="notequal";var o;this.options.hideSearchbox||(o=this.searchBox.querySelector(".e-searchinput"));var a=this.options.allowCaseSensitive,l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:a,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==i.length&&this.itemsCnt-i.length<i.length;h&&o&&o.value===""&&(r=this.isMenuNotEqual?"equal":"notequal",i=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=r);var p,d,u=[];if(i.length!==this.itemsCnt||o&&o.value&&o.value!==""||this.infiniteRenderMod){if(this.infiniteRenderMod)this.infiniteRenderMod&&(!this.infiniteSearchPred||this.infiniteSearchPred&&!this.infiniteSearchPred.isComplex)?this.infiniteFltrBtnHandler(u):this.infiniteSearchPred.isComplex&&(u=this.complexQueryPredicate(i,l,h));else{if(u=this.complexQueryPredicate(i,l,h),c(u))return;u=this.filterPreventColumns?this.filterPreventColumns:u}(this.options.type==="date"||this.options.type==="dateonly"||this.options.type==="datetime")&&t.length&&(d=t.length-1,p=this.values[b(t[parseInt(d.toString(),10)],"e-ftrchk").getAttribute("uid")],c(p)&&h&&u.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"or",value:null}));var f=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current");if(f&&f.classList.contains("e-check")){var g=this.existingPredicate[this.options.field];if(g)for(var m=function(R){u.some(function(w){return w.value===g[parseInt(R.toString(),10)].value})||u.push(g[parseInt(R.toString(),10)])},S=0;S<g.length;S++)m(S);else return}if(!this.infiniteRenderMod)this.initiateFilter(u);else if(u.length)this.initiateFilter(u);else if(this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!u.length){var y=this.options.filteredColumns.some(function(R){return e.options.field===R.field});y&&this.clearFilter()}}else{var y=this.options.filteredColumns.some(function(w){return e.options.field===w.field});y&&this.clearFilter()}},s.prototype.complexQueryPredicate=function(e,i,t){for(var r,n,o=[],a=0;a<e.length;a++)r=this.values[b(e[parseInt(a.toString(),10)],"e-ftrchk").getAttribute("uid")],n=W({},{value:r},i),r&&!r.toString().length&&(n.operator=t?"notequal":"equal"),r===""||c(r)?o=o.concat(s.generateNullValuePredicates(i)):o.push(n);var l=this.filterPreventColumns&&this.filterPreventColumns.length?this.filterPreventColumns[0]:n;return l&&!this.notifyFilterPrevEvent(l)?(this.filterPreventColumns=o,null):o},s.prototype.infiniteFltrBtnHandler=function(e){var i;if(this.infiniteManualSelectMaintainPred.length)for(var t=0;t<this.infiniteManualSelectMaintainPred.length;t++){var r=this.infiniteManualSelectMaintainPred[t];if(i=r.value+"",i===""||c(i)){var n={predicate:r.predicate,field:r.field,type:r.type,uid:r.uid,operator:r.operator,matchCase:r.matchCase,ignoreAccent:r.ignoreAccent};e.push.apply(e,s.generateNullValuePredicates(n))}else e.push(this.infiniteManualSelectMaintainPred[t]);this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[t])}if(!this.localInfiniteSelectAllClicked&&this.sInput.value===""&&!(!this.options.parentCurrentViewDataCount&&e.length))for(var t=0;t<this.infiniteUnloadParentExistPred.length;t++)e.unshift(this.infiniteUnloadParentExistPred[t]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][t]);this.sInput.value!==""&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll)&&(this.infiniteSearchPred.predicate="or",e.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},s.prototype.notifyFilterPrevEvent=function(e){var i={instance:this,handler:this.fltrBtnHandler,arg1:e.field,arg2:e.predicate,arg3:e.operator,arg4:e.matchCase,arg5:e.ignoreAccent,arg6:e.value,cancel:!1};return this.parent.notify(Hs,i),!i.cancel},s.generateNullValuePredicates=function(e){var i=[];return e.type==="string"&&i.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),i.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),i.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),i},s.prototype.initiateFilter=function(e){var i=e[0],t;if(!c(i)){t=i.ejpredicate?i.ejpredicate:new se(i.field,i.operator,i.value,!i.matchCase,i.ignoreAccent);for(var r=1;r<e.length;r++)t=e[parseInt(r.toString(),10)].ejpredicate!==void 0?t[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].ejpredicate):t[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].field,e[parseInt(r.toString(),10)].operator,e[parseInt(r.toString(),10)].value,!e[parseInt(r.toString(),10)].matchCase,e[parseInt(r.toString(),10)].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:se.or(t)};this.options.handler(n)}},s.prototype.isForeignColumn=function(e){return e.isForeignColumn?e.isForeignColumn():!1},s.prototype.refreshCheckboxes=function(){var e=this,i=this.sInput.value,t=this.options.column,r=this.isForeignColumn(t)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),o=r.queries.filter(function(w){return w&&w.fn==="onWhere"})[0];r.queries=[],n.queries=[];var a=this.options.type!=="string"&&parseFloat(i)?parseFloat(i):i,l=this.options.isRemote?this.options.type==="string"?"contains":"equal":this.options.type?"contains":"equal",h=!0,p=this.options.ignoreAccent,d=this.isForeignColumn(t)?t.foreignKeyValue:t.field;a=a===""||a===void 0?void 0:a;var u=[],f={field:d,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:p},g,m=this.options.dataManager.adaptor.getModuleName;if(this.options.type==="boolean"&&(a!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())!==-1?a="true":a!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())!==-1&&(a="false"),a!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())!==-1&&m?a=(m(),!0):a!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())!==-1&&m&&(a=(m(),!1)),l="equal"),(this.options.type==="date"||this.options.type==="datetime"||this.options.type==="dateonly")&&this.options.format){var S=new kn,y=typeof this.options.format=="string"?this.options.format:this.options.format.format;y?a=S.parseDate(i,{format:y})||new Date(i):a=new Date(i),this.options.type==="dateonly"&&(a=a.getFullYear()+"-"+pr(a.getMonth()+1)+"-"+pr(a.getDate()))}this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],this.sInput.value===""?this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:this.infiniteUnloadParentExistPred=[],this.isForeignColumn(t)||this.addDistinct(r);var R={requestType:ja,filterModel:this,columnName:d,column:t,operator:l,matchCase:h,ignoreAccent:p,filterChoiceCount:null,query:r,value:a,cancel:!1};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(R.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(st,R,function(w){if(!w.cancel){if(w.operator=w.operator,g=new se(d,w.operator,R.value,w.matchCase,w.ignoreAccent),e.options.type==="date"||e.options.type==="datetime"||e.options.type==="dateonly"){l="equal";var F={field:d,operator:l,value:a,matchCase:h,ignoreAccent:p};c(a)||(g=Pt(F,e.options.type))}if(i&&typeof i=="string"&&e.isBlanks&&e.getLocalizedLabel("Blanks").toLowerCase().indexOf(i.toLowerCase())>=0){u=u.concat(s.generateNullValuePredicates(f));var L=s.generatePredicate(u);L.predicates.push(g),g=L,r.where(L)}else i.length?(g=c(o)?g:g.and(o.e),r.where(g)):c(o)||(g=o.e,r.where(o.e));e.infiniteSearchPred=g,w.filterChoiceCount=c(w.filterChoiceCount)?1e3:w.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==w.filterChoiceCount&&(e.parent.filterSettings.itemsCount=R.filterChoiceCount);var k={};if(hi(e.spinner),e.renderEmpty=!1,e.isForeignColumn(t)&&i.length){var z="result"in t.dataSource?new _(t.dataSource.result):t.dataSource;z.executeQuery(r).then(function(H){var B=e.options.column.columnData;e.options.column.columnData=H.result,e.parent.notify(ji,{predicate:k,column:t}),k.predicate.predicates.length?n.where(k.predicate):e.renderEmpty=!0,e.options.column.columnData=B,e.infiniteRenderMod?(e.infiniteInitialLoad=!!c(e.fullData),e.makeInfiniteScrollRequest(n),n.requiresCount()):n.take(w.filterChoiceCount),e.search(w,n)})}else e.infiniteRenderMod&&e.parent.filterSettings.itemsCount?(e.infiniteInitialLoad=!!c(e.fullData),e.makeInfiniteScrollRequest(r),r.requiresCount()):r.take(w.filterChoiceCount),e.search(w,r)}})},s.prototype.search=function(e,i){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,i):this.processSearch(i)},s.prototype.getPredicateFromCols=function(e,i){for(var t=s.getPredicate(e,i),r=[],n={},o=this.parent.getForeignKeyColumns!==void 0,a=o?this.parent.getForeignKeyColumns():[],l=0,h=Object.keys(t);l<h.length;l++){var p=h[l],d=void 0;o&&!this.parent.getColumnByField(p)&&(d=Bn(p,a)),d?(this.parent.notify(ji,{predicate:n,column:d}),n.predicate.predicates.length&&r.push(se.or(n.predicate.predicates))):r.push(t[""+p])}return r.length&&se.and(r)},s.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new he},s.prototype.getAllData=function(){var e=this;this.customQuery=!1;var i=this.getQuery(),t=this.options.dataManager.adaptor.getModuleName;!c(this.parent.getDataModule)&&t&&t()==="ODataV4Adaptor"||i.requiresCount(),this.addDistinct(i);var r={requestType:_r,query:i,filterChoiceCount:null},n="filterModel";r[""+n]=this,this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(r.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(st,r,function(o){o.filterChoiceCount=c(o.filterChoiceCount)?1e3:o.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==o.filterChoiceCount&&(e.parent.filterSettings.itemsCount=o.filterChoiceCount),e.infiniteRenderMod||i.take(o.filterChoiceCount),(!o.query.distincts.length||e.infiniteRenderMod)&&(e.customQuery=!0,e.queryGenerate(i)),e.infiniteRenderMod&&(e.infiniteInitialLoad=!!c(e.fullData),e.makeInfiniteScrollRequest(i)),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(o,i):e.processDataOperation(i,!0)})},s.prototype.addDistinct=function(e){var i=this,t=fe.distinct(this.options.filteredColumns,"field");t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field));var r=this.options.dataManager.adaptor.getModuleName;if(r&&r()==="ODataV4Adaptor"&&this.parent&&this.parent.query instanceof he)for(var n=this.parent.query,o=0;o<n.queries.length;o++){var a=n.queries[parseInt(o.toString(),10)];a.fn==="onWhere"&&(this.getPredicateFields(a.e),this.queryFilteredColumn.map(function(d){t.indexOf(d)===-1&&t.push(d)}),this.queryFilteredColumn=[])}if(this.infiniteRenderMod||e.distinct(t),this.infiniteRenderMod&&!this.options.isRemote&&this.sInput.value===""){this.options.dataSource=this.options.dataSource instanceof _?this.options.dataSource:new _(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice();var l=new he;this.queryGenerate(l);var h=new _(this.options.dataSource.dataSource).executeLocal(l);this.options.dataSource=new _(fe.distinct(h,this.options.column.field,!0)),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof _?this.options.column.dataSource:new _(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(d,u){return Object.assign({},d,i.options.column.dataSource.dataSource.json[u])}))}else if(this.infiniteRenderMod&&this.options.isRemote){e.select(this.options.column.field),e.sortBy(this.options.column.field,"ascending");var p=this.options.dataManager.adaptor.getModuleName;p&&p()&&(p()==="ODataV4Adaptor"||p()==="WebApiAdaptor"||p()==="CustomDataAdaptor"||p()==="GraphQLAdaptor"||p()==="ODataAdaptor")&&e.distinct(t)}return e},s.prototype.getPredicateFields=function(e){var i=this;e.isComplex&&e.predicates?e.predicates.forEach(function(t){Array.isArray(t)?t.forEach(function(r){return i.getPredicateFields(r)}):i.getPredicateFields(t)}):e.field&&!e.isComplex&&this.queryFilteredColumn.indexOf(e.field)<=-1&&(this.queryFilteredColumn=this.queryFilteredColumn.concat(fe.distinct([e.field],"field")))},s.prototype.filterEvent=function(e,i){var t=this,r=Dp(e,i);this.parent.trigger(pn,r.state),this.addInfiniteScrollEvent(i);var n=r.deffered;n.promise.then(function(o){t.infiniteDataCount=t.infiniteRenderMod&&!t.infiniteDataCount?o.count:t.infiniteDataCount;var a=t.infiniteRenderMod?o.result:o;t.dataSuccess(a)})},s.prototype.addInfiniteScrollEvent=function(e){this.infiniteRenderMod&&(this.infiniteQuery=e.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),I.add(this.cBox,"scroll",this.infiniteScrollHandler,this),I.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),I.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML=""))},s.prototype.infiniteScrollMouseKeyDownHandler=function(){I.remove(this.cBox,"scroll",this.infiniteScrollHandler)},s.prototype.infiniteScrollMouseKeyUpHandler=function(e){var i=this;I.add(this.cBox,"scroll",this.infiniteScrollHandler,this);var t=this.cBox;t.children.length>1&&(t.scrollTop>=t.scrollHeight-t.offsetHeight||t.scrollTop<=0)&&this.infiniteScrollHandler(),Ze.timer=setTimeout(function(){i.clickHandler(e),Ze.timer=null},0)},s.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},s.prototype.showMask=function(){var e=5,i,t=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist"});t.style.zIndex="10";var r=this.cBox;if(this.removeMask(),r){var n=getComputedStyle(r),o=Wi(r),a=r.children.length?parseInt(n.height,10):Math.floor(parseInt(n.height.split("px")[0],10))-5;this.parent.enableAdaptiveUI&&this.infiniteRenderMod&&(t.style.height=a-o+"px",this.dlg.querySelector(".e-dlg-content").style.overflow="hidden");var l=this.isExcel&&!r.children.length&&!this.dlg.classList.contains("e-excelfilter")?"":getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;t.style.cssText="width: "+n.width+"; min-height: "+n.minHeight+"; height: "+a+"px; margin: "+n.margin+"; border-style: "+n.borderStyle+"; border-width: "+n.borderWidth+"; border-color: "+n.borderColor+"; position: absolute; background-color: "+l+";",e=Math.floor(a/o),e=r.children.length>e?r.children.length:e,i=o+"px"}var h='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";if(t.innerHTML="",!r.children.length){this.spinner.insertAdjacentHTML("beforebegin",h),this.spinner.parentElement.querySelector(".e-ftrchk.e-mask-ftrchk").style.cssText="width: 100%; height: "+i+";",this.spinner.parentElement.querySelector(".e-checkbox-wrapper").style.width="100%";var p=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.spinner.insertBefore(t,this.cBox);for(var d=0;e&&d<e;d++){t.innerHTML+=h,t.lastElementChild.style.cssText="width: 100%; height: "+i+";",t.lastElementChild.querySelector(".e-checkbox-wrapper").style.width="100%";var p=[].slice.call(t.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.cBox&&(t.scrollTop=this.cBox.scrollTop)},s.prototype.removeMask=function(){var e=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(e.length)for(var i=0;i<e.length;i++)q(e[i]);var t=this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");t&&q(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},s.prototype.infiniteScrollHandler=function(){var e=this.cBox;e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(_i([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+=this.prevInfiniteScrollDirection==="down"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,We(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>this.parent.filterSettings.itemsCount*3&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(_i([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-=this.prevInfiniteScrollDirection==="up"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,js([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<this.parent.filterSettings.itemsCount*3&&(_i([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,js([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},s.prototype.makeInfiniteScrollRequest=function(e){var i=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?setTimeout(function(){i.infiniteQueryExecutionPending&&i.showMask()},500):this.infiniteInitialLoad||(Yr({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),hi(this.spinner));var t="fn";if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var r=0;r<this.infiniteQuery.queries.length;r++)(this.infiniteQuery.queries[r][""+t]==="onTake"||this.infiniteQuery.queries[r][""+t]==="onSkip")&&(this.infiniteQuery.queries.splice(r,1),r--);var n=!!e;if(e=e||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,e.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(e.take(this.parent.filterSettings.itemsCount*3),this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount*2):e.take(this.parent.filterSettings.itemsCount),!n)if(this.parent.dataSource&&"result"in this.parent.dataSource){var o={requestType:_r,query:e,filterChoiceCount:null,filterModel:this};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(o.filterChoiceCount=this.parent.filterSettings.itemsCount),this.filterEvent(o,e)}else this.processDataOperation(e),this.infiniteQueryExecutionPending=!0},s.prototype.processDataOperation=function(e,i){var t=this;this.options.dataSource=this.options.dataSource instanceof _?this.options.dataSource:new _(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&i){var o="result"in this.options.column.dataSource?new _(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,r.push(o.executeQuery(this.foreignKeyQuery)),n.push(function(l){return t.foreignKeyData=l})}if(this.addInfiniteScrollEvent(e),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote){var a=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field;this.options.dataSource.executeQuery(new he().sortBy(a,fe.fnAscending)).then(function(l){t.options.dataSource.dataSource.json=l.result,t.executeQueryOperations(e,r,n)})}else this.executeQueryOperations(e,r,n)},s.prototype.executeQueryOperations=function(e,i,t){var r=this;i.push(this.options.dataSource.executeQuery(e)),t.push(this.dataSuccess.bind(this));var n=0;Promise.all(i).then(function(o){r.infiniteQueryExecutionPending=r.infiniteRenderMod?!1:r.infiniteQueryExecutionPending;for(var a=0;a<o.length;a++)r.infiniteDataCount=r.infiniteRenderMod&&!r.infiniteDataCount?o[a].count:r.infiniteDataCount,t[n++](o[parseInt(a.toString(),10)].result)}).catch(function(){r.infiniteRenderMod&&r.parent.filterSettings&&r.parent.filterSettings.loadingIndicator==="Shimmer"&&r.parent.showMaskRow(void 0,r.dialogObj.element)})},s.prototype.dataSuccess=function(e){if(!(!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||e.length===0))){this.fullData=e;var i={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify(Pl,i),i.executeQuery){var t=new he;this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(t),this.isExecuteLocal=!1);var r=new _(i.dataSource).executeLocal(t),n=this.options.column;this.filteredData=s.getDistinct(r,this.options.field,n,this.foreignKeyData,this).records||[]}var o=i.executeQuery?this.filteredData:i.dataSource;this.processDataSource(null,!0,o,i),(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&(this.sInput?this.sInput.focus():this.dlg.querySelector(".e-chk-hidden")&&this.dlg.querySelector(".e-ftrchk")&&(this.dlg.querySelector(".e-chk-hidden").focus(),this.dlg.querySelector(".e-ftrchk").classList.add("e-chkfocus"))),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1);var a={requestType:Ka,columnName:this.options.field,columnType:this.options.type},l="filterModel";a[""+l]=this,this.parent.notify(Bs,a),this.isCheckboxFilterTemplate&&Jr(this.spinner)}},s.prototype.queryGenerate=function(e){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var i=this.options.dataManager.adaptor.getModuleName;if(!c(this.parent.getDataModule)&&i&&i()==="ODataV4Adaptor")this.parent.getDataModule().searchQuery(e);else{var t=this.parent.searchSettings,r=t.fields.length?t.fields:this.options.columns.map(function(h){return h.field});e.search(t.key,r,t.operator,t.ignoreCase,t.ignoreAccent)}}if(this.options.filteredColumns.length){for(var n=[],o=0;o<this.options.filteredColumns.length;o++){var a=this.options.filteredColumns[parseInt(o.toString(),10)];this.options.uid?(a.uid=a.uid||this.parent.getColumnByField(a.field).uid,a.uid!==this.options.uid&&n.push(this.options.filteredColumns[parseInt(o.toString(),10)])):a.field!==this.options.field&&n.push(this.options.filteredColumns[parseInt(o.toString(),10)])}var l=this.getPredicateFromCols(n,this.isExecuteLocal);l&&e.where(l)}},s.prototype.processDataSource=function(e,i,t,r){hi(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var n={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(eh,n),this.isCheckboxFilterTemplate=n.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask():this.createFilterItems(t,i,r)},s.prototype.processSearch=function(e){this.processDataOperation(e)},s.prototype.updateResult=function(){this.result={};var e=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),i=new he;e&&i.where(e),this.parent.notify(Yl,{query:i});for(var t=new _(this.fullData).executeLocal(i),r=0,n=t;r<n.length;r++){var o=n[r];this.result[yt(this.options.field,o)]=!0}},s.prototype.clickHandler=function(e){var i;c(Ze.timer)||clearTimeout(Ze.timer);var t=e.target;if(!(!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&b(t,"e-mask-ftrchk"))){var r=b(t,"e-checkbox-wrapper");if(b(t,"e-searchbox")&&this.searchBoxClick(e),r&&!this.isCheckboxFilterTemplate){var n=r.querySelector(".e-selectall");if(n)this.updateAllCBoxes(!n.classList.contains("e-check"));else if(li(r.parentElement),this.infiniteRenderMod&&!r.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var o=this.options.allowCaseSensitive,a=r.parentElement.querySelector(".e-frame"),l=a.previousSibling,h=l.checked?"equal":"notequal",p=l.checked?"or":"and",d={field:this.options.field,predicate:p,uid:this.options.uid,operator:h,type:this.options.type,matchCase:o,ignoreAccent:this.options.ignoreAccent},u=this.values[b(l,"e-ftrchk").getAttribute("uid")];if(this.updateInfiniteManualSelectPred(d,u),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length){var f=this.getPredicateFromCols((i=this.options.filteredColumns).concat.apply(i,this.infiniteManualSelectMaintainPred),!0),g=new he;f&&g.where(f);var m=new _(this.infinitePermenantLocalData).executeLocal(g);this.options.parentTotalDataCount!==m.length&&(this.options.parentTotalDataCount=m.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[])}this.infiniteUnloadParentExistPred.length&&(this.options.parentTotalDataCount===this.infiniteDataCount||!this.options.parentTotalDataCount)&&(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn(),r.querySelector(".e-chk-hidden").focus()}this.setFocus(b(r,"e-ftrchk"))}},s.prototype.updateInfiniteManualSelectPred=function(e,i){for(var t=0;t<this.infiniteManualSelectMaintainPred.length;t++){var r=this.infiniteManualSelectMaintainPred[t];if(r.value+""==i+""&&(r.operator==="equal"||r.operator==="notequal")){this.infiniteManualSelectMaintainPred.splice(t,1);break}}(e.predicate==="or"&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll)||e.predicate==="and"&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll))&&(this.infiniteManualSelectMaintainPred.push(W({},{value:i},e)),e.predicate==="or"?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},s.prototype.focusNextOrPrev=function(e,i){var t=e.key==="ArrowUp"?i.indexOf(document.activeElement)-1:i.indexOf(document.activeElement)+1,r=i[(t+i.length)%i.length];if(r){r.focus();var n=r.classList.contains("e-chk-hidden")?b(r,"e-ftrchk"):r;this.setFocus(n)}},s.prototype.keyupHandler=function(e){if((e.key==="Tab"||(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey)&&this.setFocus(b(e.target,"e-ftrchk")),(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey&&this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"){e.preventDefault();var i=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(e,i)}},s.prototype.setFocus=function(e){var i=this.dlg.querySelector(".e-chkfocus");i&&i.classList.remove("e-chkfocus"),e&&e!==i&&e.classList.add("e-chkfocus")},s.prototype.updateAllCBoxes=function(e){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=e,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var i=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(o){return o.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)")),t=0,r=i;t<r.length;t++){var n=r[t];Ji(n,e),Ot(n.previousSibling,e)}},s.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},s.prototype.createCheckbox=function(e,i,t){var r=i?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Ot(r.querySelector("input"),i);var n=r.querySelector(".e-label"),o=Hn({},t,{column:this.options.column,parent:this.parent}),a=this.options.disableHtmlEncode?"textContent":"innerHTML";n[""+a]=!c(e)&&e.toString().length?this.parent.enableHtmlSanitizer?ei.sanitize(e):e:this.getLocalizedLabel("Blanks");var l=It("cbox");if(n.setAttribute("id",l+"cboxLabel"),r.querySelector("input").setAttribute("aria-labelledby",n.id),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),typeof e=="boolean"&&(n.innerHTML=e===!0?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),T([n],["e-checkboxfiltertext"]),this.options.template&&t[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&t[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")){n.innerHTML="";var h=this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&!(this.options.column.filter.itemTemplate.prototype&&this.options.column.filter.itemTemplate.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;h||p?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):We(n,this.options.template(o,this.parent,"filterItemTemplate",null,null,null,null,this.parent.root))}return r},s.prototype.updateIndeterminatenBtn=function(){var e=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,i=[],t=!1,r=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),n=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(l){return l.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;this.cBox.querySelector(".e-add-current")&&(e-=1);var o;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0],o.disabled=!1);var a=r.previousSibling;Ot(a,!1),a.indeterminate=!1,this.infiniteRenderMod&&this.sInput.value===""&&!this.options.parentCurrentViewDataCount&&!this.localInfiniteSelectionInteracted&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll&&!n)&&(e!==n||e===n)?n=0:this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!n||e===n)&&this.infiniteLocalSelectAll&&(n?e+=this.infiniteUnloadParentExistPred.length:n+=this.infiniteUnloadParentExistPred.length),e===n?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-check"],Ot(a,!0)):n?(i=["e-stop"],a.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-uncheck"],t=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),E([r],["e-check","e-stop","e-uncheck"]),T([r],i),this.parent.notify(fn,{disabled:t})},s.prototype.createFilterItems=function(e,i,t){var r,n,o,a=this.parent.createElement("div"),l,h=!1;this.options.isResponsiveFilter||(l=this.dialogObj.btnObj[0]);var p=-1,d="ejValue";t.executeQuery||(d=t.field);for(var u=0;u<e.length;u++){var f=Z(d,e[parseInt(u.toString(),10)]);(f===""||c(f))&&(p=p+1)}if(this.infiniteRenderMod||(this.itemsCnt=p!==-1?e.length-p:e.length),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask(),e.length&&!this.renderEmpty){var g=this.getLocalizedLabel("SelectAll"),m=this.cBox.querySelector(".e-checkfltrnmdiv");m&&m.classList.remove("e-checkfltrnmdiv");var S=this.createCheckbox(g,!1,(r={},r[this.options.field]=g,r));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?T([S],this.parent.cssClass.split(" ")):T([S],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod){var y=Qr(It("cbox"),S,"e-ftrchk");y.querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?(y.classList.add("e-infinitescroll"),this.parent.enableAdaptiveUI&&(this.spinner.style.height=this.spinner.offsetHeight-Wi(this.cBox)+"px"),this.sBox.insertBefore(y,this.spinner)):a.appendChild(y)}else this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled"));var R=new se("field","equal",this.options.field);this.options.foreignKeyValue&&(R=R.or("field","equal",this.options.foreignKeyValue));var w=new _(this.options.filteredColumns).executeLocal(new he().where(R)).length;if(this.sInput&&this.sInput.value){var F=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,(n={},n[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),n));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?T([F],this.parent.cssClass.split(" ")):T([F],[this.parent.cssClass])),this.infiniteRenderMod&&!c(this.sBox.children[2])&&this.sBox.children[2].innerText!==this.getLocalizedLabel("AddCurrentSelection")||!this.infiniteRenderMod){var L=Qr(It("cbox"),F,"e-ftrchk");if(L.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod){L.classList.add("e-infinitescroll"),this.sBox.insertBefore(L,this.spinner);var k=this.spinner.querySelector(".e-checkboxlist"),z=Math.ceil(L.getBoundingClientRect().height);k.style.height=parseInt(getComputedStyle(k).height.split("px")[0],10)-z+"px",k.style.minHeight=k.style.height}else a.appendChild(L)}else this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))}else if(this.infiniteRenderMod&&!c(this.sBox.children[2])&&this.sBox.children[2].innerText===this.getLocalizedLabel("AddCurrentSelection")){var k=this.spinner.querySelector(".e-checkboxlist"),H=Math.ceil(this.sBox.children[2].getBoundingClientRect().height);k.style.height=parseInt(getComputedStyle(k).height.split("px")[0],10)+H+"px",k.style.minHeight=k.style.height,q(this.sBox.children[2])}for(var B=void 0,u=0;u<e.length;u++){var Q=It("cbox");this.values[""+Q]=Z(d,e[parseInt(u.toString(),10)]);var D=Z(this.options.field,e[parseInt(u.toString(),10)]);this.options.formatFn&&(D=this.valueFormatter.toView(D,this.options.formatFn));var K={value:D,column:this.options.column,data:e[parseInt(u.toString(),10)]};if(this.parent.notify(vl,K),D=K.value,D===""||c(D)){if(B)continue;B=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(D,this.infiniteUnloadParentExistPred);var ie=this.localInfiniteSelectAllClicked?this.createCheckbox(D,this.infiniteLocalSelectAll,Z("dataObj",e[u])):this.createCheckbox(D,this.getCheckedState(w,this.values[""+Q]),Z("dataObj",e[u]));a.appendChild(Qr(Q,ie,"e-ftrchk")),this.infiniteRenderMod&&(a.lastChild.style.height=Wi(this.cBox)+"px")}var ae=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&_i([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((o=this.infiniteLoadedElem).push.apply(o,[].slice.call(a.children)),this.itemsCnt=p!==-1?this.infiniteLoadedElem.length-p:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),We(this.cBox,[].slice.call(a.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(ae-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),this.infiniteRenderMod?l&&l.disabled?h=!0:h=!1:(l&&(l.disabled=!1),h=!1)}else{if(a.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod){var y=this.sBox.querySelector(".e-ftrchk .e-selectall");if(y){var xe=y.parentElement.parentElement;y.classList.contains("e-check")?li(xe):y.classList.contains("e-stop")&&(li(xe),y.classList.remove("e-stop"),li(xe)),y.previousSibling.disabled=!0,y.parentElement.classList.add("e-checkbox-disabled")}var ce=this.sBox.querySelector(".e-ftrchk .e-add-current");if(ce){var ke=ce.parentElement.parentElement;ce.classList.contains("e-check")&&li(ke),ce.previousSibling.disabled=!0,ce.parentElement.classList.add("e-checkbox-disabled")}}this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),We(this.cBox.children[0],[].slice.call(a.children)),l&&(l.disabled=!0),h=!0,this.filterState=!h}l&&e.length&&(this.filterState=!l.disabled,l.dataBind());var Be={requestType:_r,dataSource:this.renderEmpty?[]:e},Nt="filterModel";Be[""+Nt]=this,this.parent.notify(Bs,Be),this.parent.notify(fn,{disabled:h}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),Jr(this.spinner)},s.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(e,i){for(var t=0;t<i.length;t++){var r=i[t],n=r.value instanceof Date?this.valueFormatter.toView(r.value,this.options.formatFn):r.value,o=this.options.column;if(o.isForeignColumn()){var a=qt(o,{},n,this.foreignKeyData)[0];e=Z(o.foreignKeyField,a)}e===n&&(r.operator==="equal"||r.operator==="notequal")&&(this.infiniteManualSelectMaintainPred.push(i[t]),i.splice(t,1),t--)}},s.prototype.getCheckedState=function(e,i){if(!this.isFiltered||!e)return!0;var t=this.sInput&&this.sInput.value?!0:this.result[""+i];return this.infiniteRenderMod?t:this.options.operator==="notequal"?!t:t},s.getDistinct=function(e,i,t,r,n){for(var o=e.length,a=[],l,h="ejValue",p={},d=t&&t.isForeignColumn?t.isForeignColumn():!1;o--;){if(l=e[parseInt(o.toString(),10)],t&&t.type==="dateonly"&&typeof l[""+i]=="string"&&l[""+i]){var u=l[""+i].split(/[^0-9.]/);l[""+i]=new Date(parseInt(u[0],10),parseInt(u[1],10)-1,parseInt(u[2],10))}l=yt(i,l);var f=typeof l=="string"&&!c(n)&&!c(n.parent)&&!c(n.parent.filterSettings)&&!c(n.parent.filterSettings.enableCaseSensitivity)?l.toLowerCase():l;if(!(f in p)){var g={};if(g[""+h]=l,p[""+f]=!0,d){var m=qt(t,{},l,r)[0];gt(fo,m,e[parseInt(o.toString(),10)]),l=Z(t.foreignKeyValue,m)}gt(i,c(l)?null:l,g),gt("dataObj",e[parseInt(o.toString(),10)],g),a.push(g)}}return fe.group(fe.sort(a,i,fe.fnAscending),"ejValue")},s.getPredicate=function(e,i){for(var t=fe.distinct(e,"field",!0)||[],r=[],n={},o=0;o<t.length;o++)r=new _(e).executeLocal(new he().where("field","equal",t[parseInt(o.toString(),10)].field)),r.length!==0&&(n[t[parseInt(o.toString(),10)].field]=s.generatePredicate(r,i));return n},s.generatePredicate=function(e,i){var t=e?e.length:0,r,n="or",o=s.updateDateFilter(e[0]);o.ignoreAccent=c(o.ignoreAccent)?!1:o.ignoreAccent,o.type==="date"||o.type==="datetime"||o.type==="dateonly"?r=Pt(o,o.type,i):r=o.ejpredicate?o.ejpredicate:new se(o.field,o.operator,o.value,!s.getCaseValue(o),o.ignoreAccent);for(var a=1;a<t;a++)e[parseInt(a.toString(),10)]=s.updateDateFilter(e[parseInt(a.toString(),10)]),t>2&&a>1&&(e[a].predicate==="or"&&e[a-1].predicate==="or"||e[a].predicate==="and"&&e[a-1].predicate==="and")?e[a].type==="date"||e[a].type==="datetime"||e[a].type==="dateonly"?r.predicates.push(Pt(e[parseInt(a.toString(),10)],e[a].type,i)):r.predicates.push(new se(e[a].field,e[parseInt(a.toString(),10)].operator,e[parseInt(a.toString(),10)].value,!s.getCaseValue(e[parseInt(a.toString(),10)]),e[parseInt(a.toString(),10)].ignoreAccent)):e[a].type==="date"||e[a].type==="datetime"||e[a].type==="dateonly"?e[parseInt(a.toString(),10)].predicate==="and"&&e[parseInt(a.toString(),10)].operator==="equal"?r=r[""+n](Pt(e[parseInt(a.toString(),10)],e[parseInt(a.toString(),10)].type,i),e[parseInt(a.toString(),10)].type,e[parseInt(a.toString(),10)].ignoreAccent):r=r[e[parseInt(a.toString(),10)].predicate](Pt(e[parseInt(a.toString(),10)],e[parseInt(a.toString(),10)].type,i),e[parseInt(a.toString(),10)].type,e[parseInt(a.toString(),10)].ignoreAccent):r=e[parseInt(a.toString(),10)].ejpredicate?r[e[parseInt(a.toString(),10)].predicate](e[parseInt(a.toString(),10)].ejpredicate):r[e[parseInt(a.toString(),10)].predicate](e[parseInt(a.toString(),10)].field,e[parseInt(a.toString(),10)].operator,e[parseInt(a.toString(),10)].value,!s.getCaseValue(e[parseInt(a.toString(),10)]),e[parseInt(a.toString(),10)].ignoreAccent);return r||null},s.getCaseValue=function(e){return c(e.matchCase)?!(e.type==="string"||c(e.type)&&typeof e.value=="string"):e.matchCase},s.updateDateFilter=function(e){return(e.type==="date"||e.type==="datetime"||e.type==="dateonly"||e.value instanceof Date)&&(e.type=e.type||"date"),e},s}();export{gp as G,We as a,Yt as k,b as p};

//# debugId=987382b4-a1bf-59f2-9e77-f58c9e63fdce
